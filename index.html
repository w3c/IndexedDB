<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Indexed Database API 2.0</title>
  <link href="https://www.w3.org/StyleSheets/TR/W3C-ED" rel="stylesheet" type="text/css">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: normal;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li li { font-size:   85%;    }

	.toc > li             { margin: 1.5rem 0;    }
	.toc > li li          { margin: 0.3rem 0;    }
	.toc > li li li       { margin-left: 2rem;   }

	/* Section numbers in a column of their own */
	.toc .secno {
		float: left;
		width: 4rem;
		white-space: nowrap;
	}
	.toc > li li li li .secno {
		font-size: 85%;
	}
	.toc > li li li li li .secno {
		font-size: 100%;
	}

	:not(li) > .toc              { margin-left:  5rem; }
	.toc .secno                  { margin-left: -5rem; }
	.toc > li li li .secno       { margin-left: -7rem; }
	.toc > li li li li .secno    { margin-left: -9rem; }
	.toc > li li li li li .secno { margin-left: -11rem; }

	/* Tighten up indentation in narrow ToCs */
	@media (max-width: 30em) {
		:not(li) > .toc              { margin-left:  4rem; }
		.toc .secno                  { margin-left: -4rem; }
		.toc > li li li              { margin-left:  1rem; }
		.toc > li li li .secno       { margin-left: -5rem; }
		.toc > li li li li .secno    { margin-left: -6rem; }
		.toc > li li li li li .secno { margin-left: -7rem; }
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
		body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
		body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
		body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
		body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
		body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	body.toc-sidebar #toc :not(li) > .toc              { margin-left:  4rem; }
	body.toc-sidebar #toc .toc .secno                  { margin-left: -4rem; }
	body.toc-sidebar #toc .toc > li li li              { margin-left:  1rem; }
	body.toc-sidebar #toc .toc > li li li .secno       { margin-left: -5rem; }
	body.toc-sidebar #toc .toc > li li li li .secno    { margin-left: -6rem; }
	body.toc-sidebar #toc .toc > li li li li li .secno { margin-left: -7rem; }

	.toc li {
		clear: both;
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed 1.0.0" name="generator">
  <link href="logo-db.png" rel="icon">
<style>
table.props {
  border-collapse: collapse;
  border-style: hidden hidden none hidden;
}
table.props thead, table.props tbody {
  border-bottom: solid;
}
table.props td, table.props th {
  border-bottom: solid thin;
  border-left: solid;
  border-right: solid;
  padding: 0.5em;
  text-align: left;
  vertical-align: top;
}
</style>
<style>/* style-md-lists */

            /* This is a weird hack for me not yet following the commonmark spec
               regarding paragraph and lists. */
            [data-md] > :first-child {
                margin-top: 0;
            }
            [data-md] > :last-child {
                margin-bottom: 0;
            }</style>
<style>/* style-selflinks */

            .heading, .issue, .note, .example, li, dt {
                position: relative;
            }
            a.self-link {
                position: absolute;
                top: 0;
                left: calc(-1 * (3.5rem - 26px));
                width: calc(3.5rem - 26px);
                height: 2em;
                text-align: center;
                border: none;
                transition: opacity .2s;
                opacity: .5;
            }
            a.self-link:hover {
                opacity: 1;
            }
            .heading > a.self-link {
                font-size: 83%;
            }
            li > a.self-link {
                left: calc(-1 * (3.5rem - 26px) - 2em);
            }
            dfn > a.self-link {
                top: auto;
                left: auto;
                opacity: 0;
                width: 1.5em;
                height: 1.5em;
                background: gray;
                color: white;
                font-style: normal;
                transition: opacity .2s, background-color .2s, color .2s;
            }
            dfn:hover > a.self-link {
                opacity: 1;
            }
            dfn > a.self-link:hover {
                color: black;
            }

            a.self-link::before            { content: "¶"; }
            .heading > a.self-link::before { content: "§"; }
            dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

            body {
                counter-reset: example figure issue;
            }
            .issue {
                counter-increment: issue;
            }
            .issue:not(.no-marker)::before {
                content: "Issue " counter(issue);
            }

            .example {
                counter-increment: example;
            }
            .example:not(.no-marker)::before {
                content: "Example " counter(example);
            }
            .invalid.example:not(.no-marker)::before,
            .illegal.example:not(.no-marker)::before {
                content: "Invalid Example" counter(example);
            }

            figcaption {
                counter-increment: figure;
            }
            figcaption:not(.no-marker)::before {
                content: "Figure " counter(figure) " ";
            }</style>
<style>/* style-autolinks */

            .css.css, .property.property, .descriptor.descriptor {
                color: #005a9c;
                font-size: inherit;
                font-family: inherit;
            }
            .css::before, .property::before, .descriptor::before {
                content: "‘";
            }
            .css::after, .property::after, .descriptor::after {
                content: "’";
            }
            .property, .descriptor {
                /* Don't wrap property and descriptor names */
                white-space: nowrap;
            }
            .type { /* CSS value <type> */
                font-style: italic;
            }
            pre .property::before, pre .property::after {
                content: "";
            }
            [data-link-type="property"]::before,
            [data-link-type="propdesc"]::before,
            [data-link-type="descriptor"]::before,
            [data-link-type="value"]::before,
            [data-link-type="function"]::before,
            [data-link-type="at-rule"]::before,
            [data-link-type="selector"]::before,
            [data-link-type="maybe"]::before {
                content: "‘";
            }
            [data-link-type="property"]::after,
            [data-link-type="propdesc"]::after,
            [data-link-type="descriptor"]::after,
            [data-link-type="value"]::after,
            [data-link-type="function"]::after,
            [data-link-type="at-rule"]::after,
            [data-link-type="selector"]::after,
            [data-link-type="maybe"]::after {
                content: "’";
            }

            [data-link-type].production::before,
            [data-link-type].production::after,
            .prod [data-link-type]::before,
            .prod [data-link-type]::after {
                content: "";
            }

            [data-link-type=element],
            [data-link-type=element-attr] {
                font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
                font-size: .9em;
            }
            [data-link-type=element]::before { content: "<" }
            [data-link-type=element]::after  { content: ">" }

            [data-link-type=biblio] {
                white-space: pre;
            }</style>
<style>/* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel ul { padding: 0; }
        .dfn-panel li { list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
        .highlight:not(.idl) { background: hsl(24, 20%, 95%); }
        code.highlight { padding: .1em; border-radius: .3em; }
        pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
        .highlight .c { color: #708090 } /* Comment */
        .highlight .k { color: #990055 } /* Keyword */
        .highlight .l { color: #000000 } /* Literal */
        .highlight .n { color: #0077aa } /* Name */
        .highlight .o { color: #999999 } /* Operator */
        .highlight .p { color: #999999 } /* Punctuation */
        .highlight .cm { color: #708090 } /* Comment.Multiline */
        .highlight .cp { color: #708090 } /* Comment.Preproc */
        .highlight .c1 { color: #708090 } /* Comment.Single */
        .highlight .cs { color: #708090 } /* Comment.Special */
        .highlight .kc { color: #990055 } /* Keyword.Constant */
        .highlight .kd { color: #990055 } /* Keyword.Declaration */
        .highlight .kn { color: #990055 } /* Keyword.Namespace */
        .highlight .kp { color: #990055 } /* Keyword.Pseudo */
        .highlight .kr { color: #990055 } /* Keyword.Reserved */
        .highlight .kt { color: #990055 } /* Keyword.Type */
        .highlight .ld { color: #000000 } /* Literal.Date */
        .highlight .m { color: #000000 } /* Literal.Number */
        .highlight .s { color: #a67f59 } /* Literal.String */
        .highlight .na { color: #0077aa } /* Name.Attribute */
        .highlight .nc { color: #0077aa } /* Name.Class */
        .highlight .no { color: #0077aa } /* Name.Constant */
        .highlight .nd { color: #0077aa } /* Name.Decorator */
        .highlight .ni { color: #0077aa } /* Name.Entity */
        .highlight .ne { color: #0077aa } /* Name.Exception */
        .highlight .nf { color: #0077aa } /* Name.Function */
        .highlight .nl { color: #0077aa } /* Name.Label */
        .highlight .nn { color: #0077aa } /* Name.Namespace */
        .highlight .py { color: #0077aa } /* Name.Property */
        .highlight .nt { color: #669900 } /* Name.Tag */
        .highlight .nv { color: #222222 } /* Name.Variable */
        .highlight .ow { color: #999999 } /* Operator.Word */
        .highlight .mb { color: #000000 } /* Literal.Number.Bin */
        .highlight .mf { color: #000000 } /* Literal.Number.Float */
        .highlight .mh { color: #000000 } /* Literal.Number.Hex */
        .highlight .mi { color: #000000 } /* Literal.Number.Integer */
        .highlight .mo { color: #000000 } /* Literal.Number.Oct */
        .highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
        .highlight .sc { color: #a67f59 } /* Literal.String.Char */
        .highlight .sd { color: #a67f59 } /* Literal.String.Doc */
        .highlight .s2 { color: #a67f59 } /* Literal.String.Double */
        .highlight .se { color: #a67f59 } /* Literal.String.Escape */
        .highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
        .highlight .si { color: #a67f59 } /* Literal.String.Interpol */
        .highlight .sx { color: #a67f59 } /* Literal.String.Other */
        .highlight .sr { color: #a67f59 } /* Literal.String.Regex */
        .highlight .s1 { color: #a67f59 } /* Literal.String.Single */
        .highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
        .highlight .vc { color: #0077aa } /* Name.Variable.Class */
        .highlight .vg { color: #0077aa } /* Name.Variable.Global */
        .highlight .vi { color: #0077aa } /* Name.Variable.Instance */
        .highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
        </style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="http://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Indexed Database API 2.0</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2016-10-20">20 October 2016</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/IndexedDB/">https://w3c.github.io/IndexedDB/</a>
     <dt>Previous Versions:
     <dd><a href="https://www.w3.org/TR/IndexedDB/" rel="previous">https://www.w3.org/TR/IndexedDB/</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-webapps@w3.org?subject=%5BIndexedDB%5D%20YOUR%20TOPIC%20HERE">public-webapps@w3.org</a> with subject line “<kbd>[IndexedDB] <i data-lt="">… message topic …</i></kbd>” (<a href="http://lists.w3.org/Archives/Public/public-webapps/" rel="discussion">archives</a>)</span>
     <dt>Test Suite:
     <dd><a href="https://github.com/w3c/web-platform-tests/tree/master/IndexedDB">https://github.com/w3c/web-platform-tests/tree/master/IndexedDB</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/w3c/IndexedDB/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:alia@microsoft.com">Ali Alabbas</a>
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:jsbell@google.com">Joshua Bell</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>This document defines APIs for a database of records holding

simple values and hierarchical objects. Each record consists of a key
and some value. Moreover, the database maintains indexes over records
it stores. An application developer directly uses an API to locate
records either by their key or by using an index. A query language can
be layered on this API. An indexed database can be implemented using a
persistent B-tree data structure.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
  It is provided for discussion only and may change at any moment.
  Its publication here does not imply endorsement of its contents by W3C.
  Don’t cite this document other than as work in progress. </p>
   <p> <strong>Changes to this document may be tracked at <a href="https://github.com/w3c/IndexedDB">https://github.com/w3c/IndexedDB</a>.</strong> </p>
   <p> If you wish to make comments regarding this document, please send them to this specification’s <a href="https://github.com/w3c/IndexedDB">GitHub repository</a> or (<a href="http://lists.w3.org/Archives/Public/public-webapps/">archived</a>) public mailing list <a href="mailto:public-webapps@w3.org?Subject=%5BIndexedDB%5D%20PUT%20SUBJECT%20HERE">public-webapps@w3.org</a> (see <a href="http://www.w3.org/Mail/Request">instructions</a>). When sending e-mail, please put the text “IndexedDB” in the subject, preferably like this: “[IndexedDB] <em>…summary of comment…</em>. All comments are welcome. </p>
   <p> This document was produced by the <a href="https://www.w3.org/WebPlatform/WG/">Web Platform Working Group</a>. </p>
   <p> This document was produced by a group operating under
  the <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
  W3C maintains a <a href="https://www.w3.org/2004/01/pp-impl/83482/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
  that page also includes instructions for disclosing a patent.
  An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">1 September 2015 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#constructs"><span class="secno">2</span> <span class="content">Constructs</span></a>
     <ol class="toc">
      <li>
       <a href="#database-construct"><span class="secno">2.1</span> <span class="content">Database</span></a>
       <ol class="toc">
        <li><a href="#database-connection"><span class="secno">2.1.1</span> <span class="content">Database Connection</span></a>
       </ol>
      <li>
       <a href="#object-store-construct"><span class="secno">2.2</span> <span class="content">Object Store</span></a>
       <ol class="toc">
        <li><a href="#object-store-handle-construct"><span class="secno">2.2.1</span> <span class="content">Object Store Handle</span></a>
       </ol>
      <li><a href="#value-construct"><span class="secno">2.3</span> <span class="content">Values</span></a>
      <li><a href="#key-construct"><span class="secno">2.4</span> <span class="content">Keys</span></a>
      <li><a href="#key-path-construct"><span class="secno">2.5</span> <span class="content">Key Path</span></a>
      <li>
       <a href="#index-construct"><span class="secno">2.6</span> <span class="content">Index</span></a>
       <ol class="toc">
        <li><a href="#index-handle-construct"><span class="secno">2.6.1</span> <span class="content">Index Handle</span></a>
       </ol>
      <li>
       <a href="#transaction-construct"><span class="secno">2.7</span> <span class="content">Transactions</span></a>
       <ol class="toc">
        <li><a href="#transaction-lifetime-concept"><span class="secno">2.7.1</span> <span class="content">Transaction Lifetime</span></a>
        <li><a href="#upgrade-transaction-construct"><span class="secno">2.7.2</span> <span class="content">Upgrade Transactions</span></a>
       </ol>
      <li>
       <a href="#request-construct"><span class="secno">2.8</span> <span class="content">Requests</span></a>
       <ol class="toc">
        <li><a href="#open-requests"><span class="secno">2.8.1</span> <span class="content">Open Requests</span></a>
       </ol>
      <li><a href="#range-construct"><span class="secno">2.9</span> <span class="content">Key Range</span></a>
      <li><a href="#cursor-construct"><span class="secno">2.10</span> <span class="content">Cursor</span></a>
      <li><a href="#key-generator-construct"><span class="secno">2.11</span> <span class="content">Key Generators</span></a>
     </ol>
    <li><a href="#exceptions"><span class="secno">3</span> <span class="content">Exceptions</span></a>
    <li>
     <a href="#async-api"><span class="secno">4</span> <span class="content">API</span></a>
     <ol class="toc">
      <li><a href="#request-api"><span class="secno">4.1</span> <span class="content">The <code class="idl"><span>IDBRequest</span></code> interface</span></a>
      <li><a href="#events"><span class="secno">4.2</span> <span class="content">Event interfaces</span></a>
      <li><a href="#factory-interface"><span class="secno">4.3</span> <span class="content">The <code class="idl"><span>IDBFactory</span></code> interface</span></a>
      <li><a href="#database-interface"><span class="secno">4.4</span> <span class="content">The <code class="idl"><span>IDBDatabase</span></code> interface</span></a>
      <li><a href="#object-store-interface"><span class="secno">4.5</span> <span class="content">The <code class="idl"><span>IDBObjectStore</span></code> interface</span></a>
      <li><a href="#index-interface"><span class="secno">4.6</span> <span class="content">The <code class="idl"><span>IDBIndex</span></code> interface</span></a>
      <li><a href="#keyrange"><span class="secno">4.7</span> <span class="content">The <code class="idl"><span>IDBKeyRange</span></code> interface</span></a>
      <li><a href="#cursor-interface"><span class="secno">4.8</span> <span class="content">The <code class="idl"><span>IDBCursor</span></code> interface</span></a>
      <li><a href="#transaction"><span class="secno">4.9</span> <span class="content">The <code class="idl"><span>IDBTransaction</span></code> interface</span></a>
      <li><a href="#domstringlist"><span class="secno">4.10</span> <span class="content">The <code class="idl"><span>DOMStringList</span></code> interface</span></a>
     </ol>
    <li>
     <a href="#algorithms"><span class="secno">5</span> <span class="content">Algorithms</span></a>
     <ol class="toc">
      <li><a href="#opening"><span class="secno">5.1</span> <span class="content">Opening a database</span></a>
      <li><a href="#closing-connection"><span class="secno">5.2</span> <span class="content">Closing a database</span></a>
      <li><a href="#deleting-a-database"><span class="secno">5.3</span> <span class="content">Deleting a database</span></a>
      <li><a href="#commit-transaction"><span class="secno">5.4</span> <span class="content">Committing a transaction</span></a>
      <li><a href="#abort-transaction"><span class="secno">5.5</span> <span class="content">Aborting a transaction</span></a>
      <li><a href="#async-execute-request"><span class="secno">5.6</span> <span class="content">Asynchronously executing a <span>request</span></span></a>
      <li><a href="#upgrade-transaction-steps"><span class="secno">5.7</span> <span class="content">Running an upgrade transaction</span></a>
      <li><a href="#abort-upgrade-transaction"><span class="secno">5.8</span> <span class="content">Aborting an upgrade transaction</span></a>
      <li><a href="#fire-success-event"><span class="secno">5.9</span> <span class="content">Firing a success event</span></a>
      <li><a href="#fire-error-event"><span class="secno">5.10</span> <span class="content">Firing an error event</span></a>
     </ol>
    <li>
     <a href="#database-operations"><span class="secno">6</span> <span class="content">Database operations</span></a>
     <ol class="toc">
      <li><a href="#object-store-storage-operation"><span class="secno">6.1</span> <span class="content">Object Store Storage Operation</span></a>
      <li><a href="#object-store-retrieval-operation"><span class="secno">6.2</span> <span class="content">Object Store Retrieval Operations</span></a>
      <li><a href="#index-retrieval-operation"><span class="secno">6.3</span> <span class="content">Index Retrieval Operations</span></a>
      <li><a href="#object-store-deletion-operation"><span class="secno">6.4</span> <span class="content">Object Store Deletion Operation</span></a>
      <li><a href="#record-counting-operation"><span class="secno">6.5</span> <span class="content">Record Counting Operation</span></a>
      <li><a href="#object-store-clear-operation"><span class="secno">6.6</span> <span class="content">Object Store Clear Operation</span></a>
      <li><a href="#cursor-iteration-operation"><span class="secno">6.7</span> <span class="content">Cursor Iteration Operation</span></a>
     </ol>
    <li>
     <a href="#binding"><span class="secno">7</span> <span class="content">ECMAScript binding</span></a>
     <ol class="toc">
      <li><a href="#extract-key-from-value"><span class="secno">7.1</span> <span class="content">Extract a key from a value</span></a>
      <li><a href="#inject-key-into-value"><span class="secno">7.2</span> <span class="content">Inject a key into a value</span></a>
      <li><a href="#convert-key-to-value"><span class="secno">7.3</span> <span class="content">Convert a key to a value</span></a>
      <li><a href="#convert-value-to-key"><span class="secno">7.4</span> <span class="content">Convert a value to a key</span></a>
     </ol>
    <li>
     <a href="#privacy"><span class="secno">8</span> <span class="content">Privacy Considerations</span></a>
     <ol class="toc">
      <li><a href="#user-tracking"><span class="secno">8.1</span> <span class="content">User tracking</span></a>
      <li><a href="#cookie-resurrection"><span class="secno">8.2</span> <span class="content">Cookie resurrection</span></a>
      <li><a href="#sensitivity-of-data"><span class="secno">8.3</span> <span class="content">Sensitivity of data</span></a>
     </ol>
    <li>
     <a href="#security"><span class="secno">9</span> <span class="content">Security Considerations</span></a>
     <ol class="toc">
      <li><a href="#dns-spoofing-attacks"><span class="secno">9.1</span> <span class="content">DNS spoofing attacks</span></a>
      <li><a href="#cross-directory-attacks"><span class="secno">9.2</span> <span class="content">Cross-directory attacks</span></a>
      <li><a href="#implementation-risks"><span class="secno">9.3</span> <span class="content">Implementation risks</span></a>
     </ol>
    <li><a href="#revision-history"><span class="secno">10</span> <span class="content">Revision History</span></a>
    <li><a href="#acknowledgements"><span class="secno">11</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <p>This is the Second Edition of Indexed Database API. The <a href="https://www.w3.org/TR/IndexedDB/">First Edition</a> became a W3C Recommendation on 8 January 2015.</p>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p>User agents need to store large numbers of objects locally in order to
satisfy off-line data requirements of Web applications. <a data-link-type="biblio" href="#biblio-webstorage">[WEBSTORAGE]</a> is useful for storing pairs of keys and their corresponding values.
However, it does not provide in-order retrieval of keys, efficient
searching over values, or storage of duplicate values for a key.</p>
   <p>This specification provides a concrete API to perform advanced
key-value data management that is at the heart of most sophisticated
query processors. It does so by using transactional databases to store
keys and their corresponding values (one or more per key), and
providing a means of traversing keys in a deterministic order. This is
often implemented through the use of persistent B-tree data structures
that are considered efficient for insertion and deletion as well as
in-order traversal of very large numbers of data records.</p>
   <aside class="example" id="example-8cc44ff1">
    <a class="self-link" href="#example-8cc44ff1"></a> In the following example, the API is used to access a "library"
database that holds books stored by their "isbn" attribute.
Additionally, an index is maintained on the "title" attribute of the
objects stored in the object store. This index can be used to look up
books by title, and enforces a uniqueness constraint. Another index is
maintained on the "author" attribute of the objects, and can be used
to look up books by author. 
    <p>A connection to the database is opened. If the "library" database did
not already exist, it is created and an event handler creates the
object store and indexes. Finally, the opened connection is saved for
use in subsequent examples.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">indexedDB</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"library"</span><span class="p">);</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">onupgradeneeded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// The database did not previously exist, so create object stores and indexes.</span>
  <span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"books"</span><span class="p">,</span> <span class="p">{</span><span class="nx">keyPath</span><span class="o">:</span> <span class="s2">"isbn"</span><span class="p">});</span>
  <span class="kd">var</span> <span class="nx">titleIndex</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"by_title"</span><span class="p">,</span> <span class="s2">"title"</span><span class="p">,</span> <span class="p">{</span><span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
  <span class="kd">var</span> <span class="nx">authorIndex</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"by_author"</span><span class="p">,</span> <span class="s2">"author"</span><span class="p">);</span>

  <span class="c1">// Populate with initial data.</span>
  <span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s2">"Quarry Memories"</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s2">"Fred"</span><span class="p">,</span> <span class="nx">isbn</span><span class="o">:</span> <span class="mi">123456</span><span class="p">});</span>
  <span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s2">"Water Buffaloes"</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s2">"Fred"</span><span class="p">,</span> <span class="nx">isbn</span><span class="o">:</span> <span class="mi">234567</span><span class="p">});</span>
  <span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s2">"Bedrock Nights"</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s2">"Barney"</span><span class="p">,</span> <span class="nx">isbn</span><span class="o">:</span> <span class="mi">345678</span><span class="p">});</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">db</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
<span class="p">};</span>
</pre>
    <p>The following example populates the database using a transaction.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="s2">"books"</span><span class="p">,</span> <span class="s2">"readwrite"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">tx</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">"books"</span><span class="p">);</span>

<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s2">"Quarry Memories"</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s2">"Fred"</span><span class="p">,</span> <span class="nx">isbn</span><span class="o">:</span> <span class="mi">123456</span><span class="p">});</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s2">"Water Buffaloes"</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s2">"Fred"</span><span class="p">,</span> <span class="nx">isbn</span><span class="o">:</span> <span class="mi">234567</span><span class="p">});</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s2">"Bedrock Nights"</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s2">"Barney"</span><span class="p">,</span> <span class="nx">isbn</span><span class="o">:</span> <span class="mi">345678</span><span class="p">});</span>

<span class="nx">tx</span><span class="p">.</span><span class="nx">oncomplete</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// All requests have succeeded and the transaction has committed.</span>
<span class="p">};</span>
</pre>
    <p>The following example looks up a single book in the database by title
using an index.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="s2">"books"</span><span class="p">,</span> <span class="s2">"readonly"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">tx</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">"books"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="s2">"by_title"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">index</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"Bedrock Nights"</span><span class="p">);</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">matching</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">matching</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// A match was found.</span>
    <span class="nx">report</span><span class="p">(</span><span class="nx">matching</span><span class="p">.</span><span class="nx">isbn</span><span class="p">,</span> <span class="nx">matching</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">matching</span><span class="p">.</span><span class="nx">author</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// No match was found.</span>
    <span class="nx">report</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre>
    <p>The following example looks up all books in the database by author
using an index and a cursor.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="s2">"books"</span><span class="p">,</span> <span class="s2">"readonly"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">tx</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">"books"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="s2">"by_author"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">index</span><span class="p">.</span><span class="nx">openCursor</span><span class="p">(</span><span class="nx">IDBKeyRange</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="s2">"Fred"</span><span class="p">));</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">cursor</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Called for each matching record.</span>
    <span class="nx">report</span><span class="p">(</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">isbn</span><span class="p">,</span> <span class="nx">cursor</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">cursor</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">author</span><span class="p">);</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="k">continue</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// No more matching records.</span>
    <span class="nx">report</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre>
    <p>The following example shows how errors could be handled when a request
fails.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="s2">"books"</span><span class="p">,</span> <span class="s2">"readwrite"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">tx</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">"books"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s2">"Water Buffaloes"</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s2">"Slate"</span><span class="p">,</span> <span class="nx">isbn</span><span class="o">:</span> <span class="mi">987654</span><span class="p">});</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// The uniqueness constraint of the "by_title" index failed.</span>
  <span class="nx">report</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
  <span class="c1">// Could call request.preventDefault() to prevent the transaction from aborting.</span>
<span class="p">};</span>
<span class="nx">tx</span><span class="p">.</span><span class="nx">onabort</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Otherwise the transaction will automatically abort due the failed request.</span>
  <span class="nx">report</span><span class="p">(</span><span class="nx">tx</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="p">};</span>
</pre>
    <p>The database connection may be closed when it is no longer needed.</p>
<pre class="lang-javascript highlight"><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
</pre>
    <p>In the future, the database may have grown to contain other object
stores and indexes. The following example shows one way to handle
opening an older version of the database.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">indexedDB</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"library"</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// Request version 3.</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">onupgradeneeded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">oldVersion</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Version 1 is the first version of the database.</span>
    <span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"books"</span><span class="p">,</span> <span class="p">{</span><span class="nx">keyPath</span><span class="o">:</span> <span class="s2">"isbn"</span><span class="p">});</span>
    <span class="kd">var</span> <span class="nx">titleIndex</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"by_title"</span><span class="p">,</span> <span class="s2">"title"</span><span class="p">,</span> <span class="p">{</span><span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
    <span class="kd">var</span> <span class="nx">authorIndex</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"by_author"</span><span class="p">,</span> <span class="s2">"author"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">oldVersion</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Version 2 introduces a new index of books by year.</span>
    <span class="kd">var</span> <span class="nx">bookStore</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">transaction</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">"books"</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">yearIndex</span> <span class="o">=</span> <span class="nx">bookStore</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"by_year"</span><span class="p">,</span> <span class="s2">"year"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">oldVersion</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Version 3 introduces a new object store for magazines with two indexes.</span>
    <span class="kd">var</span> <span class="nx">magazines</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"magazines"</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">publisherIndex</span> <span class="o">=</span> <span class="nx">magazines</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"by_publisher"</span><span class="p">,</span> <span class="s2">"publisher"</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">frequencyIndex</span> <span class="o">=</span> <span class="nx">magazines</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"by_frequency"</span><span class="p">,</span> <span class="s2">"frequency"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">db</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span> <span class="c1">// db.version will be 3.</span>
<span class="p">};</span>
</pre>
   </aside>
   <h2 class="heading settled" data-level="2" id="constructs"><span class="secno">2. </span><span class="content">Constructs</span><a class="self-link" href="#constructs"></a></h2>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sorted-list">sorted list</dfn> is a <code class="idl"><a data-link-type="idl" href="#request-domstringlist" id="ref-for-request-domstringlist-1">DOMStringList</a></code> containing strings
sorted in ascending order by code unit.</p>
   <h3 class="heading settled" data-level="2.1" id="database-construct"><span class="secno">2.1. </span><span class="content">Database</span><a class="self-link" href="#database-construct"></a></h3>
   <p>A database’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a> is the same as the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a> of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">document</a> or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#worker">worker</a>. Each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a> has an associated
set of databases.</p>
   <aside class="note" role="note"> The database origin is not affected by changes to
  the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#document">Document</a></code>'s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/browsers.html#dom-document-domain">domain</a></code>. </aside>
   <p>Each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a> has an associated set of <a data-link-type="dfn" href="#database" id="ref-for-database-1">databases</a>. A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="database">database</dfn> has zero or more <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-1">object stores</a> which
hold the data stored in the database.</p>
   <div>
    <p>A <a data-link-type="dfn" href="#database" id="ref-for-database-2">database</a> has a <dfn class="dfn-paneled" data-dfn-for="database" data-dfn-type="dfn" data-noexport="" id="database-name">name</dfn> which identifies it within a
specific <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a>. The name can be any string value, including
the empty string, and stays constant for the lifetime of the database.
Database names are always compared in a case-sensitive manner, as
opaque sequences of 16-bit code units. Implementations must support
all names.</p>
    <aside class="note" role="note"> If an implementation uses a storage mechanism which can’t handle
  arbitrary database names, the implementation must use an escaping
  mechanism or something similar to map the provided name to a name
  that it can handle. </aside>
    <p>A <a data-link-type="dfn" href="#database" id="ref-for-database-3">database</a> has a <dfn class="dfn-paneled" data-dfn-for="database" data-dfn-type="dfn" data-noexport="" id="database-version">version</dfn>. When a database is first
created, its <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-1">version</a> is 0 (zero).</p>
    <aside class="note" role="note"> Each <a data-link-type="dfn" href="#database" id="ref-for-database-4">database</a> has one version at a time; a <a data-link-type="dfn" href="#database" id="ref-for-database-5">database</a> can’t
  exist in multiple versions at once. The only way to change the
  version is using an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-1">upgrade transaction</a>. </aside>
   </div>
   <h4 class="heading settled" data-level="2.1.1" id="database-connection"><span class="secno">2.1.1. </span><span class="content">Database Connection</span><a class="self-link" href="#database-connection"></a></h4>
   <p>Script does not interact with <a data-link-type="dfn" href="#database" id="ref-for-database-6">databases</a> directly. Instead,
script has indirect access via a <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="connection|connected" data-noexport="" id="connection">connection</dfn>.
A <a data-link-type="dfn" href="#connection" id="ref-for-connection-1">connection</a> object can be used to manipulate the objects of
that <a data-link-type="dfn" href="#database" id="ref-for-database-7">database</a>. It is also the only way to obtain a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-1">transaction</a> for that <a data-link-type="dfn" href="#database" id="ref-for-database-8">database</a>.</p>
   <p>The act of opening a <a data-link-type="dfn" href="#database" id="ref-for-database-9">database</a> creates a <a data-link-type="dfn" href="#connection" id="ref-for-connection-2">connection</a>.
There may be multiple <a data-link-type="dfn" href="#connection" id="ref-for-connection-3">connections</a> to a given <a data-link-type="dfn" href="#database" id="ref-for-database-10">database</a> at
any given time.</p>
   <div>
    <p>A <a data-link-type="dfn" href="#connection" id="ref-for-connection-4">connection</a> has a <dfn class="dfn-paneled" data-dfn-for="connection" data-dfn-type="dfn" data-noexport="" id="connection-version">version</dfn>, which is set when
the <a data-link-type="dfn" href="#connection" id="ref-for-connection-5">connection</a> is created. It remains constant for the
lifetime of the <a data-link-type="dfn" href="#connection" id="ref-for-connection-6">connection</a> unless an <a data-link-type="dfn" href="#request-steps-for-aborting-an-upgrade-transaction" id="ref-for-request-steps-for-aborting-an-upgrade-transaction-1">upgrade is aborted</a>, in which
case it is set to the previous version of the <a data-link-type="dfn" href="#database" id="ref-for-database-11">database</a>. Once
the <a data-link-type="dfn" href="#connection" id="ref-for-connection-7">connection</a> is closed the <a data-link-type="dfn" href="#connection-version" id="ref-for-connection-version-1">version</a> does not change.</p>
    <p>Each connection has a <dfn class="dfn-paneled" data-dfn-for="connection" data-dfn-type="dfn" data-noexport="" id="connection-close-pending-flag">close pending flag</dfn> which is initially
unset.</p>
    <p>When a <a data-link-type="dfn" href="#connection" id="ref-for-connection-8">connection</a> is initially created it is in <dfn data-dfn-for="connection" data-dfn-type="dfn" data-noexport="" id="connection-opened">opened<a class="self-link" href="#connection-opened"></a></dfn> state. The connection can be <dfn class="dfn-paneled" data-dfn-for="connection" data-dfn-type="dfn" data-noexport="" id="connection-closed">closed</dfn> through several means.
If the execution context where the <a data-link-type="dfn" href="#connection" id="ref-for-connection-9">connection</a> was created is
destroyed (for example due to the user navigating away from that
page), the connection is closed. The connection can also be closed
explicitly using the <a data-link-type="dfn" href="#request-steps-for-closing-a-database-connection" id="ref-for-request-steps-for-closing-a-database-connection-1">steps for closing a database connection</a>. When
the connection is closed the <a data-link-type="dfn" href="#connection-close-pending-flag" id="ref-for-connection-close-pending-flag-1">close pending flag</a> is always set if
it hasn’t already been.</p>
    <p>A <a data-link-type="dfn" href="#connection" id="ref-for-connection-10">connection</a> may be closed by a user agent in exceptional
circumstances, for example due to loss of access to the file system, a
permission change, or clearing of the origin’s storage. If this occurs
the user agent must run the <a data-link-type="dfn" href="#request-steps-for-closing-a-database-connection" id="ref-for-request-steps-for-closing-a-database-connection-2">steps for closing a database
connection</a> with the <a data-link-type="dfn" href="#connection" id="ref-for-connection-11">connection</a> and with the <var>forced flag</var> set.</p>
    <aside class="advisement"> 🚧
  This behavior is new in this edition.
  It is supported in Chrome 31 and Firefox 50.
  🚧 </aside>
    <p>A <a data-link-type="dfn" href="#connection" id="ref-for-connection-12">connection</a> has an <dfn class="dfn-paneled" data-dfn-for="connection" data-dfn-type="dfn" data-noexport="" id="connection-object-store-set">object store set</dfn>, which is
initialized to the set of <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-2">object stores</a> in the associated <a data-link-type="dfn" href="#database" id="ref-for-database-12">database</a> when the <a data-link-type="dfn" href="#connection" id="ref-for-connection-13">connection</a> is created. The contents of the
set will remain constant except when an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-2">upgrade transaction</a> is
running.</p>
    <p>A <a data-link-type="dfn" href="#connection" id="ref-for-connection-14">connection</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#get-the-parent">get the parent</a> algorithm returns
null.</p>
   </div>
   <h3 class="heading settled" data-level="2.2" id="object-store-construct"><span class="secno">2.2. </span><span class="content">Object Store</span><a class="self-link" href="#object-store-construct"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="object-store">object store</dfn> is the primary storage mechanism for
storing data in a <a data-link-type="dfn" href="#database" id="ref-for-database-13">database</a>.</p>
   <div>
    <p>Each database has a set of <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-3">object stores</a>. The set of <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-4">object
stores</a> can be changed, but only using an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-3">upgrade transaction</a>,
i.e. in response to an <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-1">upgradeneeded</a></code> event. When a
new database is created it doesn’t contain any <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-5">object stores</a>.</p>
    <p>An <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-6">object store</a> has a <dfn class="dfn-paneled" data-dfn-for="object-store" data-dfn-type="dfn" data-noexport="" id="object-store-list-of-records">list of records</dfn> which hold the
data stored in the object store. Each <dfn class="dfn-paneled" data-dfn-for="object-store" data-dfn-type="dfn" data-noexport="" id="object-store-record">record</dfn> consists of a <a data-link-type="dfn" href="#key" id="ref-for-key-1">key</a> and a <a data-link-type="dfn" href="#value" id="ref-for-value-1">value</a>. The list is sorted according to key in
ascending order. There can never be multiple records in a given object
store with the same key.</p>
    <p>An <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-7">object store</a> has a <dfn class="dfn-paneled" data-dfn-for="object-store" data-dfn-type="dfn" data-noexport="" id="object-store-name">name</dfn>. The name can be any string
value, including the empty string. At any one time, the name is unique
within the <a data-link-type="dfn" href="#database" id="ref-for-database-14">database</a> to which it belongs. Object store names are
always compared in a case-sensitive manner, as opaque sequences of
16-bit code units.</p>
    <p>An <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-8">object store</a> optionally has a <dfn class="dfn-paneled" data-dfn-for="object-store" data-dfn-type="dfn" data-noexport="" id="object-store-key-path">key path</dfn>. If the
object store has a key path it is said to use <dfn class="dfn-paneled" data-dfn-for="object-store" data-dfn-type="dfn" data-noexport="" id="object-store-in-line-keys">in-line keys</dfn>.
Otherwise it is said to use <dfn class="dfn-paneled" data-dfn-for="object-store" data-dfn-type="dfn" data-noexport="" id="object-store-out-of-line-keys">out-of-line keys</dfn>.</p>
    <p>An <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-9">object store</a> optionally has a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-1">key generator</a>.</p>
    <p>An object store can derive a <a data-link-type="dfn" href="#key" id="ref-for-key-2">key</a> for a <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-1">record</a> from
one of three sources:</p>
    <ol>
     <li data-md="">
      <p>A <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-2">key generator</a>. A key generator generates a monotonically
increasing numbers every time a key is needed.</p>
     <li data-md="">
      <p>Keys can be derived via a <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-1">key path</a>.</p>
     <li data-md="">
      <p>Keys can also be explicitly specified when a <a data-link-type="dfn" href="#value" id="ref-for-value-2">value</a> is stored
in the object store.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.2.1" id="object-store-handle-construct"><span class="secno">2.2.1. </span><span class="content">Object Store Handle</span><a class="self-link" href="#object-store-handle-construct"></a></h4>
   <p>Script does not interact with <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-10">object stores</a> directly. Instead,
within a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-2">transaction</a>, script has indirect access via an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="object-store-handle">object store handle</dfn>.</p>
   <div>
    <p>An <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-1">object store handle</a> has an associated <dfn class="dfn-paneled" data-dfn-for="object-store-handle" data-dfn-type="dfn" data-noexport="" id="object-store-handle-object-store">object store</dfn> and an associated <dfn class="dfn-paneled" data-dfn-for="object-store-handle" data-dfn-type="dfn" data-noexport="" id="object-store-handle-transaction">transaction</dfn>. Multiple handles may be
associated with the same <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-11">object store</a> in different <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-3">transactions</a>, but there must be only one <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-2">object store handle</a> associated with a particular <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-12">object store</a> within a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-4">transaction</a>.</p>
    <p>An <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-3">object store handle</a> has an <dfn class="dfn-paneled" data-dfn-for="object-store-handle" data-dfn-type="dfn" data-noexport="" id="object-store-handle-index-set">index set</dfn>, which is
initialized to the set of <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-1">indexes</a> that reference the associated <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-1">object store</a> when the <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-4">object store handle</a> is created. The contents of the set will remain constant except when
an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-4">upgrade transaction</a> is running.</p>
    <p>An <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-5">object store handle</a> has a <dfn class="dfn-paneled" data-dfn-for="object-store-handle" data-dfn-type="dfn" data-noexport="" id="object-store-handle-name">name</dfn>, which is
initialized to the <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-1">name</a> of the associated <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-2">object store</a> when the <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-6">object store handle</a> is created. The name will remain constant except when an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-5">upgrade
transaction</a> is running.</p>
   </div>
   <h3 class="heading settled" data-level="2.3" id="value-construct"><span class="secno">2.3. </span><span class="content">Values</span><a class="self-link" href="#value-construct"></a></h3>
   <p>Each record is associated with a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="value">value</dfn>. User agents must
support any ECMAScript <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a> value supported by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#safe-passing-of-structured-data">structured clone algorithm</a> <a data-link-type="biblio" href="#biblio-html">[HTML]</a>. This includes simple types
such as <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-ecmascript-language-types-string-type">String</a> primitive values and <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-date-objects">Date</a> objects as well as <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-object-objects">Object</a> and <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> instances, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file">File</a></code> objects, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob">Blob</a></code> objects, <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#imagedata">ImageData</a></code> objects, and so on. Record <a data-link-type="dfn" href="#value" id="ref-for-value-3">values</a> are
stored and retrieved by value rather than by reference; later changes
to a value have no effect on the record stored in the database.</p>
   <h3 class="heading settled" data-level="2.4" id="key-construct"><span class="secno">2.4. </span><span class="content">Keys</span><a class="self-link" href="#key-construct"></a></h3>
   <p>In order to efficiently retrieve <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-2">records</a> stored in an indexed
database, each <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-3">record</a> is organized according to its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="key">key</dfn>.</p>
   <div>
    <p>A <a data-link-type="dfn" href="#key" id="ref-for-key-3">key</a> has an associated <dfn class="dfn-paneled" data-dfn-for="key" data-dfn-type="dfn" data-noexport="" id="key-type">type</dfn> which is one of: <i>number</i>, <i>date</i>, <i>string</i>, <i>binary</i>,
or <i>array</i>.</p>
    <aside class="advisement"> 🚧 <i>Binary</i> keys are new in this edition.
  They will be supported in Firefox 51.
  🚧 </aside>
    <p>A <a data-link-type="dfn" href="#key" id="ref-for-key-4">key</a> also has an associated <dfn class="dfn-paneled" data-dfn-for="key" data-dfn-type="dfn" data-noexport="" id="key-value">value</dfn>, which will
be either:
an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a></code> if type is <i>number</i> or <i>date</i>,
a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> if type is <i>string</i>,
a list of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-octet">octets</a> if type is <i>binary</i>,
or a list of other <a data-link-type="dfn" href="#key" id="ref-for-key-5">keys</a> if type is <i>array</i>.</p>
   </div>
   <p>An ECMAScript <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a> value can be converted to a <a data-link-type="dfn" href="#key" id="ref-for-key-6">key</a> by
following the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-1">convert a value to a key</a>.</p>
   <aside class="note" role="note">
     The following ECMAScript types are valid keys: 
    <ul>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-ecmascript-language-types-number-type">Number</a> primitive values, except NaN. This includes Infinity
  and -Infinity.</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-date-objects">Date</a> objects, except where the [<span>[</span>DateValue]]
  internal slot is NaN</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-ecmascript-language-types-string-type">String</a> primitive values.</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-arraybuffer-objects">ArrayBuffer</a> objects (or views on buffers such as <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-typedarray-objects">Uint8Array</a>).</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> objects, where every item is defined, is itself a valid
  key, and does not directly or indirectly contain itself. This
  includes empty arrays. Arrays may contain other arrays.</p>
    </ul>
    <p>Attempting to convert other ECMAScript values to a <a data-link-type="dfn" href="#key" id="ref-for-key-7">key</a> will fail.</p>
   </aside>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="array-key">array key</dfn> is a <a data-link-type="dfn" href="#key" id="ref-for-key-8">key</a> with <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-1">type</a> <i>array</i>.
The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="subkeys">subkeys</dfn> of an <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-1">array key</a> are the members of the <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-2">array key</a>'s <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-1">value</a> list.</p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="compare-two-keys">compare two keys</dfn> <var>a</var> and <var>b</var>, run these steps:</p>
   <div class="algorithm">
    <ol>
     <li data-md="">
      <p>Let <var>ta</var> be the <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-2">type</a> of <var>a</var>.</p>
     <li data-md="">
      <p>Let <var>tb</var> be the <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-3">type</a> of <var>b</var>.</p>
     <li data-md="">
      <p>If <var>ta</var> is <i>array</i> and <var>tb</var> is <i>binary</i>, <i>string</i>, <i>date</i> or <i>number</i>, return 1.</p>
     <li data-md="">
      <p>If <var>tb</var> is <i>array</i> and <var>ta</var> is <i>binary</i>, <i>string</i>, <i>date</i> or <i>number</i>, return -1.</p>
     <li data-md="">
      <p>If <var>ta</var> is <i>binary</i> and <var>tb</var> is <i>string</i>, <i>date</i> or <i>number</i>, return 1.</p>
     <li data-md="">
      <p>If <var>tb</var> is <i>binary</i> and <var>ta</var> is <i>string</i>, <i>date</i> or <i>number</i>, return -1.</p>
     <li data-md="">
      <p>If <var>ta</var> is <i>string</i> and <var>tb</var> is <i>date</i> or <i>number</i>,
return 1.</p>
     <li data-md="">
      <p>If <var>tb</var> is <i>string</i> and <var>ta</var> is <i>date</i> or <i>number</i>,
return -1.</p>
     <li data-md="">
      <p>If <var>ta</var> is <i>date</i> and <var>tb</var> is <i>number</i>, return 1.</p>
     <li data-md="">
      <p>If <var>tb</var> is <i>date</i> and <var>ta</var> is <i>number</i>, return -1.</p>
     <li data-md="">
      <p class="assertion">Assert: <var>ta</var> and <var>tb</var> are equal.</p>
     <li data-md="">
      <p>Let <var>va</var> be the <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-2">value</a> of <var>a</var>.</p>
     <li data-md="">
      <p>Let <var>vb</var> be the <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-3">value</a> of <var>b</var>.</p>
     <li data-md="">
      <p>Switch on <var>ta</var>:</p>
      <dl class="switch">
       <dt><i>number</i>
       <dt><i>date</i>
       <dd>
        <ol>
         <li data-md="">
          <p>If <var>va</var> is greater than <var>vb</var>, then return 1.</p>
         <li data-md="">
          <p>If <var>va</var> is less than <var>vb</var>, then return -1.</p>
         <li data-md="">
          <p>Return 0</p>
        </ol>
       <dt><i>string</i>
       <dd>
        <ol>
         <li data-md="">
          <p>Let <var>length</var> be the lesser of <var>va</var>’s length and <var>vb</var>’s length.</p>
         <li data-md="">
          <p>Let <var>i</var> be 0.</p>
         <li data-md="">
          <p>While <var>i</var> is less than <var>length</var>, run these substeps:</p>
          <ol>
           <li data-md="">
            <p>Let <var>u</var> be the code unit of <var>va</var> at index <var>i</var></p>
           <li data-md="">
            <p>Let <var>v</var> be the code unit of <var>vb</var> at index <var>i</var></p>
           <li data-md="">
            <p>If <var>u</var> is greater than <var>v</var> then return 1</p>
           <li data-md="">
            <p>If <var>u</var> is less than <var>v</var> then return -1</p>
           <li data-md="">
            <p>Increase <var>i</var> by 1</p>
          </ol>
         <li data-md="">
          <p>If <var>va</var>’s length is greater than <var>vb</var>’s length, then return 1</p>
         <li data-md="">
          <p>If <var>va</var>’s length is less than <var>vb</var>’s length, then return -1</p>
         <li data-md="">
          <p>Return 0</p>
        </ol>
       <dt><i>binary</i>
       <dd>
        <ol>
         <li data-md="">
          <p>Let <var>length</var> be the lesser of <var>va</var>’s length and <var>vb</var>’s length.</p>
         <li data-md="">
          <p>Let <var>i</var> be 0.</p>
         <li data-md="">
          <p>While <var>i</var> is less than <var>length</var>, run these substeps:</p>
          <ol>
           <li data-md="">
            <p>Let <var>u</var> be the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-octet">octet</a> in <var>va</var> at index <var>i</var></p>
           <li data-md="">
            <p>Let <var>v</var> be the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-octet">octet</a> in <var>vb</var> at index <var>i</var></p>
           <li data-md="">
            <p>If <var>u</var> is greater than <var>v</var> then return 1</p>
           <li data-md="">
            <p>If <var>u</var> is less than <var>v</var> then return -1</p>
           <li data-md="">
            <p>Increase <var>i</var> by 1</p>
          </ol>
         <li data-md="">
          <p>If <var>va</var>’s length is greater than <var>vb</var>’s length, then return 1</p>
         <li data-md="">
          <p>If <var>va</var>’s length is less than <var>vb</var>’s length, then return -1</p>
         <li data-md="">
          <p>Return 0</p>
        </ol>
       <dt><i>array</i>
       <dd>
        <ol>
         <li data-md="">
          <p>Let <var>length</var> be the lesser of <var>va</var>’s length and <var>vb</var>’s length.</p>
         <li data-md="">
          <p>Let <var>i</var> be 0.</p>
         <li data-md="">
          <p>While <var>i</var> is less than <var>length</var>, run these substeps:</p>
          <ol>
           <li data-md="">
            <p>Let <var>u</var> be the <a data-link-type="dfn" href="#key" id="ref-for-key-9">key</a> in <var>va</var> at index <var>i</var></p>
           <li data-md="">
            <p>Let <var>v</var> be the <a data-link-type="dfn" href="#key" id="ref-for-key-10">key</a> in <var>vb</var> at index <var>i</var></p>
           <li data-md="">
            <p>Let <var>c</var> be the result of recursively running the steps to <a data-link-type="dfn" href="#compare-two-keys" id="ref-for-compare-two-keys-1">compare two keys</a> with <var>u</var> and <var>v</var></p>
           <li data-md="">
            <p>If <var>c</var> is not 0, return <var>c</var></p>
           <li data-md="">
            <p>Increase <var>i</var> by 1</p>
          </ol>
         <li data-md="">
          <p>If <var>va</var>’s length is greater than <var>vb</var>’s length, then return 1</p>
         <li data-md="">
          <p>If <var>va</var>’s length is less than <var>vb</var>’s length, then return -1</p>
         <li data-md="">
          <p>Return 0</p>
        </ol>
      </dl>
    </ol>
   </div>
   <p>The <a data-link-type="dfn" href="#key" id="ref-for-key-11">key</a> <var>a</var> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="greater-than">greater than</dfn> the <a data-link-type="dfn" href="#key" id="ref-for-key-12">key</a> <var>b</var> if the
result of running the steps to <a data-link-type="dfn" href="#compare-two-keys" id="ref-for-compare-two-keys-2">compare two keys</a> with <var>a</var> and <var>b</var> is 1.</p>
   <p>The <a data-link-type="dfn" href="#key" id="ref-for-key-13">key</a> <var>a</var> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="less-than">less than</dfn> the <a data-link-type="dfn" href="#key" id="ref-for-key-14">key</a> <var>b</var> if the
result of running the steps to <a data-link-type="dfn" href="#compare-two-keys" id="ref-for-compare-two-keys-3">compare two keys</a> with <var>a</var> and <var>b</var> is -1.</p>
   <p>The <a data-link-type="dfn" href="#key" id="ref-for-key-15">key</a> <var>a</var> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="equal-to">equal to</dfn> the <a data-link-type="dfn" href="#key" id="ref-for-key-16">key</a> <var>b</var> if the result
of running the steps to <a data-link-type="dfn" href="#compare-two-keys" id="ref-for-compare-two-keys-4">compare two keys</a> with <var>a</var> and <var>b</var> is 0.</p>
   <aside class="note" role="note"> As a result of the above rules, negative infinity is the lowest
  possible value for a <a data-link-type="dfn" href="#key" id="ref-for-key-17">key</a>. <i>Number</i> keys are less than <i>date</i> keys. <i>Date</i> keys are less than <i>string</i> keys. <i>String</i> keys are less than <i>binary</i> keys. <i>Binary</i> keys are less than <i>array</i> keys.
  There is no highest possible <a data-link-type="dfn" href="#key" id="ref-for-key-18">key</a> value.
  This is because an array of any candidate highest <a data-link-type="dfn" href="#key" id="ref-for-key-19">key</a> followed by another <a data-link-type="dfn" href="#key" id="ref-for-key-20">key</a> is even higher. </aside>
   <aside class="note" role="note"> Members of <i>binary</i> keys are compared as unsigned octet values
  (in the range [0, 255]) rather than signed bytes (in the range
  [-128, 127]). </aside>
   <h3 class="heading settled" data-level="2.5" id="key-path-construct"><span class="secno">2.5. </span><span class="content">Key Path</span><a class="self-link" href="#key-path-construct"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="key-path">key path</dfn> is a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> or <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence">sequence&lt;DOMString></a> that defines how to extract a <a data-link-type="dfn" href="#key" id="ref-for-key-21">key</a> from a <a data-link-type="dfn" href="#value" id="ref-for-value-4">value</a>. A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="valid-key-path">valid key path</dfn> is one of:</p>
   <ul>
    <li data-md="">
     <p>An empty <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code>.</p>
    <li data-md="">
     <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="identifier">identifier</dfn>, which is a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> matching the <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#prod-IdentifierName">IdentifierName</a> production from the ECMAScript Language
Specification <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>.</p>
    <li data-md="">
     <p>A <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> consisting of two or more <a data-link-type="dfn" href="#identifier" id="ref-for-identifier-1">identifiers</a> separated
by periods (ASCII character code 46, U+002E FULL STOP).</p>
    <li data-md="">
     <p>A non-empty <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence">sequence&lt;DOMString></a> containing only strings
conforming to the above requirements.</p>
   </ul>
   <aside class="note" role="note"> Spaces are not allowed within a key path. </aside>
   <p><a data-link-type="dfn" href="#key-path" id="ref-for-key-path-1">Key path</a> values can only be accessed from properties explicitly
copied by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#safe-passing-of-structured-data">structured clone algorithm</a>, as well as the
following type-specific properties:</p>
   <table class="props">
    <tbody>
     <tr>
      <th>Type
      <th>Properties
     <tr>
      <td><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob">Blob</a></code>
      <td><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-size">size</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-type">type</a></code>
     <tr>
      <td><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file">File</a></code>
      <td><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-name">name</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-lastModified">lastModified</a></code>, <code>lastModifiedDate</code>
     <tr>
      <td><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a>
      <td><code>length</code>
     <tr>
      <td><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-ecmascript-language-types-string-type">String</a>
      <td><code>length</code>
   </table>
   <h3 class="heading settled" data-level="2.6" id="index-construct"><span class="secno">2.6. </span><span class="content">Index</span><a class="self-link" href="#index-construct"></a></h3>
   <p>It is sometimes useful to retrieve <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-4">records</a> in an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-13">object store</a> through other means than their <a data-link-type="dfn" href="#key" id="ref-for-key-22">key</a>. An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="index-concept">index</dfn> allows looking up <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-5">records</a> in an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-14">object store</a> using properties of the <a data-link-type="dfn" href="#value" id="ref-for-value-5">values</a> in the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-15">object stores</a> <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-6">records</a>.</p>
   <div>
    <p>An index is a specialized persistent key-value storage and has a <dfn class="dfn-paneled" data-dfn-for="index" data-dfn-type="dfn" data-lt="referenced|references" data-noexport="" id="index-referenced">referenced</dfn> <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-16">object store</a>. The
index has a <dfn class="dfn-paneled" data-dfn-for="index" data-dfn-type="dfn" data-noexport="" id="index-list-of-records">list of records</dfn> which hold the data stored in
the index. The records in an index are automatically populated
whenever records in the <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-1">referenced</a> object store are inserted,
updated or deleted. There can be several <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-2">indexes</a> referencing the
same <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-17">object store</a>, in which changes to the object store cause all
such indexes to get updated.</p>
    <p>The values in the index’s <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-7">records</a> are always values of <a data-link-type="dfn" href="#key" id="ref-for-key-23">keys</a> in the index’s <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-2">referenced</a> object store. The keys are derived from
the referenced object store’s <a data-link-type="dfn" href="#value" id="ref-for-value-6">values</a> using a <dfn class="dfn-paneled" data-dfn-for="index" data-dfn-type="dfn" data-noexport="" id="index-key-path">key path</dfn>.
If a given <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-8">record</a> with key <var>X</var> in the object store referenced by
the index has the value <var>A</var>, and <a data-link-type="dfn" href="#request-extract-a-key-from-a-value-using-a-key-path" id="ref-for-request-extract-a-key-from-a-value-using-a-key-path-1">evaluating</a> the index’s <a data-link-type="dfn" href="#index-key-path" id="ref-for-index-key-path-1">key path</a> on <var>A</var> yields the result <var>Y</var>, then the index will contain a record
with key <var>Y</var> and value <var>X</var>.</p>
    <aside class="example" id="example-cac0c3b0"><a class="self-link" href="#example-cac0c3b0"></a> For example, if an index’s <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-3">referenced</a> object store contains a
  record with the key <code>123</code> and the value <code>{ first:
  "Alice", last: "Smith" }</code>, and the index’s <a data-link-type="dfn" href="#index-key-path" id="ref-for-index-key-path-2">key path</a> is "<code>first</code>" then the index would contain a record with
  the key "<code>Alice</code>" and the value <code>123</code>. </aside>
    <p>Records in an index are said to have a <dfn class="dfn-paneled" data-dfn-for="index" data-dfn-type="dfn" data-noexport="" id="index-referenced-value">referenced value</dfn>.
This is the value of the record in the index’s referenced object store
which has a key equal to the index’s record’s value. So in the example
above, the record in the index whose key is <var>Y</var> and value is <var>X</var> has a <a data-link-type="dfn" href="#index-referenced-value" id="ref-for-index-referenced-value-1">referenced value</a> of <var>A</var>.</p>
    <aside class="example" id="example-5f130912"><a class="self-link" href="#example-5f130912"></a> In the preceding example, the record in the index with key
  "<code>Alice</code>" and value <code>123</code> would have a <a data-link-type="dfn" href="#index-referenced-value" id="ref-for-index-referenced-value-2">referenced value</a> of <code>{ first: "Alice", last: "Smith"
  }</code>. </aside>
    <aside class="note" role="note"> Each record in an index references one and only one record in the
  index’s <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-4">referenced</a> object store. However there can be multiple
  records in an index which reference the same record in the object
  store. And there can also be no records in an index which reference
  a given record in an object store. </aside>
    <p>The <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-9">records</a> in an index are always sorted according to the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-10">record</a>'s key. However unlike object stores, a given index can
contain multiple records with the same key. Such records are
additionally sorted according to the <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-3">index</a>'s <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-11">record</a>'s value
(meaning the key of the record in the referenced <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-18">object store</a>).</p>
    <p>An <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-4">index</a> has a <dfn class="dfn-paneled" data-dfn-for="index" data-dfn-type="dfn" data-noexport="" id="index-name">name</dfn>. The name can be any
string value, including the empty string. At any one time, the name is
unique within index’s <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-5">referenced</a> <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-19">object store</a>.
Index names are always compared in a case-sensitive manner, as opaque
sequences of 16-bit code units.</p>
    <p>An <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-5">index</a> has a <dfn class="dfn-paneled" data-dfn-for="index" data-dfn-type="dfn" data-noexport="" id="index-unique-flag">unique flag</dfn>. When this flag is
set, the index enforces that no two <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-12">records</a> in the index has
the same key. If a <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-13">record</a> in the index’s referenced object
store is attempted to be inserted or modified such that evaluating the
index’s key path on the records new value yields a result which
already exists in the index, then the attempted modification to the
object store fails.</p>
    <p>An <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-6">index</a> has a <dfn class="dfn-paneled" data-dfn-for="index" data-dfn-type="dfn" data-noexport="" id="index-multientry-flag">multiEntry flag</dfn>. This flag affects how
the index behaves when the result of evaluating the index’s <a data-link-type="dfn" href="#index-key-path" id="ref-for-index-key-path-3">key path</a> yields an <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-3">array key</a>. If the <a data-link-type="dfn" href="#index-multientry-flag" id="ref-for-index-multientry-flag-1">multiEntry flag</a> is unset, then a single <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-14">record</a> whose <a data-link-type="dfn" href="#key" id="ref-for-key-24">key</a> is an <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-4">array key</a> is added to the index. If the <a data-link-type="dfn" href="#index-multientry-flag" id="ref-for-index-multientry-flag-2">multiEntry flag</a> is true, then the
one <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-15">record</a> is added to the index for each of the <a data-link-type="dfn" href="#subkeys" id="ref-for-subkeys-1">subkeys</a>.</p>
   </div>
   <h4 class="heading settled" data-level="2.6.1" id="index-handle-construct"><span class="secno">2.6.1. </span><span class="content">Index Handle</span><a class="self-link" href="#index-handle-construct"></a></h4>
   <p>Script does not interact with <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-7">indexes</a> directly. Instead, within
a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-5">transaction</a>, script has indirect access via an <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="index handle" data-noexport="" id="index-handle">index
handle</dfn>.</p>
   <div>
    <p>An <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-1">index handle</a> has an associated <dfn class="dfn-paneled" data-dfn-for="index-handle" data-dfn-type="dfn" data-noexport="" id="index-handle-index">index</dfn> and an
associated <dfn class="dfn-paneled" data-dfn-for="index-handle" data-dfn-type="dfn" data-noexport="" id="index-handle-object-store-handle">object store handle</dfn>. The <dfn class="dfn-paneled" data-dfn-for="index-handle" data-dfn-type="dfn" data-noexport="" id="index-handle-transaction">transaction</dfn> of an <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-2">index handle</a> is the <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-1">transaction</a> of
its associated <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-7">object store handle</a>. Multiple handles may be
associated with the same <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-8">index</a> in different <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-6">transactions</a>,
but there must be only one <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-3">index handle</a> associated with a
particular <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-9">index</a> within a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-7">transaction</a>.</p>
    <p>An <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-4">index handle</a> has a <dfn class="dfn-paneled" data-dfn-for="index-handle" data-dfn-type="dfn" data-noexport="" id="index-handle-name">name</dfn>, which is initialized to the <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-1">name</a> of the associated <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-1">index</a> when the <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-5">index handle</a> is created. The name will remain constant except when
an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-6">upgrade transaction</a> is running.</p>
   </div>
   <h3 class="heading settled" data-level="2.7" id="transaction-construct"><span class="secno">2.7. </span><span class="content">Transactions</span><a class="self-link" href="#transaction-construct"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="transaction-concept">Transaction</dfn> is used to interact
with the data in a <a data-link-type="dfn" href="#database" id="ref-for-database-15">database</a>. Whenever data is read or written
to the database it is done by using a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-8">transaction</a>.</p>
   <div>
    <p><a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-9">Transactions</a> offer some protection from application and system
failures. A <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-10">transaction</a> may be used to store multiple data
records or to conditionally modify certain data records. A <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-11">transaction</a> represents an atomic and durable set of data access
and data mutation operations.</p>
    <p>All transactions are created through a <a data-link-type="dfn" href="#connection" id="ref-for-connection-15">connection</a>, which is the
transaction’s <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-connection">connection</dfn>.</p>
    <p>A <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-12">transaction</a> has a <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-scope">scope</dfn> that determines the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-20">object stores</a> with which the transaction may interact. A
transaction’s scope remains fixed for the lifetime of that
transaction.</p>
    <p>A <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-13">transaction</a> has a <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-mode">mode</dfn> that determines which types
of interactions can be performed upon that transaction. The <a data-link-type="dfn" href="#transaction-mode" id="ref-for-transaction-mode-1">mode</a> is set when the transaction is created and remains fixed for the life
of the transaction. A <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-14">transaction</a>'s <a data-link-type="dfn" href="#transaction-mode" id="ref-for-transaction-mode-2">mode</a> is one of the
following:</p>
    <dl>
     <dt><code class="idl"><a data-link-type="idl" href="#dom-idbtransactionmode-readonly" id="ref-for-dom-idbtransactionmode-readonly-1">"readonly"</a></code>
     <dd> The transaction is only allowed to read data. No modifications can
    be done by this type of transaction. This has the advantage that
    several <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-1">read-only transactions</a> can run at the same time even
    if their <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-1">scopes</a> are overlapping, i.e. if they are using the
    same object stores. This type of transaction can be created any
    time once a database has been opened. 
     <dt><code class="idl"><a data-link-type="idl" href="#dom-idbtransactionmode-readwrite" id="ref-for-dom-idbtransactionmode-readwrite-1">"readwrite"</a></code>
     <dd> The transaction is allowed to read, modify and delete data from
    existing object stores. However object stores and indexes can’t be
    added or removed. Multiple <code class="idl"><a data-link-type="idl" href="#dom-idbtransactionmode-readwrite" id="ref-for-dom-idbtransactionmode-readwrite-2">"readwrite"</a></code> transactions
    can’t run at the same time if their <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-2">scopes</a> are overlapping
    since that would mean that they can modify each other’s data in
    the middle of the transaction. This type of transaction can be
    created any time once a database has been opened. 
     <dt><code class="idl"><a data-link-type="idl" href="#dom-idbtransactionmode-versionchange" id="ref-for-dom-idbtransactionmode-versionchange-1">"versionchange"</a></code>
     <dd> The transaction is allowed to read, modify and delete data from
    existing object stores, and can also create and remove object
    stores and indexes. It is the only type of transaction that can do
    so. This type of transaction can’t be manually created, but
    instead is created automatically when an <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-2">upgradeneeded</a></code> event is fired. 
    </dl>
    <p>A <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-15">transaction</a> has an <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-active-flag">active flag</dfn>, which determines
if new <a data-link-type="dfn" href="#request" id="ref-for-request-1">requests</a> can be made against the transaction. A
transaction is said to be <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-active">active</dfn> if its <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-1">active flag</a> is set.</p>
    <p>A <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-16">transaction</a> has a <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-request-list">request list</dfn> of <a data-link-type="dfn" href="#request" id="ref-for-request-2">requests</a> which have been made against the transaction.</p>
    <p>A <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-17">transaction</a> has a <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-error">error</dfn> which is set if the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-18">transaction</a> is <a data-link-type="dfn" href="#transaction-abort" id="ref-for-transaction-abort-1">aborted</a>.</p>
    <p>A <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-19">transaction</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#get-the-parent">get the parent</a> algorithm returns the
transaction’s <a data-link-type="dfn" href="#transaction-connection" id="ref-for-transaction-connection-1">connection</a>.</p>
    <p>A <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-read-only-transaction">read-only transaction</dfn> is
a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-20">transaction</a> with <a data-link-type="dfn" href="#transaction-mode" id="ref-for-transaction-mode-3">mode</a> <code class="idl"><a data-link-type="idl" href="#dom-idbtransactionmode-readonly" id="ref-for-dom-idbtransactionmode-readonly-2">"readonly"</a></code>.</p>
    <p>A <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-read-write-transaction">read/write transaction</dfn> is a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-21">transaction</a> with <a data-link-type="dfn" href="#transaction-mode" id="ref-for-transaction-mode-4">mode</a> <code class="idl"><a data-link-type="idl" href="#dom-idbtransactionmode-readwrite" id="ref-for-dom-idbtransactionmode-readwrite-3">"readwrite"</a></code>.</p>
    <h4 class="heading settled" data-level="2.7.1" id="transaction-lifetime-concept"><span class="secno">2.7.1. </span><span class="content">Transaction Lifetime</span><a class="self-link" href="#transaction-lifetime-concept"></a></h4>
    <p>Transactions are expected to be short lived. This is encouraged by the <a data-link-type="dfn" href="#transaction-commit" id="ref-for-transaction-commit-1">automatic committing</a> functionality
described below.</p>
    <aside class="note" role="note"> Authors can still cause transactions to run for a long time; however,
  this usage pattern is not generally recommended as it can lead to a
  bad user experience. </aside>
    <p>The <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-lifetime">lifetime</dfn> of a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-22">transaction</a> is as follows:</p>
    <ol>
     <li data-md="">
      <p>A transaction is <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-noexport="" id="transaction-created">created</dfn> with a <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-3">scope</a> and a <a data-link-type="dfn" href="#transaction-mode" id="ref-for-transaction-mode-5">mode</a>.
When a transaction is created its <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-2">active flag</a> is initially set.</p>
     <li data-md="">
      <p>The implementation must allow <a data-link-type="dfn" href="#request" id="ref-for-request-3">requests</a> to be <a data-link-type="dfn" href="#request-placed" id="ref-for-request-placed-1">placed</a> against the transaction whenever the <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-3">active flag</a> is set. This
is the case even if the transaction has not yet been <a data-link-type="dfn" href="#transaction-start" id="ref-for-transaction-start-1">started</a>.
Until the transaction is <a data-link-type="dfn" href="#transaction-start" id="ref-for-transaction-start-2">started</a> the implementation must not
execute these requests; however, the implementation must keep
track of the <a data-link-type="dfn" href="#request" id="ref-for-request-4">requests</a> and their order. Requests may be placed
against a transaction only while that transaction is <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-1">active</a>.
If an attempt is made to place a request against a transaction
when that transaction is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-2">active</a>, the implementation must
reject the attempt by throwing a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-1">TransactionInactiveError</a></code>.</p>
     <li data-md="">
      <p>Once an implementation is able to enforce the constraints defined
for the transaction <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-4">scope</a> and <a data-link-type="dfn" href="#transaction-mode" id="ref-for-transaction-mode-6">mode</a>, defined below, the
implementation must <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-lt="start|started" data-noexport="" id="transaction-start">start</dfn> the transaction asynchronously.</p>
     <li data-md="">
      <p>Once the transaction has been <a data-link-type="dfn" href="#transaction-start" id="ref-for-transaction-start-3">started</a> the implementation can
start executing the <a data-link-type="dfn" href="#request" id="ref-for-request-5">requests</a> placed against the transaction.
Unless otherwise defined, requests must be executed in the order
in which they were made against the transaction. Likewise, their
results must be returned in the order the requests were placed
against a specific transaction. There is no guarantee about the
order that results from requests in different transactions are
returned. Similarly, the transaction <a data-link-type="dfn" href="#transaction-mode" id="ref-for-transaction-mode-7">modes</a> ensure that two
requests placed against different transactions can execute in any
order without affecting what resulting data is stored in the
database.</p>
     <li data-md="">
      <p>A transaction can be <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-lt="abort|aborting|aborted" data-noexport="" id="transaction-abort">aborted</dfn> at any time before it is <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-1">finished</a>, even if the transaction
isn’t currently <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-3">active</a> or hasn’t yet <a data-link-type="dfn" href="#transaction-start" id="ref-for-transaction-start-4">started</a>. When a
transaction is aborted the implementation must undo (roll back)
any changes that were made to the <a data-link-type="dfn" href="#database" id="ref-for-database-16">database</a> during that
transaction. This includes both changes to the contents of <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-21">object stores</a> as well as additions and removals of <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-22">object
stores</a> and <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-10">indexes</a>.</p>
     <li data-md="">
      <p>A transaction can fail for reasons not tied to a particular <a data-link-type="dfn" href="#request" id="ref-for-request-6">request</a>. For example due to IO errors when committing the
transaction, or due to running into a quota limit where the
implementation can’t tie exceeding the quota to a partcular
request. In this case the implementation must run the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-1">steps for
aborting a transaction</a> using the transaction as <var>transaction</var> and the appropriate error type as <var>error</var>. For example if quota
was exceeded then <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-quotaexceedederror" id="ref-for-exceptiondef-request-quotaexceedederror-1">QuotaExceededError</a></code> should be used as <var>error</var>, and if an IO error happened, <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-unknownerror" id="ref-for-exceptiondef-request-unknownerror-1">UnknownError</a></code> should be
used as <var>error</var>.</p>
     <li data-md="">
      <p>When a transaction has been started and it can no longer become <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-4">active</a>, the implementation must attempt to <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-lt="commit|committing|committed" data-noexport="" id="transaction-commit">commit</dfn> it, as long as the
transaction has not been <a data-link-type="dfn" href="#transaction-abort" id="ref-for-transaction-abort-2">aborted</a>. This usually happens after
all requests placed against the transaction have been executed and
their returned results handled, and no new requests have been
placed against the transaction. When a transaction is committed,
the implementation must atomically write any changes to the <a data-link-type="dfn" href="#database" id="ref-for-database-17">database</a> made by requests placed against the transaction. That
is, either all of the changes must be written, or if an error
occurs, such as a disk write error, the implementation must not
write any of the changes to the database. If such an error occurs,
the implementation must <a data-link-type="dfn" href="#transaction-abort" id="ref-for-transaction-abort-3">abort</a> the transaction by following the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-2">steps for aborting a transaction</a>, otherwise it must <a data-link-type="dfn" href="#transaction-commit" id="ref-for-transaction-commit-2">commit</a> the transaction by following the <a data-link-type="dfn" href="#request-steps-for-committing-a-transaction" id="ref-for-request-steps-for-committing-a-transaction-1">steps
for committing a transaction</a>.</p>
     <li data-md="">
      <p>When a transaction is <a data-link-type="dfn" href="#transaction-commit" id="ref-for-transaction-commit-3">committed</a> or <a data-link-type="dfn" href="#transaction-abort" id="ref-for-transaction-abort-4">aborted</a>, it
is said to be <dfn class="dfn-paneled" data-dfn-for="transaction" data-dfn-type="dfn" data-lt="finish|finished" data-noexport="" id="transaction-finish">finished</dfn>. If a
transaction can’t be finished, for example due to the
implementation crashing or the user taking some explicit action to
cancel it, the implementation must <a data-link-type="dfn" href="#transaction-abort" id="ref-for-transaction-abort-5">abort</a> the transaction.</p>
    </ol>
    <p>The following constraints define when a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-23">transaction</a> can be <a data-link-type="dfn" href="#transaction-start" id="ref-for-transaction-start-5">started</a>:</p>
    <ul>
     <li data-md="">
      <p>Any number of <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-2">read-only transactions</a> are allowed to run
concurrently, even if the transaction’s <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-5">scope</a> overlap and
include the same <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-23">object stores</a>. As long as a <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-3">read-only
transaction</a> is running, the data that the implementation returns
through <a data-link-type="dfn" href="#request" id="ref-for-request-7">requests</a> created with that transaction must remain
constant. That is, two requests to read the same piece of data
must yield the same result both for the case when data is found
and the result is that data, and for the case when data is not
found and a lack of data is indicated.</p>
      <aside class="note" role="note"> There are a number of ways that an implementation can ensure
  this. The implementation could prevent any <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-1">read/write
  transaction</a>, whose scope overlaps the scope of the <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-4">read-only transaction</a>, from starting until the <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-5">read-only transaction</a> finishes. Or the implementation
  could allow the <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-6">read-only transaction</a> to see a snapshot
  of the contents of the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-24">object stores</a> which is taken when
  the <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-7">read-only transaction</a> started. </aside>
     <li data-md="">
      <p>Similarly, implementations must ensure that a <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-2">read/write
transaction</a> is only affected by changes to <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-25">object
stores</a> that are made using the transaction itself. For
example, the implementation must ensure that another transaction
does not modify the contents of <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-26">object stores</a> in the <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-3">read/write transaction</a>’s <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-6">scope</a>. The implementation
must also ensure that if the <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-4">read/write transaction</a> completes successfully, the changes written to <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-27">object
stores</a> using the transaction can be committed to the <a data-link-type="dfn" href="#database" id="ref-for-database-18">database</a> without merge conflicts. An implementation must
not abort a transaction due to merge conflicts.</p>
     <li data-md="">
      <p>If multiple <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-5">read/write transactions</a> are attempting to access
the same object store (i.e. if they have overlapping <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-7">scope</a>),
the transaction that was <a data-link-type="dfn" href="#transaction-created" id="ref-for-transaction-created-1">created</a> first must be the transaction
which gets access to the object store first. Due to the
requirements in the previous paragraph, this also means that it is
the only transaction which has access to the object store until
the transaction is <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-2">finished</a>.</p>
     <li data-md="">
      <p>Any transaction <a data-link-type="dfn" href="#transaction-created" id="ref-for-transaction-created-2">created</a> after a <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-6">read/write transaction</a> must see the changes written by the <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-7">read/write transaction</a>.
So if a <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-8">read/write transaction</a>, A, is created, and later
another transaction B, is created, and the two transactions have
overlapping <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-8">scopes</a>, then B must see any changes made to any <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-28">object stores</a> that are part of that overlapping <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-9">scope</a>.
Due to the requirements in the previous paragraph, this also means
that the B transaction does not have access to any <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-29">object
stores</a> in that overlapping <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-10">scope</a> until the A transaction is <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-3">finished</a>.</p>
      <aside class="note" role="note"> Generally speaking, the above requirements mean that any
  transaction which has an overlapping scope with a <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-9">read/write
  transaction</a> and which was created after that <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-10">read/write
  transaction</a>, can’t run in parallel with that <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-11">read/write
  transaction</a>. </aside>
     <li data-md="">
      <p>User agents must ensure a reasonable level of fairness across
transactions to prevent starvation. For example, if multiple <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-8">read-only transactions</a> are started one after another the
implementation must not indefinitely prevent a pending <a data-link-type="dfn" href="#transaction-read-write-transaction" id="ref-for-transaction-read-write-transaction-12">read/write transaction</a> from <a data-link-type="dfn" href="#transaction-start" id="ref-for-transaction-start-6">starting</a>.</p>
    </ul>
   </div>
   <h4 class="heading settled" data-level="2.7.2" id="upgrade-transaction-construct"><span class="secno">2.7.2. </span><span class="content">Upgrade Transactions</span><a class="self-link" href="#upgrade-transaction-construct"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="upgrade-transaction">upgrade transaction</dfn> is a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-24">transaction</a> with <a data-link-type="dfn" href="#transaction-mode" id="ref-for-transaction-mode-8">mode</a> <code class="idl"><a data-link-type="idl" href="#dom-idbtransactionmode-versionchange" id="ref-for-dom-idbtransactionmode-versionchange-2">"versionchange"</a></code>.</p>
   <p>An <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-7">upgrade transaction</a> is automatically created when running <a data-link-type="dfn" href="#request-steps-for-running-an-upgrade-transaction" id="ref-for-request-steps-for-running-an-upgrade-transaction-1">steps for running an upgrade transaction</a> after a <a data-link-type="dfn" href="#connection" id="ref-for-connection-16">connection</a> is opened to a <a data-link-type="dfn" href="#database" id="ref-for-database-19">database</a> giving a greater <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-2">version</a> than
the current <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-3">version</a>. This <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-25">transaction</a> will be active
inside the <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-3">upgradeneeded</a></code> event handler, allowing the
creation of new <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-30">object stores</a> and <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-11">indexes</a>.</p>
   <p>An <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-8">upgrade transaction</a> is never run concurrently with other
transactions. When a database is opened with a <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-4">version</a> number higher than the current <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-5">version</a>, a new <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-9">upgrade
transaction</a> is automatically created and made available through the <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-1">open request</a> when the <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-4">upgradeneeded</a></code> event is
fired. The <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-5">upgradeneeded</a></code> event isn’t fired, and thus
the <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-10">upgrade transaction</a> isn’t started, until all other <a data-link-type="dfn" href="#connection" id="ref-for-connection-17">connections</a> to the same <a data-link-type="dfn" href="#database" id="ref-for-database-20">database</a> are closed. This ensures
that all other transactions are <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-4">finished</a>.</p>
   <p>As long as an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-11">upgrade transaction</a> is running, attempts to open
more <a data-link-type="dfn" href="#connection" id="ref-for-connection-18">connections</a> to the same <a data-link-type="dfn" href="#database" id="ref-for-database-21">database</a> are delayed, and
any attempts to use the same <a data-link-type="dfn" href="#connection" id="ref-for-connection-19">connection</a> to start additional
transactions will result in an exception being thrown. Thus <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-12">upgrade
transactions</a> not only ensure that no other transactions are
running concurrently, but also ensure that no other transactions are
queued against the same <a data-link-type="dfn" href="#database" id="ref-for-database-22">database</a> as long as the transaction is
running.</p>
   <h3 class="heading settled" data-level="2.8" id="request-construct"><span class="secno">2.8. </span><span class="content">Requests</span><a class="self-link" href="#request-construct"></a></h3>
   <p>Each asynchronous operation on a <a data-link-type="dfn" href="#database" id="ref-for-database-23">database</a> is done using a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="request">request</dfn>. Every request represents one
operation.</p>
   <div>
    <p>A <a data-link-type="dfn" href="#request" id="ref-for-request-8">request</a> has a <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-done-flag">done flag</dfn> which is initially unset.</p>
    <p>A <a data-link-type="dfn" href="#request" id="ref-for-request-9">request</a> has a <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-source">source</dfn> object.</p>
    <p>A <a data-link-type="dfn" href="#request" id="ref-for-request-10">request</a> has a <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-result">result</dfn> and an <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-error">error</dfn>, neither
of which are accessible until the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-1">done flag</a> is set.</p>
    <p>A <a data-link-type="dfn" href="#request" id="ref-for-request-11">request</a> has a <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-transaction">transaction</dfn> which is initially null.
This will be set when a request is <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-placed">placed</dfn> against a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-26">transaction</a> using the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-1">steps for asynchronously executing a
request</a>.</p>
    <p>When a request is made, a new <a data-link-type="dfn" href="#request" id="ref-for-request-12">request</a> is returned with its <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-2">done
flag</a> unset. If a request completes successfully, the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-3">done flag</a> is set, the <a data-link-type="dfn" href="#request-result" id="ref-for-request-result-1">result</a> is set to the result of the request,
and an event with type <code>success</code> is fired at the <a data-link-type="dfn" href="#request" id="ref-for-request-13">request</a>.</p>
    <p>If an error occurs while performing the operation, the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-4">done flag</a> is set, the <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-1">error</a> is set to the error, and an event with
type <code>error</code> is fired at the request.</p>
    <p>A <a data-link-type="dfn" href="#request" id="ref-for-request-14">request</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#get-the-parent">get the parent</a> algorithm returns the request’s <a data-link-type="dfn" href="#request-transaction" id="ref-for-request-transaction-1">transaction</a>.</p>
    <aside class="note" role="note"> Requests are not typically re-used, but there are exceptions. When a <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-1">cursor</a> is iterated, the success of the iteration is reported
  on the same <a data-link-type="dfn" href="#request" id="ref-for-request-15">request</a> object used to open the cursor. And when
  an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-13">upgrade transaction</a> is necessary, the same <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-2">open
  request</a> is used for both the <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-6">upgradeneeded</a></code> event and final result of the open operation itself. In both cases,
  the request’s <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-5">done flag</a> will be unset then set again, and the <a data-link-type="dfn" href="#request-result" id="ref-for-request-result-2">result</a> may change. </aside>
    <h4 class="heading settled" data-level="2.8.1" id="open-requests"><span class="secno">2.8.1. </span><span class="content">Open Requests</span><a class="self-link" href="#open-requests"></a></h4>
    <p>An <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-open-request">open request</dfn> is a special type of <a data-link-type="dfn" href="#request" id="ref-for-request-16">request</a> used
when opening a <a data-link-type="dfn" href="#connection" id="ref-for-connection-20">connection</a> or deleting a <a data-link-type="dfn" href="#database" id="ref-for-database-24">database</a>.
In addition to <code>success</code> and <code>error</code> events, <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-blocked"><code>blocked</code></dfn> and <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-upgradeneeded"><code>upgradeneeded</code></dfn> may be fired at an <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-3">open
request</a> to indicate progress.</p>
    <p>The <a data-link-type="dfn" href="#request-source" id="ref-for-request-source-1">source</a> of an <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-4">open request</a> is always null.</p>
    <p>The <a data-link-type="dfn" href="#request-transaction" id="ref-for-request-transaction-2">transaction</a> of an <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-5">open request</a> is null
unless an <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-7">upgradeneeded</a></code> event has been fired.</p>
    <p>An <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-6">open request</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#get-the-parent">get the parent</a> algorithm returns null.</p>
    <p><a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-7">Open requests</a> are processed in a <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-connection-queue">connection queue</dfn>.
The queue contains all <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-8">open requests</a> associated with an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a> and a <a data-link-type="dfn" href="#database-name" id="ref-for-database-name-1">name</a>. Requests added to the <a data-link-type="dfn" href="#request-connection-queue" id="ref-for-request-connection-queue-1">connection queue</a> processed in order and each request must run
to completion before the next request is processed. An open request
may be blocked on other <a data-link-type="dfn" href="#connection" id="ref-for-connection-21">connections</a>, requiring those
connections to <a data-link-type="dfn" href="#connection-closed" id="ref-for-connection-closed-1">close</a> before the request can complete and allow
further requests to be processed.</p>
    <aside class="note" role="note"> A <a data-link-type="dfn" href="#request-connection-queue" id="ref-for-request-connection-queue-2">connection queue</a> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue">task queue</a> associated with
  an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop">event loop</a>, as the requests are processed outside any
  specific <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#browsing-context">browsing context</a>. The delivery of events to
  completed <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-9">open request</a> still goes through a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue">task queue</a> associated with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop">event loop</a> of the context where the
  request was made. </aside>
    <h3 class="heading settled" data-level="2.9" id="range-construct"><span class="secno">2.9. </span><span class="content">Key Range</span><a class="self-link" href="#range-construct"></a></h3>
    <p>Records can be retrieved from <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-31">object stores</a> and <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-12">indexes</a> using either <a data-link-type="dfn" href="#key" id="ref-for-key-25">keys</a> or <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-1">key ranges</a>. A <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-key-range">key range</dfn> is a
continuous interval over some data type used for keys.</p>
    <p>A <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-2">key range</a> has an associated <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-lower-bound">lower bound</dfn> (null or a <a data-link-type="dfn" href="#key" id="ref-for-key-26">key</a>).</p>
    <p>A <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-3">key range</a> has an associated <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-upper-bound">upper bound</dfn> (null or a <a data-link-type="dfn" href="#key" id="ref-for-key-27">key</a>).</p>
    <p>A <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-4">key range</a> has an associated <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-lower-open-flag">lower open flag</dfn>.
Unless otherwise stated it is unset.</p>
    <p>A <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-5">key range</a> has an associated <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-upper-open-flag">upper open flag</dfn>.
Unless otherwise stated it is unset.</p>
    <p>A <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-6">key range</a> may have a <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-1">lower bound</a> <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-1">equal to</a> its <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-1">upper bound</a>. A <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-7">key range</a> must not have a <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-2">lower
bound</a> <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-1">greater than</a> its <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-2">upper bound</a>.</p>
    <p>A <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-8">key range</a> <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-containing-only">containing only</dfn> <var>key</var> has both <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-3">lower bound</a> and <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-3">upper bound</a> equal to <var>key</var>.</p>
    <p>A <var>key</var> is <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-lt="in" data-noexport="" id="request-in">in a key range</dfn> if both of the following
conditions are fulfilled:</p>
    <ul>
     <li data-md="">
      <p>The <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-4">lower bound</a> is null, or it is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-1">less than</a> <var>key</var>, or it is both <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-2">equal to</a> <var>key</var> and
the <a data-link-type="dfn" href="#request-lower-open-flag" id="ref-for-request-lower-open-flag-1">lower open flag</a> is unset.</p>
     <li data-md="">
      <p>The <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-4">upper bound</a> is null, or it is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-2">greater than</a> <var>key</var>, or it is both <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-3">equal to</a> <var>key</var> and
the <a data-link-type="dfn" href="#request-upper-open-flag" id="ref-for-request-upper-open-flag-1">upper open flag</a> is unset.</p>
    </ul>
    <aside class="note" role="note">
     <ul>
      <li data-md="">
       <p>If the <a data-link-type="dfn" href="#request-lower-open-flag" id="ref-for-request-lower-open-flag-2">lower open flag</a> of a <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-9">key range</a> is unset, the <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-5">lower bound</a> <a data-link-type="dfn" href="#key" id="ref-for-key-28">key</a> of the <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-10">key range</a> is included
in the range itself.</p>
      <li data-md="">
       <p>If the <a data-link-type="dfn" href="#request-lower-open-flag" id="ref-for-request-lower-open-flag-3">lower open flag</a> of a <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-11">key range</a> is set, the <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-6">lower bound</a> <a data-link-type="dfn" href="#key" id="ref-for-key-29">key</a> of the <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-12">key range</a> is excluded
from the range itself.</p>
      <li data-md="">
       <p>If the <a data-link-type="dfn" href="#request-upper-open-flag" id="ref-for-request-upper-open-flag-2">upper open flag</a> of a <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-13">key range</a> is unset, the <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-5">upper bound</a> <a data-link-type="dfn" href="#key" id="ref-for-key-30">key</a> of the <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-14">key range</a> is included
in the range itself.</p>
      <li data-md="">
       <p>If the <a data-link-type="dfn" href="#request-upper-open-flag" id="ref-for-request-upper-open-flag-3">upper open flag</a> of a <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-15">key range</a> is set, the <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-6">upper bound</a> <a data-link-type="dfn" href="#key" id="ref-for-key-31">key</a> of the <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-16">key range</a> is excluded
from the range itself.</p>
     </ul>
    </aside>
    <p>An <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-unbounded-key-range">unbounded key range</dfn> is a <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-17">key range</a> that has both <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-7">lower bound</a> and <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-7">upper bound</a> equal to null. All <a data-link-type="dfn" href="#key" id="ref-for-key-32">keys</a> are <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-1">in</a> an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-1">unbounded key
range</a>.</p>
    <p>The steps to <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-convert-a-value-to-a-key-range">convert a value to a key range</dfn> with <var>value</var> and optional <var>null disallowed flag</var> are as
follows:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>value</var> is a <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-18">key range</a>, return <var>value</var>.</p>
      <li data-md="">
       <p>If <var>value</var> is undefined or is null, then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-1">DataError</a></code> if <var>null disallowed flag</var> is set, or return an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-2">unbounded key range</a> otherwise.</p>
      <li data-md="">
       <p>Let <var>key</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-2">convert
a value to a key</a> with <var>value</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>key</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-2">DataError</a></code>.</p>
      <li data-md="">
       <p>Return a <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-19">key range</a> <a data-link-type="dfn" href="#request-containing-only" id="ref-for-request-containing-only-1">containing only</a> <var>key</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="2.10" id="cursor-construct"><span class="secno">2.10. </span><span class="content">Cursor</span><a class="self-link" href="#cursor-construct"></a></h3>
    <p>A <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-cursor">cursor</dfn> is used to iterate over a range of records in an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-13">index</a> or an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-32">object store</a> in a specific direction.</p>
    <div>
     <p>A <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-2">cursor</a> has a <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-transaction">transaction</dfn>, the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-27">transaction</a> that was <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-5">active</a> when the cursor was created.</p>
     <p>A <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-3">cursor</a> has a <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-range">range</dfn> of records in either an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-14">index</a> or an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-33">object store</a>.</p>
     <p>A <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-4">cursor</a> has a <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-source">source</dfn> that indicates which <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-15">index</a> or an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-34">object store</a> is associated with the records over which
the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-5">cursor</a> is iterating.</p>
     <p>A <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-6">cursor</a> has a <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-direction">direction</dfn> that determines whether it
moves in monotonically increasing or decreasing order of the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-16">record</a> keys when iterated, and if it skips duplicated values
when iterating indexes. The direction of a cursor also determines if
the cursor initial position is at the start of its <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-1">source</a> or at its end. A cursor’s <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-1">direction</a> is one of the following:</p>
     <dl>
      <dt><code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-next" id="ref-for-dom-idbcursordirection-next-1">"next"</a></code>
      <dd> This direction causes the cursor to be opened at the start of the <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-2">source</a>. When iterated, the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-7">cursor</a> should yield all
    records, including duplicates, in monotonically increasing order
    of keys. 
      <dt><code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-nextunique" id="ref-for-dom-idbcursordirection-nextunique-1">"nextunique"</a></code>
      <dd> This direction causes the cursor to be opened at the start of the <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-3">source</a>. When iterated, the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-8">cursor</a> should not yield
    records with the same key, but otherwise yield all records, in
    monotonically increasing order of keys. For every key with
    duplicate values, only the first record is yielded. When the <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-4">source</a> is an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-35">object store</a> or an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-16">index</a> with
    the <a data-link-type="dfn" href="#index-unique-flag" id="ref-for-index-unique-flag-1">unique flag</a> set, this direction has exactly the same
    behavior as <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-next" id="ref-for-dom-idbcursordirection-next-2">"next"</a></code>. 
      <dt><code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prev" id="ref-for-dom-idbcursordirection-prev-1">"prev"</a></code>
      <dd> This direction causes the cursor to be opened at the end of the <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-5">source</a>. When iterated, the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-9">cursor</a> should yield all
    records, including duplicates, in monotonically decreasing order
    of keys. 
      <dt><code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prevunique" id="ref-for-dom-idbcursordirection-prevunique-1">"prevunique"</a></code>
      <dd> This direction causes the cursor to be opened at the end of the <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-6">source</a>. When iterated, the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-10">cursor</a> should not
    yield records with the same key, but otherwise yield all records,
    in monotonically decreasing order of keys. For every key with
    duplicate values, only the first record is yielded. When the <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-7">source</a> is an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-36">object store</a> or an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-17">index</a> with the <a data-link-type="dfn" href="#index-unique-flag" id="ref-for-index-unique-flag-2">unique flag</a> set, this direction
    has exactly the same behavior as <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prev" id="ref-for-dom-idbcursordirection-prev-2">"prev"</a></code>. 
     </dl>
     <p>A <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-11">cursor</a> has a <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-position">position</dfn> within its range. It is
possible for the list of records which the cursor is iterating over to
change before the full <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-1">range</a> of the cursor has been iterated.
In order to handle this, cursors maintain their <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-1">position</a> not as
an index, but rather as a <a data-link-type="dfn" href="#key" id="ref-for-key-33">key</a> of the previously returned
record. For a forward iterating cursor, the next time the cursor is
asked to iterate to the next record it returns the record with the
lowest <a data-link-type="dfn" href="#key" id="ref-for-key-34">key</a> <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-3">greater than</a> the one previously
returned. For a backwards iterating cursor, the situation is opposite
and it returns the record with the highest <a data-link-type="dfn" href="#key" id="ref-for-key-35">key</a> <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-2">less
than</a> the one previously returned.</p>
     <p>For cursors iterating indexes the situation is a little bit more
complicated since multiple records can have the same key and are
therefore also sorted by <a data-link-type="dfn" href="#value" id="ref-for-value-7">value</a>. When iterating indexes the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-12">cursor</a> also has an <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-object-store-position">object store position</dfn>, which
indicates the <a data-link-type="dfn" href="#value" id="ref-for-value-8">value</a> of the previously found <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-17">record</a> in
the index. Both <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-2">position</a> and the <a data-link-type="dfn" href="#cursor-object-store-position" id="ref-for-cursor-object-store-position-1">object store position</a> are used when finding the next appropriate record.</p>
     <p>A <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-13">cursor</a> has a <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-key">key</dfn> and a <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-value">value</dfn> which
represent the <a data-link-type="dfn" href="#key" id="ref-for-key-36">key</a> and the <a data-link-type="dfn" href="#value" id="ref-for-value-9">value</a> of the last iterated <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-18">record</a>.</p>
     <p>A <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-14">cursor</a> has a <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-got-value-flag">got value flag</dfn>. When this flag unset,
the cursor is either in the process of loading the next value or it
has reached the end of its <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-2">range</a>. When it is set, it indicates
that the cursor is currently holding a value and that it is ready to
iterate to the next one.</p>
     <p>If the <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-8">source</a> of a cursor is an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-37">object store</a>, the <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-effective-object-store">effective object store</dfn> of the cursor is that object store
and the <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-effective-key">effective key</dfn> of the cursor is the cursor’s <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-3">position</a>. If the <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-9">source</a> of a cursor is an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-18">index</a>,
the <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-1">effective object store</a> of the cursor is that index’s <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-6">referenced</a> object store and the <a data-link-type="dfn" href="#cursor-effective-key" id="ref-for-cursor-effective-key-1">effective key</a> is the cursor’s <a data-link-type="dfn" href="#cursor-object-store-position" id="ref-for-cursor-object-store-position-2">object store position</a>.</p>
     <p>A <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-15">cursor</a> also has a <dfn class="dfn-paneled" data-dfn-for="cursor" data-dfn-type="dfn" data-noexport="" id="cursor-key-only-flag">key only flag</dfn>, that indicates
whether the cursor’s <a data-link-type="dfn" href="#cursor-value" id="ref-for-cursor-value-1">value</a> is exposed via the API. Unless
stated otherwise it is unset.</p>
    </div>
    <h3 class="heading settled" data-level="2.11" id="key-generator-construct"><span class="secno">2.11. </span><span class="content">Key Generators</span><a class="self-link" href="#key-generator-construct"></a></h3>
    <p>When a <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-38">object store</a> is created it can be specified to use a <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-key-generator">key generator</dfn>. A <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-3">key generator</a> keeps an internal <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-current-number">current number</dfn>. The <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-1">current number</a> is always a positive
integer. Whenever the key generator is used to generate a new <a data-link-type="dfn" href="#key" id="ref-for-key-37">key</a>, the generator’s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-2">current number</a> is returned and <strong>then</strong> incremented to prepare for the next time a new <a data-link-type="dfn" href="#key" id="ref-for-key-38">key</a> is needed. Implementations must use the following rules for
generating numbers when a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-4">key generator</a> is used.</p>
    <ul>
     <li data-md="">
      <p>Every object store that uses key generators use a separate
generator. I.e. interacting with one object store never affects
the key generator of any other object store.</p>
     <li data-md="">
      <p>The <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-3">current number</a> of a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-5">key generator</a> is always set to
1 when the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-39">object store</a> for that key generator is first
created.</p>
     <li data-md="">
      <p>When a key generator is used to generate a new <a data-link-type="dfn" href="#key" id="ref-for-key-39">key</a> for
a <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-40">object store</a>, the key generator’s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-4">current
number</a> is used as the new key value and then the key
generator’s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-5">current number</a> is increased by 1.</p>
     <li data-md="">
      <p>When a <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-19">record</a> is stored and a <a data-link-type="dfn" href="#key" id="ref-for-key-40">key</a> is specified
in the call to store the record, if <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-4">type</a> of the key
is <i>number</i> and the <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-4">value</a> is greater than or
equal to the key generator’s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-6">current number</a>, then the key
generator’s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-7">current number</a> is set to the smallest integer
number <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-4">greater than</a> the explicit key. A key can be
specified both for object stores which use <a data-link-type="dfn" href="#object-store-in-line-keys" id="ref-for-object-store-in-line-keys-1">in-line keys</a>, by
setting the property on the stored value which the object store’s <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-2">key path</a> points to, and for object stores
which use <a data-link-type="dfn" href="#object-store-out-of-line-keys" id="ref-for-object-store-out-of-line-keys-1">out-of-line keys</a>, by passing a key argument to
the call to store the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-20">record</a>.</p>
      <aside class="note" role="note"> Only specified keys of <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-5">type</a> <i>number</i> may affect the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-8">current number</a> of the key generator. Keys of <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-6">type</a> <i>date</i>, <i>array</i> (regardless of the other keys they
  contain), <i>binary</i>, or <i>string</i> (regardless of whether
  they could be parsed as numbers) have no effect on the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-9">current
  number</a> of the key generator. Keys of <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-7">type</a> <i>number</i> with <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-5">value</a> less than 1 do not affect the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-10">current number</a> since they are always lower than the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-11">current number</a>. </aside>
     <li data-md="">
      <p>Modifying a key generator’s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-12">current number</a> is considered part
of a database operation. This means that if the operation fails
and the operation is reverted, the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-13">current number</a> is
reverted to the value it had before the operation started. This
applies both to modifications that happen due to the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-14">current
number</a> getting increased by 1 when the key generator is used,
and to modifications that happen due to a <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-21">record</a> being
stored with a key value specified in the call to store the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-22">record</a>.</p>
     <li data-md="">
      <p>Likewise, if a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-28">transaction</a> is aborted, the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-15">current
number</a> of the key generator for each <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-41">object store</a> in
the transaction’s <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-11">scope</a> is reverted to the value it had
before the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-29">transaction</a> was started.</p>
     <li data-md="">
      <p>When the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-16">current number</a> of a key generator reaches above the
value 2<sup>53</sup> (9007199254740992) any attempts to use the
key generator to generate a new <a data-link-type="dfn" href="#key" id="ref-for-key-41">key</a> will result in a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-1">ConstraintError</a></code>. It is still possible to insert <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-23">records</a> into the object store by specifying an explicit
key, however the only way to use a key generator again for the
object store is to delete the object store and create a new one.</p>
      <aside class="note" role="note"> As long as key generators are used in a normal fashion this will
  not be a problem. If you generate a new key 1000 times per
  second day and night, you won’t run into this limit for over
  285000 years. </aside>
     <li data-md="">
      <p>The <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-17">current number</a> for a key generator never decreases, other
than as a result of database operations being reverted. Deleting a <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-24">record</a> from an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-42">object store</a> never affects the
object store’s key generator. Even clearing all records from an
object store, for example using the <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-clear" id="ref-for-dom-idbobjectstore-clear-1">clear()</a></code> method, does not
affect the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-18">current number</a> of the object store’s key
generator.</p>
    </ul>
    <p>A practical result of this is that the first key generated for an
object store is always 1 (unless a higher numeric key is inserted
first) and the key generated for an object store is always a positive
integer higher than the highest numeric key in the store. The same key
is never generated twice for the same object store unless a
transaction is rolled back.</p>
    <aside class="example" id="example-dcddf6da">
     <a class="self-link" href="#example-dcddf6da"></a> 
     <p>Each object store gets its own key generator:</p>
<pre class="lang-javascript highlight"><span></span><span class="nx">store1</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store1"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">store1</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span> <span class="c1">// Will get key 1</span>
<span class="nx">store2</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store2"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">store2</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span> <span class="c1">// Will get key 1</span>
<span class="nx">store1</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"b"</span><span class="p">);</span> <span class="c1">// Will get key 2</span>
<span class="nx">store2</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"b"</span><span class="p">);</span> <span class="c1">// Will get key 2</span>
</pre>
     <p>If an insertion fails due to constraint violations or IO error, the
key generator is not updated.</p>
<pre class="lang-javascript highlight"><span></span><span class="nx">transaction</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span> <span class="p">};</span>
<span class="nx">store</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store1"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">index</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"index1"</span><span class="p">,</span> <span class="s2">"ix"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span> <span class="nx">ix</span><span class="o">:</span> <span class="s2">"a"</span><span class="p">});</span> <span class="c1">// Will get key 1</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span> <span class="nx">ix</span><span class="o">:</span> <span class="s2">"a"</span><span class="p">});</span> <span class="c1">// Will fail</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span> <span class="nx">ix</span><span class="o">:</span> <span class="s2">"b"</span><span class="p">});</span> <span class="c1">// Will get key 2</span>
</pre>
     <p>Removing items from an objectStore never affects the key generator.
Including when <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-clear" id="ref-for-dom-idbobjectstore-clear-2">clear()</a></code> is called.</p>
<pre class="lang-javascript highlight"><span></span><span class="nx">store</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store1"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span> <span class="c1">// Will get key 1</span>
<span class="nx">store</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"b"</span><span class="p">);</span> <span class="c1">// Will get key 2</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"c"</span><span class="p">);</span> <span class="c1">// Will get key 3</span>
<span class="nx">store</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">IDBKeyRange</span><span class="p">.</span><span class="nx">lowerBound</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"d"</span><span class="p">);</span> <span class="c1">// Will get key 4</span>
</pre>
     <p>Inserting an item with an explicit key affects the key generator if,
and only if, the key is numeric and higher than the last generated
key.</p>
<pre class="lang-javascript highlight"><span></span><span class="nx">store</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store1"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span> <span class="c1">// Will get key 1</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"b"</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// Will use key 3</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"c"</span><span class="p">);</span> <span class="c1">// Will get key 4</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"d"</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// Will use key -10</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"e"</span><span class="p">);</span> <span class="c1">// Will get key 5</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"f"</span><span class="p">,</span> <span class="mf">6.00001</span><span class="p">);</span> <span class="c1">// Will use key 6.0001</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"g"</span><span class="p">);</span> <span class="c1">// Will get key 7</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"f"</span><span class="p">,</span> <span class="mf">8.9999</span><span class="p">);</span> <span class="c1">// Will use key 8.9999</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"g"</span><span class="p">);</span> <span class="c1">// Will get key 9</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"h"</span><span class="p">,</span> <span class="s2">"foo"</span><span class="p">);</span> <span class="c1">// Will use key "foo"</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"i"</span><span class="p">);</span> <span class="c1">// Will get key 10</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"j"</span><span class="p">,</span> <span class="p">[</span><span class="mi">1000</span><span class="p">]);</span> <span class="c1">// Will use key [1000]</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"k"</span><span class="p">);</span> <span class="c1">// Will get key 11</span>
<span class="c1">// All of these would behave the same if the objectStore used a</span>
<span class="c1">// keyPath and the explicit key was passed inline in the object</span>
</pre>
     <p>Aborting a transaction rolls back any increases to the key generator
which happened during the transaction. This is to make all rollbacks
consistent since rollbacks that happen due to crash never has a chance
to commit the increased key generator value.</p>
<pre class="lang-javascript highlight"><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">trans1</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">([</span><span class="s2">"store"</span><span class="p">],</span> <span class="s2">"readwrite"</span><span class="p">);</span>
<span class="nx">store_t1</span> <span class="o">=</span> <span class="nx">trans1</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">"store"</span><span class="p">);</span>
<span class="nx">store_t1</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span> <span class="c1">// Will get key 1</span>
<span class="nx">store_t1</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"b"</span><span class="p">);</span> <span class="c1">// Will get key 2</span>
<span class="nx">trans1</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
<span class="nx">trans2</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">([</span><span class="s2">"store"</span><span class="p">],</span> <span class="s2">"readwrite"</span><span class="p">);</span>
<span class="nx">store_t2</span> <span class="o">=</span> <span class="nx">trans2</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">"store"</span><span class="p">);</span>
<span class="nx">store_t2</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"c"</span><span class="p">);</span> <span class="c1">// Will get key 1</span>
<span class="nx">store_t2</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"d"</span><span class="p">);</span> <span class="c1">// Will get key 2</span>
</pre>
    </aside>
    <aside class="example" id="example-bfe51756">
     <a class="self-link" href="#example-bfe51756"></a> 
     <p>The following examples illustrate the different behaviors when trying
to use in-line <a data-link-type="dfn" href="#key" id="ref-for-key-42">keys</a> and <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-6">key generators</a> to save an object
to an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-43">object store</a>.</p>
     <p>If the following conditions are true:</p>
     <ul>
      <li data-md="">
       <p>The <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-44">object store</a> has a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-7">key generator</a>.</p>
      <li data-md="">
       <p>There is no in-line value for the <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-3">key path</a> property.</p>
     </ul>
     <p>Then the value provided by the <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-8">key generator</a> is used to populate
the key value. In the example below the <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-4">key path</a> for
the object store is "<code>foo.bar</code>". The actual object has no
value for the <code>bar</code> property, <code>{ foo: {} }</code>.
When the object is saved in the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-45">object store</a> the <code>bar</code> property is assigned a value of 1 because that is the next <a data-link-type="dfn" href="#key" id="ref-for-key-43">key</a> generated by the <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-9">key generator</a>.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">keyPath</span><span class="o">:</span> <span class="s2">"foo.bar"</span><span class="p">,</span>
                                            <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="p">{}</span> <span class="p">}).</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">key</span> <span class="o">===</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">};</span>
</pre>
     <p>If the following conditions are true:</p>
     <ul>
      <li data-md="">
       <p>The <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-46">object store</a> has a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-10">key generator</a>.</p>
      <li data-md="">
       <p>There is a value for the <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-5">key path</a> property.</p>
     </ul>
     <p>Then the value associated with the <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-6">key path</a> property is used. The auto-generated <a data-link-type="dfn" href="#key" id="ref-for-key-44">key</a> is not used. In the
example below the <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-7">key path</a> for the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-47">object
store</a> is "<code>foo.bar</code>". The actual object has a value of
10 for the <code>bar</code> property, <code>{ foo: { bar: 10}
}</code>. When the object is saved in the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-48">object store</a> the <code>bar</code> property keeps its value of 10, because that is the
key value.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">keyPath</span><span class="o">:</span> <span class="s2">"foo.bar"</span><span class="p">,</span>
                                            <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span> <span class="nx">bar</span><span class="o">:</span> <span class="mi">10</span> <span class="p">}</span> <span class="p">}).</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">key</span> <span class="o">===</span> <span class="mi">10</span><span class="p">);</span>
<span class="p">};</span>
</pre>
     <p>The following example illustrates the scenario when the specified
in-line <a data-link-type="dfn" href="#key" id="ref-for-key-45">key</a> is defined through a <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-8">key
path</a> but there is no property matching it. The value provided by
the <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-11">key generator</a> is then used to populate the key value and
the system is responsible for creating as many properties as it
requires to suffice the property dependencies on the hierarchy chain.
In the example below the <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-9">key path</a> for the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-49">object store</a> is "<code>foo.bar.baz</code>". The actual
object has no value for the <code>foo</code> property, <code>{ zip: {}
}</code>. When the object is saved in the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-50">object store</a> the <code>foo</code>, <code>bar</code>, and <code>baz</code> properties are created each as a child of the other until a value for <code>foo.bar.baz</code> can be assigned. The value for <code>foo.bar.baz</code> is the next key generated by the object
store.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">keyPath</span><span class="o">:</span> <span class="s2">"foo.bar.baz"</span><span class="p">,</span>
                                            <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span> <span class="nx">zip</span><span class="o">:</span> <span class="p">{}</span> <span class="p">}).</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">key</span> <span class="o">===</span> <span class="mi">1</span><span class="p">);</span>
  <span class="nx">store</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">key</span><span class="p">).</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
    <span class="c1">// value will be: { zip: {}, foo: { bar: { baz: 1 } } }</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">foo</span><span class="p">.</span><span class="nx">bar</span><span class="p">.</span><span class="nx">baz</span> <span class="o">===</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">};</span>
</pre>
     <p>Attempting to store a property on a primitive value will fail and
throw an error. In the first example below the <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-10">key
path</a> for the object store is "<code>foo</code>". The actual object
is a primitive with the value, <code>4</code>. Trying to define a
property on that primitive value fails. The same is true for arrays.
Properties are not allowed on an array. In the second example below,
the actual object is an array, <code>[10]</code>. Trying to define a
property on the array fails.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"store"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">keyPath</span><span class="o">:</span> <span class="s2">"foo"</span><span class="p">,</span> <span class="nx">autoIncrement</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>

<span class="c1">// The key generation will attempt to create and store the key path</span>
<span class="c1">// property on this primitive.</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="c1">// will throw DataError</span>

<span class="c1">// The key generation will attempt to create and store the key path</span>
<span class="c1">// property on this array.</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">put</span><span class="p">([</span><span class="mi">10</span><span class="p">]);</span> <span class="c1">// will throw DataError</span>
</pre>
    </aside>
    <h2 class="heading settled" data-level="3" id="exceptions"><span class="secno">3. </span><span class="content">Exceptions</span><a class="self-link" href="#exceptions"></a></h2>
    <p>Each of the exceptions defined in this document is a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dfn-DOMException">DOMException</a></code> with a specific type. The exception types and
properties such as code value are defined in <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a>.</p>
    <table class="props">
     <tbody>
      <tr>
       <th>Type
       <th>Description
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-aborterror"><code>AbortError</code></dfn>
       <td>A request was aborted.
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-constrainterror"><code>ConstraintError</code></dfn>
       <td> A mutation operation in the transaction failed because a
      constraint was not satisfied. 
      <tr>
       <td><dfn class="idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-datacloneerror"><code>DataCloneError</code><a class="self-link" href="#exceptiondef-request-datacloneerror"></a></dfn>
       <td> The data being stored could not be cloned by the internal
      structured cloning algorithm. 
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-dataerror"><code>DataError</code></dfn>
       <td>Data provided to an operation does not meet requirements.
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-invalidaccesserror"><code>InvalidAccessError</code></dfn>
       <td>An invalid operation was performed on an object.
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-invalidstateerror"><code>InvalidStateError</code></dfn>
       <td> An operation was called on an object on which it is not allowed
      or at a time when it is not allowed, or if a request is made on
      a source object that has been deleted or removed. 
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-notfounderror"><code>NotFoundError</code></dfn>
       <td> The operation failed because the requested database object could
      not be found. 
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-quotaexceedederror"><code>QuotaExceededError</code></dfn>
       <td> The operation failed because there was not enough remaining
      storage space, or the storage quota was reached and the user
      declined to give more space to the database. 
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-syntaxerror"><code>SyntaxError</code></dfn>
       <td>The keyPath argument contains an invalid key path.
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-readonlyerror"><code>ReadOnlyError</code></dfn>
       <td>The mutating operation was attempted in a read-only transaction.
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-transactioninactiveerror"><code>TransactionInactiveError</code></dfn>
       <td> A request was placed against a transaction which is currently
      not active, or which is finished. 
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-unknownerror"><code>UnknownError</code></dfn>
       <td> The operation failed for reasons unrelated to the database
      itself and not covered by any other errors. 
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="exception" data-export="" id="exceptiondef-request-versionerror"><code>VersionError</code></dfn>
       <td> An attempt was made to open a database using a lower version
      than the existing version. 
    </table>
    <aside class="note" role="note"> Given that multiple Indexed DB operations can throw the same type of
  error, and that a even single operation can throw the same type of
  error for multiple reasons, implementations are encouraged to
  provide more specific messages to enable developers to identify the
  cause of errors. </aside>
    <h2 class="heading settled" data-level="4" id="async-api"><span class="secno">4. </span><span class="content">API</span><a class="self-link" href="#async-api"></a></h2>
    <p>The API methods return without blocking the calling thread. All
asynchronous operations immediately return an <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-1">IDBRequest</a></code> instance. This object does not initially contain any information about
the result of the operation. Once information becomes available, an
event is fired on the request and the information becomes available
through the properties of the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-2">IDBRequest</a></code> instance.</p>
    <p>The <span>task source</span> for these tasks is the <dfn data-dfn-for="request" data-dfn-type="dfn" data-lt="database access task source" data-noexport="" id="request-database-access-task-source">database
access task source<a class="self-link" href="#request-database-access-task-source"></a></dfn>.</p>
    <h3 class="heading settled" data-level="4.1" id="request-api"><span class="secno">4.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-3">IDBRequest</a></code> interface</span><a class="self-link" href="#request-api"></a></h3>
    <p>The <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-4">IDBRequest</a></code> interface provides the means to access results of
asynchronous requests to <a data-link-type="dfn" href="#database" id="ref-for-database-25">databases</a> and <a data-link-type="dfn" href="#database" id="ref-for-database-26">database</a> objects using <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">event handler IDL attributes</a> <a data-link-type="biblio" href="#biblio-html">[HTML]</a>.</p>
    <p>Every method for making asynchronous requests returns an <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-5">IDBRequest</a></code> object that communicates back to the requesting
application through events. This design means that any number of
requests can be active on any <a data-link-type="dfn" href="#database" id="ref-for-database-27">database</a> at a time.</p>
    <aside class="example" id="example-1f3203ec">
     <a class="self-link" href="#example-1f3203ec"></a> 
     <p>In the following example, we open a <a data-link-type="dfn" href="#database" id="ref-for-database-28">database</a> asynchronously.
Various event handlers are registered for responding to various
situations.</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">indexedDB</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'AddressBook'</span><span class="p">,</span> <span class="mi">15</span><span class="p">);</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{...};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{...};</span>
</pre>
    </aside>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbrequest">IDBRequest</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>                                        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbrequest-result" id="ref-for-dom-idbrequest-result-1">result</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#dfn-DOMException">DOMException</a>?                              <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMException?" href="#dom-idbrequest-error" id="ref-for-dom-idbrequest-error-1">error</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> (<a class="n" data-link-type="idl-name" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-1">IDBObjectStore</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#request-idbindex" id="ref-for-request-idbindex-1">IDBIndex</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#request-idbcursor" id="ref-for-request-idbcursor-1">IDBCursor</a>)? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="(IDBObjectStore or IDBIndex or IDBCursor)?" href="#dom-idbrequest-source" id="ref-for-dom-idbrequest-source-1">source</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbtransaction" id="ref-for-request-idbtransaction-1">IDBTransaction</a>?                            <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBTransaction?" href="#dom-idbrequest-transaction" id="ref-for-dom-idbrequest-transaction-1">transaction</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbrequestreadystate" id="ref-for-enumdef-request-idbrequestreadystate-1">IDBRequestReadyState</a>                       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBRequestReadyState" href="#dom-idbrequest-readystate" id="ref-for-dom-idbrequest-readystate-1">readyState</a>;

  // Event handlers:
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbrequest-onsuccess" id="ref-for-dom-idbrequest-onsuccess-1">onsuccess</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbrequest-onerror" id="ref-for-dom-idbrequest-onerror-1">onerror</a>;
};

<span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="enum" data-export="" id="enumdef-request-idbrequestreadystate">IDBRequestReadyState</dfn> {
  <dfn class="s dfn-paneled idl-code" data-dfn-for="IDBRequestReadyState" data-dfn-type="enum-value" data-export="" data-lt="&quot;pending&quot;|pending" id="dom-idbrequestreadystate-pending">"pending"</dfn>,
  <dfn class="s dfn-paneled idl-code" data-dfn-for="IDBRequestReadyState" data-dfn-type="enum-value" data-export="" data-lt="&quot;done&quot;|done" id="dom-idbrequestreadystate-done">"done"</dfn>
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBRequest" data-dfn-type="attribute" data-export="" id="dom-idbrequest-result">result</dfn> attribute’s getter must <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-1">InvalidStateError</a></code> if the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-6">done flag</a> is
unset. Otherwise, the attribute’s getter must return the <a data-link-type="dfn" href="#request-result" id="ref-for-request-result-3">result</a> of the request, or undefined if the
request resulted in an error.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBRequest" data-dfn-type="attribute" data-export="" id="dom-idbrequest-error">error</dfn> attribute’s getter must <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-2">InvalidStateError</a></code> if the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-7">done flag</a> is unset.
Otherwise, the attribute’s getter must return the <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-2">error</a> of
the request, or null if no error occurred.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBRequest" data-dfn-type="attribute" data-export="" id="dom-idbrequest-source">source</dfn> attribute’s getter must
return the <a data-link-type="dfn" href="#request-source" id="ref-for-request-source-2">source</a> of the <a data-link-type="dfn" href="#request" id="ref-for-request-17">request</a>, or null if no <a data-link-type="dfn" href="#request-source" id="ref-for-request-source-3">source</a> is set.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBRequest" data-dfn-type="attribute" data-export="" id="dom-idbrequest-transaction">transaction</dfn> attribute’s getter
must return the <a data-link-type="dfn" href="#request-transaction" id="ref-for-request-transaction-3">transaction</a> of the <a data-link-type="dfn" href="#request" id="ref-for-request-18">request</a>. This
property can be null for certain requests, such as for <a data-link-type="dfn" href="#request" id="ref-for-request-19">request</a> returned from <code class="idl"><a data-link-type="idl" href="#dom-idbfactory-open" id="ref-for-dom-idbfactory-open-1">open()</a></code>.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBRequest" data-dfn-type="attribute" data-export="" id="dom-idbrequest-readystate">readyState</dfn> attribute’s getter
must return <code class="idl"><a data-link-type="idl" href="#dom-idbrequestreadystate-pending" id="ref-for-dom-idbrequestreadystate-pending-1">"pending"</a></code> if the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-8">done flag</a> is unset, and <code class="idl"><a data-link-type="idl" href="#dom-idbrequestreadystate-done" id="ref-for-dom-idbrequestreadystate-done-1">"done"</a></code> otherwise.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBRequest" data-dfn-type="attribute" data-export="" id="dom-idbrequest-onsuccess">onsuccess</dfn> attribute is the
event handler for the <code>success</code> event.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBRequest" data-dfn-type="attribute" data-export="" id="dom-idbrequest-onerror">onerror</dfn> attribute is the event
handler for the <code>error</code> event.</p>
    <p>Methods on <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-1">IDBDatabase</a></code> that return a <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-10">open request</a> use an
extended interface to allow listening to the <code><a data-link-type="dfn" href="#request-blocked" id="ref-for-request-blocked-1">blocked</a></code> event and <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-8">upgradeneeded</a></code> event.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbopendbrequest">IDBOpenDBRequest</dfn> : <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-6">IDBRequest</a> {
  // Event handlers:
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbopendbrequest-onblocked" id="ref-for-dom-idbopendbrequest-onblocked-1">onblocked</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbopendbrequest-onupgradeneeded" id="ref-for-dom-idbopendbrequest-onupgradeneeded-1">onupgradeneeded</a>;
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBOpenDBRequest" data-dfn-type="attribute" data-export="" id="dom-idbopendbrequest-onblocked">onblocked</dfn> attribute is
the event handler for the <code><a data-link-type="dfn" href="#request-blocked" id="ref-for-request-blocked-2">blocked</a></code> event.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBOpenDBRequest" data-dfn-type="attribute" data-export="" id="dom-idbopendbrequest-onupgradeneeded">onupgradeneeded</dfn> attribute is the event handler for the <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-9">upgradeneeded</a></code> event.</p>
    <h3 class="heading settled" data-level="4.2" id="events"><span class="secno">4.2. </span><span class="content">Event interfaces</span><a class="self-link" href="#events"></a></h3>
    <p>This specification fires events with the following custom interfaces:</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>),
 <dfn class="nv idl-code" data-dfn-for="IDBVersionChangeEvent" data-dfn-type="constructor" data-export="" data-lt="IDBVersionChangeEvent(type, eventInitDict)|IDBVersionChangeEvent(type)" id="dom-idbversionchangeevent-idbversionchangeevent">Constructor<a class="self-link" href="#dom-idbversionchangeevent-idbversionchangeevent"></a></dfn>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="IDBVersionChangeEvent/IDBVersionChangeEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-idbversionchangeevent-idbversionchangeevent-type-eventinitdict-type">type<a class="self-link" href="#dom-idbversionchangeevent-idbversionchangeevent-type-eventinitdict-type"></a></dfn>, <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-request-idbversionchangeeventinit" id="ref-for-dictdef-request-idbversionchangeeventinit-1">IDBVersionChangeEventInit</a> <dfn class="nv idl-code" data-dfn-for="IDBVersionChangeEvent/IDBVersionChangeEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-idbversionchangeevent-idbversionchangeevent-type-eventinitdict-eventinitdict">eventInitDict<a class="self-link" href="#dom-idbversionchangeevent-idbversionchangeevent-type-eventinitdict-eventinitdict"></a></dfn>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbversionchangeevent">IDBVersionChangeEvent</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span>  <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long long" href="#dom-idbversionchangeevent-oldversion" id="ref-for-dom-idbversionchangeevent-oldversion-1">oldVersion</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long long?" href="#dom-idbversionchangeevent-newversion" id="ref-for-dom-idbversionchangeevent-newversion-1">newVersion</a>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="dictionary" data-export="" id="dictdef-request-idbversionchangeeventinit">IDBVersionChangeEventInit</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span>  <dfn class="nv idl-code" data-default="0" data-dfn-for="IDBVersionChangeEventInit" data-dfn-type="dict-member" data-export="" data-type="unsigned long long  " id="dom-idbversionchangeeventinit-oldversion">oldVersion<a class="self-link" href="#dom-idbversionchangeeventinit-oldversion"></a></dfn> = 0;
  <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span>? <dfn class="nv idl-code" data-default="null" data-dfn-for="IDBVersionChangeEventInit" data-dfn-type="dict-member" data-export="" data-type="unsigned long long? " id="dom-idbversionchangeeventinit-newversion">newVersion<a class="self-link" href="#dom-idbversionchangeeventinit-newversion"></a></dfn> = <span class="kt">null</span>;
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBVersionChangeEvent" data-dfn-type="attribute" data-export="" id="dom-idbversionchangeevent-oldversion">oldVersion</dfn> attribute getter returns the previous version of the database.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBVersionChangeEvent" data-dfn-type="attribute" data-export="" id="dom-idbversionchangeevent-newversion">newVersion</dfn> attribute getter returns the new version of the database, or null if
the database is being deleted. See the <a data-link-type="dfn" href="#request-steps-for-running-an-upgrade-transaction" id="ref-for-request-steps-for-running-an-upgrade-transaction-2">steps for running an upgrade
transaction</a>.</p>
    <p>Events are constructed as defined in <a href="https://www.w3.org/TR/domcore/#constructing-events">Constructing
events</a>, in <a data-link-type="biblio" href="#biblio-dom">[DOM]</a>.</p>
    <p>To <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-fire-a-version-change-event">fire a version change event</dfn> named <var>e</var> at <var>target</var> given <var>oldVersion</var> and <var>newVersion</var>, dispatch an event at <var>target</var>. The
event must use the <code class="idl"><a data-link-type="idl" href="#request-idbversionchangeevent" id="ref-for-request-idbversionchangeevent-1">IDBVersionChangeEvent</a></code> interface with its <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> set to <var>e</var>, its <code class="idl"><a data-link-type="idl" href="#dom-idbversionchangeevent-oldversion" id="ref-for-dom-idbversionchangeevent-oldversion-2">oldVersion</a></code> attribute set to <var>oldVersion</var>, and its <code class="idl"><a data-link-type="idl" href="#dom-idbversionchangeevent-newversion" id="ref-for-dom-idbversionchangeevent-newversion-2">newVersion</a></code> attribute set to <var>newVersion</var>.
This event must not bubble or be cancelable.</p>
    <h3 class="heading settled" data-level="4.3" id="factory-interface"><span class="secno">4.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#request-idbfactory" id="ref-for-request-idbfactory-1">IDBFactory</a></code> interface</span><a class="self-link" href="#factory-interface"></a></h3>
    <p><a data-link-type="dfn" href="#database" id="ref-for-database-29">Database</a> objects are accessed through methods on the <code class="idl"><a data-link-type="idl" href="#request-idbfactory" id="ref-for-request-idbfactory-2">IDBFactory</a></code> interface. A single object implementing this
interface is present in the global scope of environments that support
Indexed DB operations.</p>
<pre class="idl highlight def"><span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope">WindowOrWorkerGlobalScope</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbfactory" id="ref-for-request-idbfactory-3">IDBFactory</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBFactory" href="#dom-windoworworkerglobalscope-indexeddb" id="ref-for-dom-windoworworkerglobalscope-indexeddb-1">indexedDB</a>;
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="WindowOrWorkerGlobalScope" data-dfn-type="attribute" data-export="" id="dom-windoworworkerglobalscope-indexeddb">indexedDB</dfn> attribute provides applications a mechanism for accessing capabilities
of indexed databases.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbfactory">IDBFactory</dfn> {
  <a class="n" data-link-type="idl-name" href="#request-idbopendbrequest" id="ref-for-request-idbopendbrequest-1">IDBOpenDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbfactory-open" id="ref-for-dom-idbfactory-open-2">open</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="IDBFactory/open(name, version), IDBFactory/open(name)" data-dfn-type="argument" data-export="" id="dom-idbfactory-open-name-version-name">name<a class="self-link" href="#dom-idbfactory-open-name-version-name"></a></dfn>,
                        [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="IDBFactory/open(name, version), IDBFactory/open(name)" data-dfn-type="argument" data-export="" id="dom-idbfactory-open-name-version-version">version<a class="self-link" href="#dom-idbfactory-open-name-version-version"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbopendbrequest" id="ref-for-request-idbopendbrequest-2">IDBOpenDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbfactory-deletedatabase" id="ref-for-dom-idbfactory-deletedatabase-1">deleteDatabase</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="IDBFactory/deleteDatabase(name)" data-dfn-type="argument" data-export="" id="dom-idbfactory-deletedatabase-name-name">name<a class="self-link" href="#dom-idbfactory-deletedatabase-name-name"></a></dfn>);

  <span class="kt">short</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbfactory-cmp" id="ref-for-dom-idbfactory-cmp-1">cmp</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBFactory/cmp(first, second)" data-dfn-type="argument" data-export="" id="dom-idbfactory-cmp-first-second-first">first<a class="self-link" href="#dom-idbfactory-cmp-first-second-first"></a></dfn>, <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBFactory/cmp(first, second)" data-dfn-type="argument" data-export="" id="dom-idbfactory-cmp-first-second-second">second<a class="self-link" href="#dom-idbfactory-cmp-first-second-second"></a></dfn>);
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBFactory" data-dfn-type="method" data-export="" data-lt="open(name, version)|open(name)" id="dom-idbfactory-open">open(<var>name</var>, <var>version</var>)</dfn> method,
when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>version</var> is 0 (zero), <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a>.</p>
      <li data-md="">
       <p>Let <var>request</var> be a new <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-11">open request</a>.</p>
      <li data-md="">
       <p>Run the following substeps in parallel:</p>
       <ol>
        <li data-md="">
         <p>Let <var>result</var> be the result of running the <a data-link-type="dfn" href="#request-steps-for-opening-a-database" id="ref-for-request-steps-for-opening-a-database-1">steps for
opening a database</a>, with the origin of the
global scope used to access this <code class="idl"><a data-link-type="idl" href="#request-idbfactory" id="ref-for-request-idbfactory-4">IDBFactory</a></code>, <var>name</var>, <var>version</var> if given and undefined
otherwise, and <var>request</var>.</p>
         <aside class="note" role="note"> If <var>version</var> is not given and a <a data-link-type="dfn" href="#database" id="ref-for-database-30">database</a> with that name already exists, a connection will be opened
  without changing the <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-6">version</a>. If <var>version</var> is not given and no <a data-link-type="dfn" href="#database" id="ref-for-database-31">database</a> with
  that name exists, a new <a data-link-type="dfn" href="#database" id="ref-for-database-32">database</a> will be created with <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-7">version</a> equal to 1. </aside>
        <li data-md="">
         <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to run these substeps:</p>
         <ol>
          <li data-md="">
           <p>If <var>result</var> is an error, set the <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-3">error</a> of <var>request</var> to <var>result</var> and dispatch an event at <var>request</var>. The event must use the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event">Event</a> interface
and set the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> attribute to
"<code>error</code>". The event does bubble but is not
cancelable.</p>
          <li data-md="">
           <p>Otherwise, set the <a data-link-type="dfn" href="#request-result" id="ref-for-request-result-4">result</a> of <var>request</var> to <var>result</var> and dispatch an event at <var>request</var>. The event
must use the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event">Event</a> interface and set the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> attribute to "<code>success</code>". The
event does not bubble and is not cancelable. If the steps
above resulted in an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-14">upgrade transaction</a> being run,
then firing the "<code>success</code>" event must be done
after the <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-15">upgrade transaction</a> completes.</p>
           <aside class="note" role="note"> The last requirement is to ensure that in case another
  version upgrade is about to happen, the success event is
  fired on the connection first so that the script gets a
  chance to register a listener for the <code>versionchange</code> event. </aside>
           <aside class="note" role="note"> The firing of "<code>success</code>" or "<code>error</code>"
  events do not follow the normal steps to <a data-link-type="dfn" href="#request-fire-a-success-event" id="ref-for-request-fire-a-success-event-1">fire a success
  event</a> or <a data-link-type="dfn" href="#request-fire-an-error-event" id="ref-for-request-fire-an-error-event-1">fire an error event</a> as there is no
  active transaction at the time when they fire. </aside>
         </ol>
       </ol>
      <li data-md="">
       <p>Return a new <code class="idl"><a data-link-type="idl" href="#request-idbopendbrequest" id="ref-for-request-idbopendbrequest-3">IDBOpenDBRequest</a></code> object for <var>request</var>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBFactory" data-dfn-type="method" data-export="" id="dom-idbfactory-deletedatabase">deleteDatabase(<var>name</var>)</dfn> method,
when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>request</var> be a new <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-12">open request</a>.</p>
      <li data-md="">
       <p>Run the following substeps in parallel:</p>
       <ol>
        <li data-md="">
         <p>Let <var>result</var> be the result of running the <a data-link-type="dfn" href="#request-steps-for-deleting-a-database" id="ref-for-request-steps-for-deleting-a-database-1">steps for
deleting a database</a>, with the origin of the
global scope used to access this <code class="idl"><a data-link-type="idl" href="#request-idbfactory" id="ref-for-request-idbfactory-5">IDBFactory</a></code>, <var>name</var>, and <var>request</var>.</p>
        <li data-md="">
         <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to run these substeps:</p>
         <ol>
          <li data-md="">
           <p>If <var>result</var> is an error set the <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-4">error</a> of <var>request</var> to <var>result</var> and dispatch an event at <var>request</var>.
The event must use the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event">Event</a> interface and set the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> attribute to "<code>error</code>". The
event does bubble but is not cancelable.</p>
          <li data-md="">
           <p>Otherwise, set the <a data-link-type="dfn" href="#request-result" id="ref-for-request-result-5">result</a> of <var>request</var> to undefined and <a data-link-type="dfn" href="#request-fire-a-version-change-event" id="ref-for-request-fire-a-version-change-event-1">fire a version change event</a> named <code>success</code> at <a data-link-type="dfn" href="#request" id="ref-for-request-20">request</a> with <var>result</var> and
null.</p>
           <aside class="note" role="note"> The firing of "<code>success</code>" or "<code>error</code>"
  events do not follow the normal steps to <a data-link-type="dfn" href="#request-fire-a-success-event" id="ref-for-request-fire-a-success-event-2">fire a success
  event</a> or <a data-link-type="dfn" href="#request-fire-an-error-event" id="ref-for-request-fire-an-error-event-2">fire an error event</a> as there is no
  active transaction at the time when they fire. </aside>
         </ol>
       </ol>
      <li data-md="">
       <p>Return a new <code class="idl"><a data-link-type="idl" href="#request-idbopendbrequest" id="ref-for-request-idbopendbrequest-4">IDBOpenDBRequest</a></code> object for <var>request</var>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBFactory" data-dfn-type="method" data-export="" id="dom-idbfactory-cmp">cmp(<var>first</var>, <var>second</var>)</dfn> method,
when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>a</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-3">convert a
value to a key</a> with <var>first</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>a</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-3">DataError</a></code>.</p>
      <li data-md="">
       <p>Let <var>b</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-4">convert a
value to a key</a> with <var>second</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>b</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-4">DataError</a></code>.</p>
      <li data-md="">
       <p>Return the results of running the steps to <a data-link-type="dfn" href="#compare-two-keys" id="ref-for-compare-two-keys-5">compare two keys</a> with <var>a</var> and <var>b</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="4.4" id="database-interface"><span class="secno">4.4. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-2">IDBDatabase</a></code> interface</span><a class="self-link" href="#database-interface"></a></h3>
    <p>The <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-3">IDBDatabase</a></code> interface represents a <a data-link-type="dfn" href="#connection" id="ref-for-connection-22">connection</a> to a <a data-link-type="dfn" href="#database" id="ref-for-database-33">database</a>.</p>
    <p>An <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-4">IDBDatabase</a></code> object must not be garbage collected if its
associated <a data-link-type="dfn" href="#connection" id="ref-for-connection-23">connection</a>'s <a data-link-type="dfn" href="#connection-close-pending-flag" id="ref-for-connection-close-pending-flag-2">close pending flag</a> is unset and it
has one or more event listeners registers whose type is one of <code>abort</code>, <code>error</code>, or <code>versionchange</code>.
If an <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-5">IDBDatabase</a></code> object is garbage collected, the associated <a data-link-type="dfn" href="#connection" id="ref-for-connection-24">connection</a> must be <a data-link-type="dfn" href="#connection-closed" id="ref-for-connection-closed-2">closed</a>.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbdatabase">IDBDatabase</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-idbdatabase-name" id="ref-for-dom-idbdatabase-name-1">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long long" href="#dom-idbdatabase-version" id="ref-for-dom-idbdatabase-version-1">version</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-domstringlist" id="ref-for-request-domstringlist-2">DOMStringList</a>      <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMStringList" href="#dom-idbdatabase-objectstorenames" id="ref-for-dom-idbdatabase-objectstorenames-1">objectStoreNames</a>;

  <a class="n" data-link-type="idl-name" href="#request-idbtransaction" id="ref-for-request-idbtransaction-2">IDBTransaction</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbdatabase-transaction" id="ref-for-dom-idbdatabase-transaction-1">transaction</a>((<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">sequence</span>&lt;<span class="kt">DOMString</span>>) <dfn class="nv idl-code" data-dfn-for="IDBDatabase/transaction(storeNames, mode), IDBDatabase/transaction(storeNames)" data-dfn-type="argument" data-export="" id="dom-idbdatabase-transaction-storenames-mode-storenames">storeNames<a class="self-link" href="#dom-idbdatabase-transaction-storenames-mode-storenames"></a></dfn>,
                             <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbtransactionmode" id="ref-for-enumdef-request-idbtransactionmode-1">IDBTransactionMode</a> <dfn class="nv idl-code" data-dfn-for="IDBDatabase/transaction(storeNames, mode), IDBDatabase/transaction(storeNames)" data-dfn-type="argument" data-export="" id="dom-idbdatabase-transaction-storenames-mode-mode">mode<a class="self-link" href="#dom-idbdatabase-transaction-storenames-mode-mode"></a></dfn> = "readonly");
  <span class="kt">void</span>           <a class="nv idl-code" data-link-type="method" href="#dom-idbdatabase-close" id="ref-for-dom-idbdatabase-close-1">close</a>();

  <a class="n" data-link-type="idl-name" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-2">IDBObjectStore</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbdatabase-createobjectstore" id="ref-for-dom-idbdatabase-createobjectstore-1">createObjectStore</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="IDBDatabase/createObjectStore(name, options), IDBDatabase/createObjectStore(name)" data-dfn-type="argument" data-export="" id="dom-idbdatabase-createobjectstore-name-options-name">name<a class="self-link" href="#dom-idbdatabase-createobjectstore-name-options-name"></a></dfn>,
                                   <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-request-idbobjectstoreparameters" id="ref-for-dictdef-request-idbobjectstoreparameters-1">IDBObjectStoreParameters</a> <dfn class="nv idl-code" data-dfn-for="IDBDatabase/createObjectStore(name, options), IDBDatabase/createObjectStore(name)" data-dfn-type="argument" data-export="" id="dom-idbdatabase-createobjectstore-name-options-options">options<a class="self-link" href="#dom-idbdatabase-createobjectstore-name-options-options"></a></dfn>);
  <span class="kt">void</span>           <a class="nv idl-code" data-link-type="method" href="#dom-idbdatabase-deleteobjectstore" id="ref-for-dom-idbdatabase-deleteobjectstore-1">deleteObjectStore</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="IDBDatabase/deleteObjectStore(name)" data-dfn-type="argument" data-export="" id="dom-idbdatabase-deleteobjectstore-name-name">name<a class="self-link" href="#dom-idbdatabase-deleteobjectstore-name-name"></a></dfn>);

  // Event handlers:
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbdatabase-onabort" id="ref-for-dom-idbdatabase-onabort-1">onabort</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbdatabase-onclose" id="ref-for-dom-idbdatabase-onclose-1">onclose</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbdatabase-onerror" id="ref-for-dom-idbdatabase-onerror-1">onerror</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbdatabase-onversionchange" id="ref-for-dom-idbdatabase-onversionchange-1">onversionchange</a>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="dictionary" data-export="" id="dictdef-request-idbobjectstoreparameters">IDBObjectStoreParameters</dfn> {
  (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">sequence</span>&lt;<span class="kt">DOMString</span>>)? <dfn class="nv dfn-paneled idl-code" data-default="null" data-dfn-for="IDBObjectStoreParameters" data-dfn-type="dict-member" data-export="" data-type="(DOMString or sequence<DOMString>)? " id="dom-idbobjectstoreparameters-keypath">keyPath</dfn> = <span class="kt">null</span>;
  <span class="kt">boolean</span>                             <dfn class="nv dfn-paneled idl-code" data-default="false" data-dfn-for="IDBObjectStoreParameters" data-dfn-type="dict-member" data-export="" data-type="boolean                             " id="dom-idbobjectstoreparameters-autoincrement">autoIncrement</dfn> = <span class="kt">false</span>;
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="attribute" data-export="" id="dom-idbdatabase-name">name</dfn> attribute’s getter must
return the <a data-link-type="dfn" href="#database-name" id="ref-for-database-name-2">name</a> of the <a data-link-type="dfn" href="#connection" id="ref-for-connection-25">connected</a> <a data-link-type="dfn" href="#database" id="ref-for-database-34">database</a>. The attribute must return this name even if the <a data-link-type="dfn" href="#connection-close-pending-flag" id="ref-for-connection-close-pending-flag-3">close pending flag</a> is set on the <a data-link-type="dfn" href="#connection" id="ref-for-connection-26">connection</a>. In
other words, the value of this attribute stays constant for the
lifetime of the <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-6">IDBDatabase</a></code> instance.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="attribute" data-export="" id="dom-idbdatabase-version">version</dfn> attribute’s getter
must return this <a data-link-type="dfn" href="#connection" id="ref-for-connection-27">connection</a>'s <a data-link-type="dfn" href="#connection-version" id="ref-for-connection-version-2">version</a>.</p>
    <aside class="note" role="note"> As long as the <a data-link-type="dfn" href="#connection" id="ref-for-connection-28">connection</a> is open, this is the same as the
  connected <a data-link-type="dfn" href="#database" id="ref-for-database-35">database</a>'s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-8">version</a>. Once the <a data-link-type="dfn" href="#connection" id="ref-for-connection-29">connection</a> has <a data-link-type="dfn" href="#connection-closed" id="ref-for-connection-closed-3">closed</a>, this attribute will not
  reflect changes made with a later <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-16">upgrade transaction</a>. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="attribute" data-export="" id="dom-idbdatabase-objectstorenames">objectStoreNames</dfn> attribute’s
getter must return a <a data-link-type="dfn" href="#sorted-list" id="ref-for-sorted-list-1">sorted list</a> of the <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-2">names</a> of
the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-51">object stores</a> in this <a data-link-type="dfn" href="#connection" id="ref-for-connection-30">connection</a>'s <a data-link-type="dfn" href="#connection-object-store-set" id="ref-for-connection-object-store-set-1">object store set</a>.</p>
    <aside class="note" role="note"> As long as the <a data-link-type="dfn" href="#connection" id="ref-for-connection-31">connection</a> is open, this is the same as the
  connected <a data-link-type="dfn" href="#database" id="ref-for-database-36">database</a>'s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-52">object store</a> <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-3">names</a>.
  Once the <a data-link-type="dfn" href="#connection" id="ref-for-connection-32">connection</a> has <a data-link-type="dfn" href="#connection-closed" id="ref-for-connection-closed-4">closed</a>, this attribute
  will not reflect changes made with a later <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-17">upgrade transaction</a>. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="method" data-export="" data-lt="createObjectStore(name, options)|createObjectStore(name)" id="dom-idbdatabase-createobjectstore">createObjectStore(<var>name</var>, <var>options</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>database</var> be the <a data-link-type="dfn" href="#database" id="ref-for-database-37">database</a> associated with this <a data-link-type="dfn" href="#connection" id="ref-for-connection-33">connection</a>.</p>
      <li data-md="">
       <p>Let <var>transaction</var> be the currently running <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-18">upgrade
transaction</a> associated with <var>database</var>, or <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-3">InvalidStateError</a></code> if none.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-6">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-2">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>keyPath</var> be <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstoreparameters-keypath" id="ref-for-dom-idbobjectstoreparameters-keypath-1">keyPath</a></code> member if it is not undefined or null, or null otherwise.</p>
      <li data-md="">
       <p>If <var>keyPath</var> is not null and is not a <a data-link-type="dfn" href="#valid-key-path" id="ref-for-valid-key-path-1">valid key
path</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-syntaxerror" id="ref-for-exceptiondef-request-syntaxerror-1">SyntaxError</a></code>.</p>
      <li data-md="">
       <p>If an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-53">object store</a> <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-4">named</a> <var>name</var> already
exists in <var>database</var> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-2">ConstraintError</a></code>.</p>
      <li data-md="">
       <p>Let <var>autoIncrement</var> be set if <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstoreparameters-autoincrement" id="ref-for-dom-idbobjectstoreparameters-autoincrement-1">autoIncrement</a></code> member is true, or
unset otherwise.</p>
      <li data-md="">
       <p>If <var>autoIncrement</var> is set and <var>keyPath</var> is an empty string or any
sequence (empty or otherwise), <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidaccesserror" id="ref-for-exceptiondef-request-invalidaccesserror-1">InvalidAccessError</a></code>.</p>
      <li data-md="">
       <p>Let <var>store</var> be a new <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-54">object store</a> in <var>database</var>. Set the created <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-55">object store</a>'s <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-5">name</a> to <var>name</var>. If <var>autoIncrement</var> is set, then the created <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-56">object
store</a> uses a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-12">key generator</a>. If <var>keyPath</var> is
not null, set the created <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-57">object store</a>'s <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-11">key path</a> to <var>keyPath</var>.</p>
      <li data-md="">
       <p>Return a new <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-8">object store handle</a> associated with <var>store</var> and <var>transaction</var>.</p>
     </ol>
    </div>
    <p>This method creates and returns a new <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-58">object store</a> with the given
name in the <a data-link-type="dfn" href="#connection" id="ref-for-connection-34">connected</a> <a data-link-type="dfn" href="#database" id="ref-for-database-38">database</a>. Note that this method must
only be called from within an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-19">upgrade transaction</a>.</p>
    <p>This method synchronously modifies the <code class="idl"><a data-link-type="idl" href="#dom-idbdatabase-objectstorenames" id="ref-for-dom-idbdatabase-objectstorenames-2">objectStoreNames</a></code> property on the <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-7">IDBDatabase</a></code> instance on which it was called.</p>
    <p>In some implementations it is possible for the implementation to run
into problems after queuing a task to create the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-59">object store</a> after the <code class="idl"><a data-link-type="idl" href="#dom-idbdatabase-createobjectstore" id="ref-for-dom-idbdatabase-createobjectstore-2">createObjectStore()</a></code> method has returned. For example in
implementations where metadata about the newly created <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-60">object
store</a> is inserted into the database asynchronously, or where the
implementation might need to ask the user for permission for quota
reasons. Such implementations must still create and return an <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-3">IDBObjectStore</a></code> object, and once the implementation determines that
creating the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-61">object store</a> has failed, it must abort the
transaction using the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-3">steps for aborting a transaction</a> using the
appropriate error. For example if creating the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-62">object store</a> failed due to quota reasons, <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-quotaexceedederror" id="ref-for-exceptiondef-request-quotaexceedederror-2">QuotaExceededError</a></code> must be used as
error.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="method" data-export="" id="dom-idbdatabase-deleteobjectstore">deleteObjectStore(<var>name</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>database</var> be the <a data-link-type="dfn" href="#database" id="ref-for-database-39">database</a> associated with this <a data-link-type="dfn" href="#connection" id="ref-for-connection-35">connection</a>.</p>
      <li data-md="">
       <p>Let <var>transaction</var> be the currently running <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-20">upgrade
transaction</a> associated with <var>database</var>, or <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-4">InvalidStateError</a></code> if none.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-7">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-3">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>store</var> be the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-63">object store</a> <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-6">named</a> <var>name</var> in <var>database</var>,
or <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-notfounderror" id="ref-for-exceptiondef-request-notfounderror-1">NotFoundError</a></code> if none.</p>
      <li data-md="">
       <p>Remove <var>store</var> from this <a data-link-type="dfn" href="#connection" id="ref-for-connection-36">connection</a>'s <a data-link-type="dfn" href="#connection-object-store-set" id="ref-for-connection-object-store-set-2">object
store set</a>.</p>
      <li data-md="">
       <p>Destroy <var>store</var>.</p>
     </ol>
    </div>
    <p>This method destroys the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-64">object store</a> with the given name in the <a data-link-type="dfn" href="#connection" id="ref-for-connection-37">connected</a> <a data-link-type="dfn" href="#database" id="ref-for-database-40">database</a>. Note that this method must only be called
from within an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-21">upgrade transaction</a>.</p>
    <p>This method synchronously modifies the <code class="idl"><a data-link-type="idl" href="#dom-idbdatabase-objectstorenames" id="ref-for-dom-idbdatabase-objectstorenames-3">objectStoreNames</a></code> property on the <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-8">IDBDatabase</a></code> instance on which it was called.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="method" data-export="" data-lt="transaction(storeNames, mode)|transaction(storeNames)" id="dom-idbdatabase-transaction">transaction(<var>storeNames</var>, <var>mode</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>mode</var> parameter is not <code class="idl"><a data-link-type="idl" href="#dom-idbtransactionmode-readonly" id="ref-for-dom-idbtransactionmode-readonly-3">"readonly"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-idbtransactionmode-readwrite" id="ref-for-dom-idbtransactionmode-readwrite-4">"readwrite"</a></code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a>.</p>
      <li data-md="">
       <p>If this method is called on <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-9">IDBDatabase</a></code> object for which an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-22">upgrade transaction</a> is still running, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-5">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If this method is called on an <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-10">IDBDatabase</a></code> instance where the <a data-link-type="dfn" href="#connection-close-pending-flag" id="ref-for-connection-close-pending-flag-4">close pending flag</a> is set, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-6">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>Let <var>scope</var> be the set of unique strings in <var>storeNames</var> if it is a
sequence, or a set containing one string equal to <var>storeNames</var> otherwise.</p>
      <li data-md="">
       <p>If any string in <var>scope</var> is not the name of an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-65">object
store</a> in the <a data-link-type="dfn" href="#connection" id="ref-for-connection-38">connected</a> <a data-link-type="dfn" href="#database" id="ref-for-database-41">database</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-notfounderror" id="ref-for-exceptiondef-request-notfounderror-2">NotFoundError</a></code>.</p>
      <li data-md="">
       <p>If <var>scope</var> is empty, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidaccesserror" id="ref-for-exceptiondef-request-invalidaccesserror-2">InvalidAccessError</a></code>.</p>
      <li data-md="">
       <p>Let <var>transaction</var> be a newly <a data-link-type="dfn" href="#transaction-created" id="ref-for-transaction-created-3">created</a> <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-30">transaction</a> with <var>connection</var>, <var>mode</var> and the set of <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-66">object stores</a> named in <var>scope</var>.</p>
      <li data-md="">
       <p>When control is returned to the event loop, the implementation must
unset the <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-4">active flag</a>.</p>
      <li data-md="">
       <p>Return an <code class="idl"><a data-link-type="idl" href="#request-idbtransaction" id="ref-for-request-idbtransaction-3">IDBTransaction</a></code> object representing <var>transaction</var>.</p>
     </ol>
    </div>
    <aside class="note" role="note"> The created <var>transaction</var> will follow the <a data-link-type="dfn" href="#transaction-lifetime" id="ref-for-transaction-lifetime-1">lifetime</a> rules. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="method" data-export="" id="dom-idbdatabase-close">close()</dfn> method, when invoked,
must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-closing-a-database-connection" id="ref-for-request-steps-for-closing-a-database-connection-3">steps for closing a database connection</a> with this <a data-link-type="dfn" href="#connection" id="ref-for-connection-39">connection</a>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="attribute" data-export="" id="dom-idbdatabase-onabort">onabort</dfn> attribute is the
event handler for the <code>abort</code> event.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="attribute" data-export="" id="dom-idbdatabase-onclose">onclose</dfn> attribute is the
event handler for the <code>close</code> event.</p>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbdatabase-onclose" id="ref-for-dom-idbdatabase-onclose-2">onclose</a></code> attribute is new in this edition.
  It is supported in Chrome 31 and Firefox 50.
  🚧 </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="attribute" data-export="" id="dom-idbdatabase-onerror">onerror</dfn> attribute is the
event handler for the <code>error</code> event.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBDatabase" data-dfn-type="attribute" data-export="" id="dom-idbdatabase-onversionchange">onversionchange</dfn> attribute is
the event handler for the <code>versionchange</code> event.</p>
    <h3 class="heading settled" data-level="4.5" id="object-store-interface"><span class="secno">4.5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-4">IDBObjectStore</a></code> interface</span><a class="self-link" href="#object-store-interface"></a></h3>
    <p>The <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-5">IDBObjectStore</a></code> interface represents an <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-9">object store handle</a>.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbobjectstore">IDBObjectStore</dfn> {
           <span class="kt">attribute</span> <span class="kt">DOMString</span>      <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-idbobjectstore-name" id="ref-for-dom-idbobjectstore-name-1">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>            <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbobjectstore-keypath" id="ref-for-dom-idbobjectstore-keypath-1">keyPath</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-domstringlist" id="ref-for-request-domstringlist-3">DOMStringList</a>  <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMStringList" href="#dom-idbobjectstore-indexnames" id="ref-for-dom-idbobjectstore-indexnames-1">indexNames</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbtransaction" id="ref-for-request-idbtransaction-4">IDBTransaction</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBTransaction" href="#dom-idbobjectstore-transaction" id="ref-for-dom-idbobjectstore-transaction-1">transaction</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span>        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbobjectstore-autoincrement" id="ref-for-dom-idbobjectstore-autoincrement-1">autoIncrement</a>;

  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-7">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-put" id="ref-for-dom-idbobjectstore-put-1">put</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/put(value, key), IDBObjectStore/put(value)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-put-value-key-value">value<a class="self-link" href="#dom-idbobjectstore-put-value-key-value"></a></dfn>, <span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/put(value, key), IDBObjectStore/put(value)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-put-value-key-key">key<a class="self-link" href="#dom-idbobjectstore-put-value-key-key"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-8">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-add" id="ref-for-dom-idbobjectstore-add-1">add</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/add(value, key), IDBObjectStore/add(value)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-add-value-key-value">value<a class="self-link" href="#dom-idbobjectstore-add-value-key-value"></a></dfn>, <span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/add(value, key), IDBObjectStore/add(value)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-add-value-key-key">key<a class="self-link" href="#dom-idbobjectstore-add-value-key-key"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-9">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-delete" id="ref-for-dom-idbobjectstore-delete-1">delete</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/delete(query)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-delete-query-query">query<a class="self-link" href="#dom-idbobjectstore-delete-query-query"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-10">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-clear" id="ref-for-dom-idbobjectstore-clear-3">clear</a>();
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-11">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-get" id="ref-for-dom-idbobjectstore-get-1">get</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/get(query)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-get-query-query">query<a class="self-link" href="#dom-idbobjectstore-get-query-query"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-12">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-getkey" id="ref-for-dom-idbobjectstore-getkey-1">getKey</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/getKey(query)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-getkey-query-query">query<a class="self-link" href="#dom-idbobjectstore-getkey-query-query"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-13">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-getall" id="ref-for-dom-idbobjectstore-getall-1">getAll</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/getAll(query, count), IDBObjectStore/getAll(query), IDBObjectStore/getAll()" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-getall-query-count-query">query<a class="self-link" href="#dom-idbobjectstore-getall-query-count-query"></a></dfn>,
                    [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/getAll(query, count), IDBObjectStore/getAll(query), IDBObjectStore/getAll()" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-getall-query-count-count">count<a class="self-link" href="#dom-idbobjectstore-getall-query-count-count"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-14">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-getallkeys" id="ref-for-dom-idbobjectstore-getallkeys-1">getAllKeys</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/getAllKeys(query, count), IDBObjectStore/getAllKeys(query), IDBObjectStore/getAllKeys()" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-getallkeys-query-count-query">query<a class="self-link" href="#dom-idbobjectstore-getallkeys-query-count-query"></a></dfn>,
                        [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/getAllKeys(query, count), IDBObjectStore/getAllKeys(query), IDBObjectStore/getAllKeys()" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-getallkeys-query-count-count">count<a class="self-link" href="#dom-idbobjectstore-getallkeys-query-count-count"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-15">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-count" id="ref-for-dom-idbobjectstore-count-1">count</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/count(query), IDBObjectStore/count()" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-count-query-query">query<a class="self-link" href="#dom-idbobjectstore-count-query-query"></a></dfn>);

  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-16">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-opencursor" id="ref-for-dom-idbobjectstore-opencursor-1">openCursor</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/openCursor(query, direction), IDBObjectStore/openCursor(query), IDBObjectStore/openCursor()" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-opencursor-query-direction-query">query<a class="self-link" href="#dom-idbobjectstore-opencursor-query-direction-query"></a></dfn>,
                        <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection" id="ref-for-enumdef-request-idbcursordirection-1">IDBCursorDirection</a> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/openCursor(query, direction), IDBObjectStore/openCursor(query), IDBObjectStore/openCursor()" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-opencursor-query-direction-direction">direction<a class="self-link" href="#dom-idbobjectstore-opencursor-query-direction-direction"></a></dfn> = "next");
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-17">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-openkeycursor" id="ref-for-dom-idbobjectstore-openkeycursor-1">openKeyCursor</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/openKeyCursor(query, direction), IDBObjectStore/openKeyCursor(query), IDBObjectStore/openKeyCursor()" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-openkeycursor-query-direction-query">query<a class="self-link" href="#dom-idbobjectstore-openkeycursor-query-direction-query"></a></dfn>,
                           <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection" id="ref-for-enumdef-request-idbcursordirection-2">IDBCursorDirection</a> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/openKeyCursor(query, direction), IDBObjectStore/openKeyCursor(query), IDBObjectStore/openKeyCursor()" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-openkeycursor-query-direction-direction">direction<a class="self-link" href="#dom-idbobjectstore-openkeycursor-query-direction-direction"></a></dfn> = "next");

  <a class="n" data-link-type="idl-name" href="#request-idbindex" id="ref-for-request-idbindex-2">IDBIndex</a>   <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-index" id="ref-for-dom-idbobjectstore-index-1">index</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/index(name)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-index-name-name">name<a class="self-link" href="#dom-idbobjectstore-index-name-name"></a></dfn>);

  <a class="n" data-link-type="idl-name" href="#request-idbindex" id="ref-for-request-idbindex-3">IDBIndex</a>   <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-createindex" id="ref-for-dom-idbobjectstore-createindex-1">createIndex</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/createIndex(name, keyPath, options), IDBObjectStore/createIndex(name, keyPath)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-createindex-name-keypath-options-name">name<a class="self-link" href="#dom-idbobjectstore-createindex-name-keypath-options-name"></a></dfn>,
                         (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">sequence</span>&lt;<span class="kt">DOMString</span>>) <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/createIndex(name, keyPath, options), IDBObjectStore/createIndex(name, keyPath)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-createindex-name-keypath-options-keypath">keyPath<a class="self-link" href="#dom-idbobjectstore-createindex-name-keypath-options-keypath"></a></dfn>,
                         <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-request-idbindexparameters" id="ref-for-dictdef-request-idbindexparameters-1">IDBIndexParameters</a> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/createIndex(name, keyPath, options), IDBObjectStore/createIndex(name, keyPath)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-createindex-name-keypath-options-options">options<a class="self-link" href="#dom-idbobjectstore-createindex-name-keypath-options-options"></a></dfn>);
  <span class="kt">void</span>       <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-deleteindex" id="ref-for-dom-idbobjectstore-deleteindex-1">deleteIndex</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="IDBObjectStore/deleteIndex(indexName)" data-dfn-type="argument" data-export="" id="dom-idbobjectstore-deleteindex-indexname-indexname">indexName<a class="self-link" href="#dom-idbobjectstore-deleteindex-indexname-indexname"></a></dfn>);
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="dictionary" data-export="" id="dictdef-request-idbindexparameters">IDBIndexParameters</dfn> {
  <span class="kt">boolean</span> <dfn class="nv dfn-paneled idl-code" data-default="false" data-dfn-for="IDBIndexParameters" data-dfn-type="dict-member" data-export="" data-type="boolean " id="dom-idbindexparameters-unique">unique</dfn> = <span class="kt">false</span>;
  <span class="kt">boolean</span> <dfn class="nv dfn-paneled idl-code" data-default="false" data-dfn-for="IDBIndexParameters" data-dfn-type="dict-member" data-export="" data-type="boolean " id="dom-idbindexparameters-multientry">multiEntry</dfn> = <span class="kt">false</span>;
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="attribute" data-export="" id="dom-idbobjectstore-name">name</dfn> attribute’s getter
must return this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-10">object store handle</a>'s <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-7">name</a>.</p>
    <aside class="note" role="note"> As long as the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-31">transaction</a> has not <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-5">finished</a>,
  this is the same as the associated <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-67">object store</a>'s <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-8">name</a>. Once the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-32">transaction</a> has <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-6">finished</a>, this attribute will not reflect changes made with a
  later <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-23">upgrade transaction</a>. </aside>
    <p>The <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-name" id="ref-for-dom-idbobjectstore-name-2">name</a></code> attribute’s setter must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>name</var> be the given value.</p>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-11">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-2">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-12">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-3">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-7">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-24">upgrade transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-8">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-8">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-4">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If <var>store</var>’s <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-9">name</a> is equal to <var>name</var>,
terminate these steps.</p>
      <li data-md="">
       <p>If an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-68">object store</a> <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-10">named</a> <var>name</var> already exists in <var>store</var>’s <a data-link-type="dfn" href="#database" id="ref-for-database-42">database</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-3">ConstraintError</a></code>.</p>
      <li data-md="">
       <p>Set <var>store</var>’s <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-11">name</a> to <var>name</var>.</p>
      <li data-md="">
       <p>Set this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-13">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-name" id="ref-for-object-store-handle-name-1">name</a> to <var>name</var>.</p>
     </ol>
    </div>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-name" id="ref-for-dom-idbobjectstore-name-3">name</a></code> attribute’s setter is new in this edition.
  It will be supported in Firefox 51.
  🚧 </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="attribute" data-export="" id="dom-idbobjectstore-keypath">keyPath</dfn> attribute’s getter
must return this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-14">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-4">object store</a>'s <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-12">key
path</a>, or null if none.</p>
    <p>The conversion is done following the normal <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> binding logic
for <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> and <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence">sequence&lt;DOMString></a> values, as
appropriate.</p>
    <p>The returned value is not the same instance that was used when the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-69">object store</a> was created. However, if this attribute returns
an object (specifically an <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a>), it returns the same object
instance every time it is inspected. Changing the properties of the
object has no effect on the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-70">object store</a>.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="attribute" data-export="" id="dom-idbobjectstore-indexnames">indexNames</dfn> attribute’s
getter must return a <a data-link-type="dfn" href="#sorted-list" id="ref-for-sorted-list-2">sorted list</a> of the <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-2">names</a> of <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-19">indexes</a> in this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-15">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-index-set" id="ref-for-object-store-handle-index-set-1">index set</a>.</p>
    <aside class="note" role="note"> As long as the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-33">transaction</a> has not <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-7">finished</a>,
  this is the same as the associated <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-71">object store</a>'s list
  of <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-20">index</a> <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-3">names</a>. Once the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-34">transaction</a> has <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-8">finished</a>, this attribute will not
  reflect changes made with a later <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-25">upgrade transaction</a>. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="attribute" data-export="" id="dom-idbobjectstore-transaction">transaction</dfn> attribute’s
getter must return this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-16">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-3">transaction</a>,</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="attribute" data-export="" id="dom-idbobjectstore-autoincrement">autoIncrement</dfn> attribute’s
getter must return true if this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-17">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-5">object store</a> has a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-13">key generator</a>,
and false otherwise.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" data-lt="put(value, key)|put(value)" id="dom-idbobjectstore-put">put(<var>value</var>, <var>key</var>)</dfn> method,
when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-18">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-4">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-19">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-6">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-9">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-9">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-5">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is a <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-9">read-only transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-readonlyerror" id="ref-for-exceptiondef-request-readonlyerror-1">ReadOnlyError</a></code>.</p>
      <li data-md="">
       <p>If <var>store</var> uses <a data-link-type="dfn" href="#object-store-in-line-keys" id="ref-for-object-store-in-line-keys-2">in-line keys</a> and <var>key</var> was given, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-5">DataError</a></code>.</p>
      <li data-md="">
       <p>If <var>store</var> uses <a data-link-type="dfn" href="#object-store-out-of-line-keys" id="ref-for-object-store-out-of-line-keys-2">out-of-line keys</a> and has no <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-14">key
generator</a> and <var>key</var> was not given, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-6">DataError</a></code>.</p>
      <li data-md="">
       <p>If <var>key</var> was given, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>r</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-5">convert a
value to a key</a> with <var>key</var>. Rethrow any exceptions.</p>
        <li data-md="">
         <p>If <var>r</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-7">DataError</a></code>.</p>
        <li data-md="">
         <p>Let <var>key</var> be <var>r</var>.</p>
       </ol>
      <li data-md="">
       <p>Let <var>clone</var> be <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#structuredclone">structured clone</a> of <var>value</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>store</var> uses <a data-link-type="dfn" href="#object-store-in-line-keys" id="ref-for-object-store-in-line-keys-3">in-line keys</a>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>kpk</var> be the result of running the steps to <a data-link-type="dfn" href="#request-extract-a-key-from-a-value-using-a-key-path" id="ref-for-request-extract-a-key-from-a-value-using-a-key-path-2">extract a
key from a value using a key path</a> with <var>clone</var> and <var>store</var>’s <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-13">key path</a>. Rethrow any
exceptions.</p>
        <li data-md="">
         <p>If <var>kpk</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-8">DataError</a></code>.</p>
        <li data-md="">
         <p>If <var>kpk</var> is not failure, let <var>key</var> be <var>kpk</var>.</p>
        <li data-md="">
         <p>Otherwise, if <var>store</var> does not have a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-15">key
generator</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-9">DataError</a></code>.</p>
       </ol>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-2">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-18">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-20">object store handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-storing-a-record-into-an-object-store" id="ref-for-request-steps-for-storing-a-record-into-an-object-store-1">steps for storing a record into an object store</a> as <var>operation</var>, using <var>store</var>, the <var>clone</var> as <var>value</var>, <var>key</var>, and
with the <var>no-overwrite flag</var> unset.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" data-lt="add(value, key)|add(value)" id="dom-idbobjectstore-add">add(<var>value</var>, <var>key</var>)</dfn> method,
when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-21">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-5">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-22">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-7">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-10">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-10">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-6">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is a <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-10">read-only transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-readonlyerror" id="ref-for-exceptiondef-request-readonlyerror-2">ReadOnlyError</a></code>.</p>
      <li data-md="">
       <p>If <var>store</var> uses <a data-link-type="dfn" href="#object-store-in-line-keys" id="ref-for-object-store-in-line-keys-4">in-line keys</a> and <var>key</var> was given, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-10">DataError</a></code>.</p>
      <li data-md="">
       <p>If <var>store</var> uses <a data-link-type="dfn" href="#object-store-out-of-line-keys" id="ref-for-object-store-out-of-line-keys-3">out-of-line keys</a> and has no <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-16">key
generator</a> and <var>key</var> was not given, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-11">DataError</a></code>.</p>
      <li data-md="">
       <p>If <var>key</var> was given, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>r</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-6">convert a
value to a key</a> with <var>key</var>. Rethrow any exceptions.</p>
        <li data-md="">
         <p>If <var>r</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-12">DataError</a></code>.</p>
        <li data-md="">
         <p>Let <var>key</var> be <var>r</var>.</p>
       </ol>
      <li data-md="">
       <p>Let <var>clone</var> be <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#structuredclone">structured clone</a> of <var>value</var>. Rethrow any
exceptions.</p>
      <li data-md="">
       <p>If <var>store</var> uses <a data-link-type="dfn" href="#object-store-in-line-keys" id="ref-for-object-store-in-line-keys-5">in-line keys</a>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>kpk</var> be the result of running the steps to <a data-link-type="dfn" href="#request-extract-a-key-from-a-value-using-a-key-path" id="ref-for-request-extract-a-key-from-a-value-using-a-key-path-3">extract a
key from a value using a key path</a> with <var>clone</var> and <var>store</var>’s <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-14">key path</a>. Rethrow any
exceptions.</p>
        <li data-md="">
         <p>If <var>kpk</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-13">DataError</a></code>.</p>
        <li data-md="">
         <p>If <var>kpk</var> is not failure, let <var>key</var> be <var>kpk</var>.</p>
        <li data-md="">
         <p>Otherwise, if <var>store</var> does not have a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-17">key
generator</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-14">DataError</a></code>.</p>
       </ol>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-3">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-19">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-23">object store handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-storing-a-record-into-an-object-store" id="ref-for-request-steps-for-storing-a-record-into-an-object-store-2">steps for storing a record into an object store</a> as <var>operation</var>, using <var>store</var>, <var>clone</var> as <var>value</var>, <var>key</var>, and with
the <var>no-overwrite flag</var> set.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" id="dom-idbobjectstore-delete">delete(<var>query</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-24">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-6">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-25">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-8">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-11">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-11">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-7">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is a <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-11">read-only transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-readonlyerror" id="ref-for-exceptiondef-request-readonlyerror-3">ReadOnlyError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-1">convert a value to a key range</a> with <var>query</var> and <var>null disallowed flag</var> set. Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-4">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-20">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-26">object store handle</a> as <var>source</var> and
the <a data-link-type="dfn" href="#request-steps-for-deleting-records-from-an-object-store" id="ref-for-request-steps-for-deleting-records-from-an-object-store-1">steps for deleting records from an object store</a> as <var>operation</var>, using <var>store</var> and <var>range</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-46">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-1">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-25">records</a> keys to be
deleted.</p>
    <aside class="note" role="note"> Unlike other methods which take keys or key ranges, this method does <strong>not</strong> allow null to be given as key. This is to
  reduce the risk that a small bug would clear a whole object store. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" id="dom-idbobjectstore-clear">clear()</dfn> method, when invoked,
must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-27">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-7">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-28">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-9">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-12">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-12">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-8">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is a <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-12">read-only transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-readonlyerror" id="ref-for-exceptiondef-request-readonlyerror-4">ReadOnlyError</a></code>.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-5">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-21">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-29">object store handle</a> as <var>source</var> and
the <a data-link-type="dfn" href="#request-steps-for-clearing-an-object-store" id="ref-for-request-steps-for-clearing-an-object-store-1">steps for clearing an object store</a> as <var>operation</var>, using <var>store</var>.</p>
     </ol>
     <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" id="dom-idbobjectstore-get">get(<var>query</var>)</dfn> method, when
invoked, must run these steps:</p>
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-30">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-8">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-31">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-10">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-13">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-13">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-9">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-2">convert a value to a key range</a> with <var>query</var> and <var>null disallowed flag</var> set. Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-6">steps for asynchronously executing a request</a> and
  return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-22">IDBRequest</a></code> created by these steps. The steps
  are run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-32">object store handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-retrieving-a-value-from-an-object-store" id="ref-for-request-steps-for-retrieving-a-value-from-an-object-store-1">steps for retrieving a value from
  an object store</a> as <var>operation</var>, using <var>store</var> and <var>range</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-47">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-2">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-26">record</a> to be retrieved. If a
range is specified, the method retrieves the first existing value in
that range.</p>
    <aside class="note" role="note"> This method produces the same result if a record with the given key
  doesn’t exist as when a record exists, but has undefined as value.
  If you need to tell the two situations apart, you can use <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-opencursor" id="ref-for-dom-idbobjectstore-opencursor-2">openCursor()</a></code> with the same key. This will return
  a cursor with undefined as value if a record exists, or no cursor if
  no such record exists. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" id="dom-idbobjectstore-getkey">getKey(<var>query</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-6">index handle</a>'s <a data-link-type="dfn" href="#index-handle-transaction" id="ref-for-index-handle-transaction-1">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-33">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-11">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-14">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-14">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-10">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-3">convert a value to a key range</a> with <var>query</var> and <var>null disallowed flag</var> set. Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-7">steps for asynchronously executing a request</a> and
  return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-23">IDBRequest</a></code> created by these steps. The steps
  are run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-34">object store handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-retrieving-a-key-from-an-object-store" id="ref-for-request-steps-for-retrieving-a-key-from-an-object-store-1">steps for retrieving a key from an
  object store</a> as <var>operation</var>, using <var>store</var> and <var>range</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-48">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-3">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-27">record</a> key to be
retrieved. If a range is specified, the method retrieves
the first existing key in that range.</p>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-getkey" id="ref-for-dom-idbobjectstore-getkey-2">getKey()</a></code> method on <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-6">IDBObjectStore</a></code> is new
  in this edition.
  It will be supported in Firefox 51.
  🚧 </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" data-lt="getAll(query, count)|getAll(query)|getAll()" id="dom-idbobjectstore-getall">getAll(<var>query</var>, <var>count</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-35">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-9">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-36">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-12">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-15">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-15">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-11">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-4">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-8">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-24">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-37">object store handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-retrieving-multiple-values-from-an-object-store" id="ref-for-request-steps-for-retrieving-multiple-values-from-an-object-store-1">steps for retrieving multiple values from an object store</a> as <var>operation</var>, using <var>store</var>, <var>range</var>, and <var>count</var> if given.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-49">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-4">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-28">records</a> to be retrieved. If null or not given,
an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-3">unbounded key range</a> is used. If <var>count</var> is specified and
there are more than <var>count</var> records in range, only the first <var>count</var> will be retrieved.</p>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-getall" id="ref-for-dom-idbobjectstore-getall-2">getAll()</a></code> method is new in this edition.
  It is supported in Chrome 48 and Firefox 44.
  🚧 </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" data-lt="getAllKeys(query, count)|getAllKeys(query)|getAllKeys()" id="dom-idbobjectstore-getallkeys">getAllKeys(<var>query</var>, <var>count</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-38">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-10">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-39">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-13">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-16">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-16">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-12">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-5">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-9">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-25">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-40">object store handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-retrieving-multiple-keys-from-an-object-store" id="ref-for-request-steps-for-retrieving-multiple-keys-from-an-object-store-1">steps for retrieving multiple keys from an object store</a> as <var>operation</var>, using <var>store</var>, <var>range</var>, and <var>count</var> if given.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-50">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-5">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-29">records</a> keys to be retrieved. If null or not
given, an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-4">unbounded key range</a> is used. If <var>count</var> is specified
and there are more than <var>count</var> keys in range, only the first <var>count</var> will be retrieved.</p>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-getallkeys" id="ref-for-dom-idbobjectstore-getallkeys-2">getAllKeys()</a></code> method is new in this edition.
  It is supported in Chrome 48 and Firefox 44.
  🚧 </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" data-lt="count(query)|count()" id="dom-idbobjectstore-count">count(<var>query</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-41">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-11">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-42">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-14">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-17">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-17">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-13">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-6">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-10">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-26">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-43">object store handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-to-count-the-records-in-a-range" id="ref-for-request-steps-to-count-the-records-in-a-range-1">steps to count the records in a range</a> as <var>operation</var>, with <var>source</var> and <var>range</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-51">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-6">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-30">records</a> keys to be counted. If null or not
given, an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-5">unbounded key range</a> is used.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" data-lt="openCursor(query, direction)|openCursor(query)|openCursor()" id="dom-idbobjectstore-opencursor">openCursor(<var>query</var>, <var>direction</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-44">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-12">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-45">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-15">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-18">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-18">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-14">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-7">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Let <var>cursor</var> be a new <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-16">cursor</a> with <a data-link-type="dfn" href="#cursor-transaction" id="ref-for-cursor-transaction-1">transaction</a> set to <var>transaction</var>, an undefined <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-4">position</a>, <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-2">direction</a> set to <var>direction</var>, <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-1">got value
flag</a> unset, and undefined <a data-link-type="dfn" href="#cursor-key" id="ref-for-cursor-key-1">key</a> and <a data-link-type="dfn" href="#cursor-value" id="ref-for-cursor-value-2">value</a>. The <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-10">source</a> of <var>cursor</var> is <var>store</var>. The <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-3">range</a> of <var>cursor</var> is <var>range</var>.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-11">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-27">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-46">object store handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-iterating-a-cursor" id="ref-for-request-steps-for-iterating-a-cursor-1">steps for iterating a cursor</a> with <var>cursor</var> as <var>operation</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-52">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-7">IDBKeyRange</a></code> to use as the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-17">cursor</a>'s <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-4">range</a>.
If null or not given, an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-6">unbounded key range</a> is used.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" data-lt="openKeyCursor(query, direction)|openKeyCursor(query)|openKeyCursor()" id="dom-idbobjectstore-openkeycursor">openKeyCursor(<var>query</var>, <var>direction</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-47">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-13">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-48">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-16">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-19">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-19">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-15">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-8">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Let <var>cursor</var> be a new <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-18">cursor</a> with <a data-link-type="dfn" href="#cursor-transaction" id="ref-for-cursor-transaction-2">transaction</a> set to <var>transaction</var>, an undefined <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-5">position</a>, <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-3">direction</a> set to <var>direction</var>, <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-2">got value
flag</a> unset, and undefined <a data-link-type="dfn" href="#cursor-key" id="ref-for-cursor-key-2">key</a> and <a data-link-type="dfn" href="#cursor-value" id="ref-for-cursor-value-3">value</a>. The <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-11">source</a> of <var>cursor</var> is <var>store</var>. The <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-5">range</a> of <var>cursor</var> is <var>range</var>. The <a data-link-type="dfn" href="#cursor-key-only-flag" id="ref-for-cursor-key-only-flag-1">key only flag</a> of <var>cursor</var> is
set.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-12">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-28">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-49">object store handle</a> as <var>source</var> and
the <a data-link-type="dfn" href="#request-steps-for-iterating-a-cursor" id="ref-for-request-steps-for-iterating-a-cursor-2">steps for iterating a cursor</a> with <var>cursor</var> as <var>operation</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-53">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-8">IDBKeyRange</a></code> to use as the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-19">cursor</a>'s <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-6">range</a>. If null
or not given, an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-7">unbounded key range</a> is used.</p>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-openkeycursor" id="ref-for-dom-idbobjectstore-openkeycursor-2">openKeyCursor()</a></code> method is new in this edition.
  It is supported in Chrome 48 and Firefox 44.
  🚧 </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" data-lt="createIndex(name, keyPath, options)|createIndex(name, keyPath)" id="dom-idbobjectstore-createindex">createIndex(<var>name</var>, <var>keyPath</var>, <var>options</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-50">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-14">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-51">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-17">object store</a>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-26">upgrade transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-20">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-21">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-20">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-16">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-21">index</a> <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-4">named</a> <var>name</var> already exists in <var>store</var>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-4">ConstraintError</a></code>.</p>
      <li data-md="">
       <p>If <var>keyPath</var> is not a <a data-link-type="dfn" href="#valid-key-path" id="ref-for-valid-key-path-2">valid key path</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-syntaxerror" id="ref-for-exceptiondef-request-syntaxerror-2">SyntaxError</a></code>.</p>
      <li data-md="">
       <p>Let <var>unique</var> be set if <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-idbindexparameters-unique" id="ref-for-dom-idbindexparameters-unique-1">unique</a></code> member is true, and unset otherwise.</p>
      <li data-md="">
       <p>Let <var>multiEntry</var> be set if <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-idbindexparameters-multientry" id="ref-for-dom-idbindexparameters-multientry-1">multiEntry</a></code> member is true, and unset otherwise.</p>
      <li data-md="">
       <p>If <var>keyPath</var> is a sequence and <var>multiEntry</var> is
set, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidaccesserror" id="ref-for-exceptiondef-request-invalidaccesserror-3">InvalidAccessError</a></code>.</p>
      <li data-md="">
       <p>Let <var>index</var> be a new <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-22">index</a> in <var>store</var>.
Set <var>index</var>’s <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-5">name</a> to <var>name</var> and <a data-link-type="dfn" href="#index-key-path" id="ref-for-index-key-path-4">key path</a> to <var>keyPath</var>. If <var>unique</var> is set, set <var>index</var>’s <a data-link-type="dfn" href="#index-unique-flag" id="ref-for-index-unique-flag-3">unique flag</a>. If <var>multiEntry</var> is
set, set <var>index</var>’s <a data-link-type="dfn" href="#index-multientry-flag" id="ref-for-index-multientry-flag-3">multiEntry flag</a>.</p>
      <li data-md="">
       <p>Add <var>index</var> to this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-52">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-index-set" id="ref-for-object-store-handle-index-set-2">index
  set</a>.</p>
      <li data-md="">
       <p>Return a new <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-7">index handle</a> associated with <var>index</var> and this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-53">object store handle</a>.</p>
     </ol>
    </div>
    <p>This method creates and returns a new <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-23">index</a> with the
given name in the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-72">object store</a>. Note that this method
must only be called from within an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-27">upgrade transaction</a>.</p>
    <p>The index that is requested to be created can contain constraints on
the data allowed in the index’s <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-7">referenced</a> object store, such
as requiring uniqueness of the values referenced by the index’s
keyPath. If the <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-8">referenced</a> object store already contains data
which violates these constraints, this must not cause the
implementation of <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-createindex" id="ref-for-dom-idbobjectstore-createindex-2">createIndex()</a></code> to throw an
exception or affect what it returns. The implementation must still
create and return an <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-4">IDBIndex</a></code> object, and the implementation must <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to abort the <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-28">upgrade transaction</a> which was
used for the <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-createindex" id="ref-for-dom-idbobjectstore-createindex-3">createIndex()</a></code> call.</p>
    <p>This method synchronously modifies the <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-indexnames" id="ref-for-dom-idbobjectstore-indexnames-2">indexNames</a></code> property on the <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-7">IDBObjectStore</a></code> instance on which it was called.
Although this method does not return an <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-29">IDBRequest</a></code> object, the
index creation itself is processed as an asynchronous request within
the <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-29">upgrade transaction</a>.</p>
    <p>In some implementations it is possible for the implementation to
asynchronously run into problems creating the index after the
createIndex method has returned. For example in implementations where
metadata about the newly created index is queued up to be inserted
into the database asynchronously, or where the implementation might
need to ask the user for permission for quota reasons. Such
implementations must still create and return an <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-5">IDBIndex</a></code> object,
and once the implementation determines that creating the index has
failed, it must abort the transaction using the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-4">steps for aborting
a transaction</a> using an appropriate error as <var>error</var>. For example
if creating the <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-24">index</a> failed due to quota reasons, <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-quotaexceedederror" id="ref-for-exceptiondef-request-quotaexceedederror-3">QuotaExceededError</a></code> must be used as error and if the index can’t be
created due to <a data-link-type="dfn" href="#index-unique-flag" id="ref-for-index-unique-flag-4">unique flag</a> constraints, <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-5">ConstraintError</a></code> must be used as error.</p>
    <aside class="example" id="example-2657c439">
     <a class="self-link" href="#example-2657c439"></a> 
     <p>The asynchronous creation of indexes is observable in the following example:</p>
<pre class="lang-javascript highlight"><span></span><span class="kd">var</span> <span class="nx">request1</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"betty"</span><span class="p">},</span> <span class="mi">1</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">request2</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"betty"</span><span class="p">},</span> <span class="mi">2</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"by_name"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">,</span> <span class="p">{</span><span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
</pre>
     <p>At the point where <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-createindex" id="ref-for-dom-idbobjectstore-createindex-4">createIndex()</a></code> called, neither of the <a data-link-type="dfn" href="#request" id="ref-for-request-21">requests</a> have executed. When the second request executes, a
  duplicate name is created. Since the index creation is considered an
  asynchronous <a data-link-type="dfn" href="#request" id="ref-for-request-22">request</a>, the index’s <a data-link-type="dfn" href="#index-unique-flag" id="ref-for-index-unique-flag-5">uniqueness constraint</a> does not cause the second <a data-link-type="dfn" href="#request" id="ref-for-request-23">request</a> to fail. Instead, the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-35">transaction</a> will
  be <a data-link-type="dfn" href="#transaction-abort" id="ref-for-transaction-abort-6">aborted</a> when the index is created and the constraint
  fails.</p>
    </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" id="dom-idbobjectstore-index">index(<var>name</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-54">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-15">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-55">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-18">object store</a>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-22">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> has <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-9">finished</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-23">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>Let <var>index</var> be the <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-25">index</a> <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-6">named</a> <var>name</var> in this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-56">object
store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-index-set" id="ref-for-object-store-handle-index-set-3">index set</a> if one exists, or <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-notfounderror" id="ref-for-exceptiondef-request-notfounderror-3">NotFoundError</a></code> otherwise.</p>
      <li data-md="">
       <p>Return an <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-8">index handle</a> associated with <var>index</var> and
this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-57">object store handle</a>.</p>
     </ol>
    </div>
    <aside class="note" role="note"> Each call to this method on the same <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-8">IDBObjectStore</a></code> instance
  with the same name returns the same <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-6">IDBIndex</a></code> instance. </aside>
    <aside class="note" role="note"> The returned <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-7">IDBIndex</a></code> instance is specific to this <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-9">IDBObjectStore</a></code> instance. If this method is called on a
  different <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-10">IDBObjectStore</a></code> instance with the same name, a
  different <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-8">IDBIndex</a></code> instance is returned. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBObjectStore" data-dfn-type="method" data-export="" data-lt="deleteIndex(indexName)" id="dom-idbobjectstore-deleteindex">deleteIndex(<var>name</var>)</dfn> method,
when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-58">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-transaction" id="ref-for-object-store-handle-transaction-16">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>store</var> be this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-59">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-19">object store</a>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-30">upgrade transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-24">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>store</var> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-25">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-21">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-17">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>index</var> be the <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-26">index</a> <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-7">named</a> <var>name</var> in <var>store</var> if one exists, or <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-notfounderror" id="ref-for-exceptiondef-request-notfounderror-4">NotFoundError</a></code> otherwise.</p>
      <li data-md="">
       <p>Remove <var>index</var> from this <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-60">object store handle</a>'s <a data-link-type="dfn" href="#object-store-handle-index-set" id="ref-for-object-store-handle-index-set-4">index set</a>.</p>
      <li data-md="">
       <p>Destroy <var>index</var>.</p>
     </ol>
    </div>
    <p>This method destroys the <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-27">index</a> with the given name in the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-73">object store</a>. Note that this method must only be called from
within an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-31">upgrade transaction</a>.</p>
    <p>This method synchronously modifies the <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-indexnames" id="ref-for-dom-idbobjectstore-indexnames-3">indexNames</a></code> property on the <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-11">IDBObjectStore</a></code> instance on which it was called.
Although this method does not return an <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-30">IDBRequest</a></code> object, the
index destruction itself is processed as an asynchronous request
within the <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-32">upgrade transaction</a>.</p>
    <h3 class="heading settled" data-level="4.6" id="index-interface"><span class="secno">4.6. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-9">IDBIndex</a></code> interface</span><a class="self-link" href="#index-interface"></a></h3>
    <p>The <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-10">IDBIndex</a></code> interface represents an <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-9">index handle</a>.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbindex">IDBIndex</dfn> {
           <span class="kt">attribute</span> <span class="kt">DOMString</span>      <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-idbindex-name" id="ref-for-dom-idbindex-name-1">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-12">IDBObjectStore</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBObjectStore" href="#dom-idbindex-objectstore" id="ref-for-dom-idbindex-objectstore-1">objectStore</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>            <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbindex-keypath" id="ref-for-dom-idbindex-keypath-1">keyPath</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span>        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbindex-multientry" id="ref-for-dom-idbindex-multientry-1">multiEntry</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span>        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbindex-unique" id="ref-for-dom-idbindex-unique-1">unique</a>;

  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-31">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-get" id="ref-for-dom-idbindex-get-1">get</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBIndex/get(query)" data-dfn-type="argument" data-export="" id="dom-idbindex-get-query-query">query<a class="self-link" href="#dom-idbindex-get-query-query"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-32">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-getkey" id="ref-for-dom-idbindex-getkey-1">getKey</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBIndex/getKey(query)" data-dfn-type="argument" data-export="" id="dom-idbindex-getkey-query-query">query<a class="self-link" href="#dom-idbindex-getkey-query-query"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-33">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-getall" id="ref-for-dom-idbindex-getall-1">getAll</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBIndex/getAll(query, count), IDBIndex/getAll(query), IDBIndex/getAll()" data-dfn-type="argument" data-export="" id="dom-idbindex-getall-query-count-query">query<a class="self-link" href="#dom-idbindex-getall-query-count-query"></a></dfn>,
                    [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="IDBIndex/getAll(query, count), IDBIndex/getAll(query), IDBIndex/getAll()" data-dfn-type="argument" data-export="" id="dom-idbindex-getall-query-count-count">count<a class="self-link" href="#dom-idbindex-getall-query-count-count"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-34">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-getallkeys" id="ref-for-dom-idbindex-getallkeys-1">getAllKeys</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBIndex/getAllKeys(query, count), IDBIndex/getAllKeys(query), IDBIndex/getAllKeys()" data-dfn-type="argument" data-export="" id="dom-idbindex-getallkeys-query-count-query">query<a class="self-link" href="#dom-idbindex-getallkeys-query-count-query"></a></dfn>,
                        [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="IDBIndex/getAllKeys(query, count), IDBIndex/getAllKeys(query), IDBIndex/getAllKeys()" data-dfn-type="argument" data-export="" id="dom-idbindex-getallkeys-query-count-count">count<a class="self-link" href="#dom-idbindex-getallkeys-query-count-count"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-35">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-count" id="ref-for-dom-idbindex-count-1">count</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBIndex/count(query), IDBIndex/count()" data-dfn-type="argument" data-export="" id="dom-idbindex-count-query-query">query<a class="self-link" href="#dom-idbindex-count-query-query"></a></dfn>);

  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-36">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-opencursor" id="ref-for-dom-idbindex-opencursor-1">openCursor</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBIndex/openCursor(query, direction), IDBIndex/openCursor(query), IDBIndex/openCursor()" data-dfn-type="argument" data-export="" id="dom-idbindex-opencursor-query-direction-query">query<a class="self-link" href="#dom-idbindex-opencursor-query-direction-query"></a></dfn>,
                        <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection" id="ref-for-enumdef-request-idbcursordirection-3">IDBCursorDirection</a> <dfn class="nv idl-code" data-dfn-for="IDBIndex/openCursor(query, direction), IDBIndex/openCursor(query), IDBIndex/openCursor()" data-dfn-type="argument" data-export="" id="dom-idbindex-opencursor-query-direction-direction">direction<a class="self-link" href="#dom-idbindex-opencursor-query-direction-direction"></a></dfn> = "next");
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-37">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-openkeycursor" id="ref-for-dom-idbindex-openkeycursor-1">openKeyCursor</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBIndex/openKeyCursor(query, direction), IDBIndex/openKeyCursor(query), IDBIndex/openKeyCursor()" data-dfn-type="argument" data-export="" id="dom-idbindex-openkeycursor-query-direction-query">query<a class="self-link" href="#dom-idbindex-openkeycursor-query-direction-query"></a></dfn>,
                           <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection" id="ref-for-enumdef-request-idbcursordirection-4">IDBCursorDirection</a> <dfn class="nv idl-code" data-dfn-for="IDBIndex/openKeyCursor(query, direction), IDBIndex/openKeyCursor(query), IDBIndex/openKeyCursor()" data-dfn-type="argument" data-export="" id="dom-idbindex-openkeycursor-query-direction-direction">direction<a class="self-link" href="#dom-idbindex-openkeycursor-query-direction-direction"></a></dfn> = "next");
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="attribute" data-export="" id="dom-idbindex-name">name</dfn> attribute’s getter must
return this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-10">index handle</a>'s <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-8">name</a>.</p>
    <aside class="note" role="note"> As long as the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-36">transaction</a> has not <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-10">finished</a>,
  this is the same as the associated <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-28">index</a>'s <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-9">name</a>. Once the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-37">transaction</a> has <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-11">finished</a>, this attribute will not reflect changes made with a
  later <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-33">upgrade transaction</a>. </aside>
    <p>The <code class="idl"><a data-link-type="idl" href="#dom-idbindex-name" id="ref-for-dom-idbindex-name-2">name</a></code> attribute’s setter must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>name</var> be the given value.</p>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-11">index handle</a>'s <a data-link-type="dfn" href="#index-handle-transaction" id="ref-for-index-handle-transaction-2">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>index</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-12">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-2">index</a>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-34">upgrade transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-26">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-22">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-18">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If <var>index</var> or <var>index</var>’s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-74">object store</a> has
been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-27">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>index</var>’s <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-10">name</a> is equal to <var>name</var>, terminate these steps.</p>
      <li data-md="">
       <p>If an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-29">index</a> <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-11">named</a> <var>name</var> already exists in <var>index</var>’s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-75">object
store</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-6">ConstraintError</a></code>.</p>
      <li data-md="">
       <p>Set <var>index</var>’s <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-12">name</a> to <var>name</var>.</p>
      <li data-md="">
       <p>Set this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-13">index handle</a>'s <a data-link-type="dfn" href="#index-handle-name" id="ref-for-index-handle-name-1">name</a> to <var>name</var>.</p>
     </ol>
    </div>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbindex-name" id="ref-for-dom-idbindex-name-3">name</a></code> attribute’s setter is new in this edition.
  It will be supported in Firefox 51.
  🚧 </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="attribute" data-export="" id="dom-idbindex-objectstore">objectStore</dfn> attribute’s getter
must return this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-14">index handle</a>'s <a data-link-type="dfn" href="#index-handle-object-store-handle" id="ref-for-index-handle-object-store-handle-1">object
store handle</a>.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="attribute" data-export="" id="dom-idbindex-keypath">keyPath</dfn> attribute’s getter must
return this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-15">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-3">index</a>'s <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-15">key path</a>.</p>
    <p>The conversion is done following the normal <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> binding logic
for <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> and <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence">sequence&lt;DOMString></a> values, as
appropriate.</p>
    <p>The returned value is not the same instance that was used when the <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-30">index</a> was created. However, if this attribute returns an
object (specifically an <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a>), it returns the same object
instance every time it is inspected. Changing the properties of the
object has no effect on the <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-31">index</a>.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="attribute" data-export="" id="dom-idbindex-multientry">multiEntry</dfn> attribute’s getter
must return true if this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-16">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-4">index</a>'s <a data-link-type="dfn" href="#index-multientry-flag" id="ref-for-index-multientry-flag-4">multiEntry flag</a> is set, and false
otherwise.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="attribute" data-export="" id="dom-idbindex-unique">unique</dfn> attribute’s getter must
return true if this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-17">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-5">index</a>'s <a data-link-type="dfn" href="#index-unique-flag" id="ref-for-index-unique-flag-6">unique flag</a> is set, and false
otherwise.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="method" data-export="" id="dom-idbindex-get">get(<var>query</var>)</dfn> method, when invoked,
must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-18">index handle</a>'s <a data-link-type="dfn" href="#index-handle-transaction" id="ref-for-index-handle-transaction-3">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>index</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-19">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-6">index</a>.</p>
      <li data-md="">
       <p>If <var>index</var> or <var>index</var>’s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-76">object store</a> has
been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-28">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-23">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-19">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-9">convert a value to a key range</a> with <var>query</var> and <var>null disallowed flag</var> set. Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-13">steps for asynchronously executing a request</a> and
  return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-38">IDBRequest</a></code> created by these steps. The steps
  are run with this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-20">index handle</a> as <var>source</var> and
  the <a data-link-type="dfn" href="#request-steps-for-retrieving-a-referenced-value-from-an-index" id="ref-for-request-steps-for-retrieving-a-referenced-value-from-an-index-1">steps for retrieving a referenced value from an index</a> as <var>operation</var>, using <var>index</var> and <var>range</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-54">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-9">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-31">record</a> to be retrieved. If a
range is specified, the method retrieves the first existing record in
that range.</p>
    <aside class="note" role="note"> This method produces the same result if a record with the given key
  doesn’t exist as when a record exists, but has undefined as value.
  If you need to tell the two situations apart, you can use <code class="idl"><a data-link-type="idl" href="#dom-idbindex-opencursor" id="ref-for-dom-idbindex-opencursor-2">openCursor()</a></code> with the same key. This will return a
  cursor with undefined as value if a record exists, or no cursor if
  no such record exists. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="method" data-export="" id="dom-idbindex-getkey">getKey(<var>query</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-21">index handle</a>'s <a data-link-type="dfn" href="#index-handle-transaction" id="ref-for-index-handle-transaction-4">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>index</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-22">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-7">index</a>.</p>
      <li data-md="">
       <p>If <var>index</var> or <var>index</var>’s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-77">object store</a> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-29">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-24">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-20">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-10">convert a
value to a key range</a> with <var>query</var> and <var>null disallowed flag</var> set. Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-14">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-39">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-23">index handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-retrieving-a-value-from-an-index" id="ref-for-request-steps-for-retrieving-a-value-from-an-index-1">steps for
retrieving a value from an index</a> as <var>operation</var>, using <var>index</var> and <var>range</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-55">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-10">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-32">record</a> key to be retrieved.
If a range is specified, the method retrieves the first existing key
in that range.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="method" data-export="" data-lt="getAll(query, count)|getAll(query)|getAll()" id="dom-idbindex-getall">getAll(<var>query</var>, <var>count</var>)</dfn> method,
when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-24">index handle</a>'s <a data-link-type="dfn" href="#index-handle-transaction" id="ref-for-index-handle-transaction-5">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>index</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-25">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-8">index</a>.</p>
      <li data-md="">
       <p>If <var>index</var> or <var>index</var>’s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-78">object store</a> has
been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-30">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-25">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-21">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-11">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-15">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-40">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-26">index handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-retrieving-multiple-referenced-values-from-an-index" id="ref-for-request-steps-for-retrieving-multiple-referenced-values-from-an-index-1">steps for
retrieving multiple referenced values from an index</a> as <var>operation</var>, using <var>index</var>, <var>range</var>, and <var>count</var> if given.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-56">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-11">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-33">records</a> to be retrieved. If null or not given,
an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-8">unbounded key range</a> is used. If <var>count</var> is specified and
there are more than <var>count</var> records in range, only the first <var>count</var> will be retrieved.</p>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbindex-getall" id="ref-for-dom-idbindex-getall-2">getAll()</a></code> method is new in this edition.
  It is supported in Chrome 48 and Firefox 44.
  🚧 </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="method" data-export="" data-lt="getAllKeys(query, count)|getAllKeys(query)|getAllKeys()" id="dom-idbindex-getallkeys">getAllKeys(<var>query</var>, <var>count</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-27">index handle</a>'s <a data-link-type="dfn" href="#index-handle-transaction" id="ref-for-index-handle-transaction-6">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>index</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-28">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-9">index</a>.</p>
      <li data-md="">
       <p>If <var>index</var> or <var>index</var>’s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-79">object store</a> has
been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-31">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-26">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-22">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-12">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-16">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-41">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-29">index handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-retrieving-multiple-values-from-an-index" id="ref-for-request-steps-for-retrieving-multiple-values-from-an-index-1">steps for
retrieving multiple values from an index</a> as <var>operation</var>, using <var>index</var>, <var>range</var>, and <var>count</var> if given.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-57">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-12">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-34">records</a> keys to be retrieved. If null or not
given, an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-9">unbounded key range</a> is used. If <var>count</var> is specified
and there are more than <var>count</var> keys in range, only the first <var>count</var> will be retrieved.</p>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbindex-getallkeys" id="ref-for-dom-idbindex-getallkeys-2">getAllKeys()</a></code> method is new in this edition.
  It is supported in Chrome 48 and Firefox 44.
  🚧 </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="method" data-export="" data-lt="count(query)|count()" id="dom-idbindex-count">count(<var>query</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-30">index handle</a>'s <a data-link-type="dfn" href="#index-handle-transaction" id="ref-for-index-handle-transaction-7">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>index</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-31">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-10">index</a>.</p>
      <li data-md="">
       <p>If <var>index</var> or <var>index</var>’s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-80">object store</a> has
been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-32">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-27">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-23">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-13">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-17">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-42">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-32">index handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-to-count-the-records-in-a-range" id="ref-for-request-steps-to-count-the-records-in-a-range-2">steps to
count the records in a range</a> as <var>operation</var>, with <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-32">index</a> as <var>source</var> and <var>range</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-58">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-13">IDBKeyRange</a></code> identifying the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-35">records</a> keys to be counted. If null or not
given, an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-10">unbounded key range</a> is used.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="method" data-export="" data-lt="openCursor(query, direction)|openCursor(query)|openCursor()" id="dom-idbindex-opencursor">openCursor(<var>query</var>, <var>direction</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-33">index handle</a>'s <a data-link-type="dfn" href="#index-handle-transaction" id="ref-for-index-handle-transaction-8">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>index</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-34">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-11">index</a>.</p>
      <li data-md="">
       <p>If <var>index</var> or <var>index</var>’s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-81">object store</a> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-33">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-28">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-24">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-14">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Let <var>cursor</var> be a new <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-20">cursor</a> with <a data-link-type="dfn" href="#cursor-transaction" id="ref-for-cursor-transaction-3">transaction</a> set to <var>transaction</var>, an undefined <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-6">position</a>, <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-4">direction</a> set to <var>direction</var>, <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-3">got value
flag</a> unset, and undefined <a data-link-type="dfn" href="#cursor-key" id="ref-for-cursor-key-3">key</a> and <a data-link-type="dfn" href="#cursor-value" id="ref-for-cursor-value-4">value</a>. The <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-12">source</a> of <var>cursor</var> is <var>index</var>. The <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-7">range</a> of <var>cursor</var> is <var>range</var>.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-18">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-43">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-35">index handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-iterating-a-cursor" id="ref-for-request-steps-for-iterating-a-cursor-3">steps for
iterating a cursor</a> with <var>cursor</var> as <var>operation</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-59">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-14">IDBKeyRange</a></code> to use as the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-21">cursor</a>'s <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-8">range</a>. If null
or not given, an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-11">unbounded key range</a> is used.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBIndex" data-dfn-type="method" data-export="" data-lt="openKeyCursor(query, direction)|openKeyCursor(query)|openKeyCursor()" id="dom-idbindex-openkeycursor">openKeyCursor(<var>query</var>, <var>direction</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-36">index handle</a>'s <a data-link-type="dfn" href="#index-handle-transaction" id="ref-for-index-handle-transaction-9">transaction</a>.</p>
      <li data-md="">
       <p>Let <var>index</var> be this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-37">index handle</a>'s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-12">index</a>.</p>
      <li data-md="">
       <p>If <var>index</var> or <var>index</var>’s <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-82">object store</a> has
been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-34">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-29">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-25">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>Let <var>range</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key-range" id="ref-for-request-convert-a-value-to-a-key-range-15">convert a value to a key range</a> with <var>query</var>.
Rethrow any exceptions.</p>
      <li data-md="">
       <p>Let <var>cursor</var> be a new <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-22">cursor</a> with <a data-link-type="dfn" href="#cursor-transaction" id="ref-for-cursor-transaction-4">transaction</a> set to <var>transaction</var>, an undefined <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-7">position</a>, <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-5">direction</a> set to <var>direction</var>, <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-4">got value
flag</a> unset, and undefined <a data-link-type="dfn" href="#cursor-key" id="ref-for-cursor-key-4">key</a> and <a data-link-type="dfn" href="#cursor-value" id="ref-for-cursor-value-5">value</a>. The <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-13">source</a> of <var>cursor</var> is <var>index</var>. The <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-9">range</a> of <var>cursor</var> is <var>range</var>. The <a data-link-type="dfn" href="#cursor-key-only-flag" id="ref-for-cursor-key-only-flag-2">key only
flag</a> of <var>cursor</var> is set.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-19">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-44">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-38">index handle</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-iterating-a-cursor" id="ref-for-request-steps-for-iterating-a-cursor-4">steps for iterating a cursor</a> with <var>cursor</var> as <var>operation</var>.</p>
     </ol>
    </div>
    <p>The <var>query</var> parameter may be a <a data-link-type="dfn" href="#key" id="ref-for-key-60">key</a> or an <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-15">IDBKeyRange</a></code> to use as the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-23">cursor</a>'s <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-10">range</a>. If null
or not given, an <a data-link-type="dfn" href="#request-unbounded-key-range" id="ref-for-request-unbounded-key-range-12">unbounded key range</a> is used.</p>
    <h3 class="heading settled" data-level="4.7" id="keyrange"><span class="secno">4.7. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-16">IDBKeyRange</a></code> interface</span><a class="self-link" href="#keyrange"></a></h3>
    <p>The <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-17">IDBKeyRange</a></code> interface represents a <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-20">key range</a>.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbkeyrange">IDBKeyRange</dfn> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>     <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbkeyrange-lower" id="ref-for-dom-idbkeyrange-lower-1">lower</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>     <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbkeyrange-upper" id="ref-for-dom-idbkeyrange-upper-1">upper</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbkeyrange-loweropen" id="ref-for-dom-idbkeyrange-loweropen-1">lowerOpen</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbkeyrange-upperopen" id="ref-for-dom-idbkeyrange-upperopen-1">upperOpen</a>;

  // Static construction methods:
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-18">IDBKeyRange</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-only" id="ref-for-dom-idbkeyrange-only-1">only</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/only(value)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-only-value-value">value<a class="self-link" href="#dom-idbkeyrange-only-value-value"></a></dfn>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-19">IDBKeyRange</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-lowerbound" id="ref-for-dom-idbkeyrange-lowerbound-1">lowerBound</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/lowerBound(lower, open), IDBKeyRange/lowerBound(lower)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-lowerbound-lower-open-lower">lower<a class="self-link" href="#dom-idbkeyrange-lowerbound-lower-open-lower"></a></dfn>, <span class="kt">optional</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/lowerBound(lower, open), IDBKeyRange/lowerBound(lower)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-lowerbound-lower-open-open">open<a class="self-link" href="#dom-idbkeyrange-lowerbound-lower-open-open"></a></dfn> = <span class="kt">false</span>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-20">IDBKeyRange</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-upperbound" id="ref-for-dom-idbkeyrange-upperbound-1">upperBound</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/upperBound(upper, open), IDBKeyRange/upperBound(upper)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-upperbound-upper-open-upper">upper<a class="self-link" href="#dom-idbkeyrange-upperbound-upper-open-upper"></a></dfn>, <span class="kt">optional</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/upperBound(upper, open), IDBKeyRange/upperBound(upper)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-upperbound-upper-open-open">open<a class="self-link" href="#dom-idbkeyrange-upperbound-upper-open-open"></a></dfn> = <span class="kt">false</span>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-21">IDBKeyRange</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-bound" id="ref-for-dom-idbkeyrange-bound-1">bound</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/bound(lower, upper, lowerOpen, upperOpen), IDBKeyRange/bound(lower, upper, lowerOpen), IDBKeyRange/bound(lower, upper)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-lower">lower<a class="self-link" href="#dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-lower"></a></dfn>,
                           <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/bound(lower, upper, lowerOpen, upperOpen), IDBKeyRange/bound(lower, upper, lowerOpen), IDBKeyRange/bound(lower, upper)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-upper">upper<a class="self-link" href="#dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-upper"></a></dfn>,
                           <span class="kt">optional</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/bound(lower, upper, lowerOpen, upperOpen), IDBKeyRange/bound(lower, upper, lowerOpen), IDBKeyRange/bound(lower, upper)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-loweropen">lowerOpen<a class="self-link" href="#dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-loweropen"></a></dfn> = <span class="kt">false</span>,
                           <span class="kt">optional</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/bound(lower, upper, lowerOpen, upperOpen), IDBKeyRange/bound(lower, upper, lowerOpen), IDBKeyRange/bound(lower, upper)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-upperopen">upperOpen<a class="self-link" href="#dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-upperopen"></a></dfn> = <span class="kt">false</span>);

  <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-includes" id="ref-for-dom-idbkeyrange-includes-1">includes</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBKeyRange/includes(key)" data-dfn-type="argument" data-export="" id="dom-idbkeyrange-includes-key-key">key<a class="self-link" href="#dom-idbkeyrange-includes-key-key"></a></dfn>);
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBKeyRange" data-dfn-type="attribute" data-export="" id="dom-idbkeyrange-lower">lower</dfn> attribute’s getter must
return result of running the steps to <a data-link-type="dfn" href="#request-convert-a-key-to-a-value" id="ref-for-request-convert-a-key-to-a-value-1">convert a key to a value</a> with the <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-8">lower bound</a> if it is not null, or undefined otherwise.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBKeyRange" data-dfn-type="attribute" data-export="" id="dom-idbkeyrange-upper">upper</dfn> attribute’s getter must
return the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-key-to-a-value" id="ref-for-request-convert-a-key-to-a-value-2">convert a key to a
value</a> with the <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-8">upper bound</a> if it is not null, or undefined
otherwise.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBKeyRange" data-dfn-type="attribute" data-export="" id="dom-idbkeyrange-loweropen">lowerOpen</dfn> attribute’s getter
must return true if the <a data-link-type="dfn" href="#request-lower-open-flag" id="ref-for-request-lower-open-flag-4">lower open flag</a> is set, and false
otherwise.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBKeyRange" data-dfn-type="attribute" data-export="" id="dom-idbkeyrange-upperopen">upperOpen</dfn> attribute’s getter
must return true if the <a data-link-type="dfn" href="#request-upper-open-flag" id="ref-for-request-upper-open-flag-4">upper open flag</a> is set, and false
otherwise.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBKeyRange" data-dfn-type="method" data-export="" id="dom-idbkeyrange-only">only(<var>value</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>key</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-7">convert
a value to a key</a> with <var>value</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>key</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-15">DataError</a></code>.</p>
      <li data-md="">
       <p>Create and return a new <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-21">key range</a> <a data-link-type="dfn" href="#request-containing-only" id="ref-for-request-containing-only-2">containing only</a> <var>key</var>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBKeyRange" data-dfn-type="method" data-export="" data-lt="lowerBound(lower, open)|lowerBound(lower)" id="dom-idbkeyrange-lowerbound">lowerBound(<var>lower</var>, <var>lowerOpen</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>lowerKey</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-8">convert a
value to a key</a> with <var>lower</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>lowerKey</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-16">DataError</a></code>.</p>
      <li data-md="">
       <p>Create and return a new <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-22">key range</a> with <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-9">lower bound</a> set to <var>lowerKey</var>, <a data-link-type="dfn" href="#request-lower-open-flag" id="ref-for-request-lower-open-flag-5">lower open flag</a> set if <var>lowerOpen</var> is
true, <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-9">upper bound</a> set to null and <a data-link-type="dfn" href="#request-upper-open-flag" id="ref-for-request-upper-open-flag-5">upper open flag</a> set.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBKeyRange" data-dfn-type="method" data-export="" data-lt="upperBound(upper, open)|upperBound(upper)" id="dom-idbkeyrange-upperbound">upperBound(<var>upper</var>, <var>upperOpen</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>upperKey</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-9">convert a
value to a key</a> with <var>upper</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>upperKey</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-17">DataError</a></code>.</p>
      <li data-md="">
       <p>Create and return a new <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-23">key range</a> with <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-10">lower bound</a> set to null, <a data-link-type="dfn" href="#request-lower-open-flag" id="ref-for-request-lower-open-flag-6">lower open flag</a> set, <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-10">upper bound</a> set if <var>upperKey</var>, and <a data-link-type="dfn" href="#request-upper-open-flag" id="ref-for-request-upper-open-flag-6">upper open flag</a> set to <var>upperOpen</var>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBKeyRange" data-dfn-type="method" data-export="" data-lt="bound(lower, upper, lowerOpen, upperOpen)|bound(lower, upper, lowerOpen)|bound(lower, upper)" id="dom-idbkeyrange-bound">bound(<var>lower</var>, <var>upper</var>, <var>lowerOpen</var>, <var>upperOpen</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>lowerKey</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-10">convert a
value to a key</a> with <var>lower</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>lowerKey</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-18">DataError</a></code>.</p>
      <li data-md="">
       <p>Let <var>upperKey</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-11">convert a
value to a key</a> with <var>upper</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>upperKey</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-19">DataError</a></code>.</p>
      <li data-md="">
       <p>If <var>lowerKey</var> is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-5">greater than</a> <var>upperKey</var>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-20">DataError</a></code>.</p>
      <li data-md="">
       <p>Create and return a new <a data-link-type="dfn" href="#request-key-range" id="ref-for-request-key-range-24">key range</a> with <a data-link-type="dfn" href="#request-lower-bound" id="ref-for-request-lower-bound-11">lower bound</a> set to <var>lowerKey</var>, <a data-link-type="dfn" href="#request-lower-open-flag" id="ref-for-request-lower-open-flag-7">lower open flag</a> set if <var>lowerOpen</var> is
true, <a data-link-type="dfn" href="#request-upper-bound" id="ref-for-request-upper-bound-11">upper bound</a> set to <var>upperKey</var> and <a data-link-type="dfn" href="#request-upper-open-flag" id="ref-for-request-upper-open-flag-7">upper open
flag</a> set if <var>upperOpen</var> is true.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBKeyRange" data-dfn-type="method" data-export="" id="dom-idbkeyrange-includes">includes(<var>key</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>k</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-12">convert a
value to a key</a> with <var>key</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>k</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-21">DataError</a></code>.</p>
      <li data-md="">
       <p>Return true if <var>k</var> is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-2">in</a> this range, and false otherwise.</p>
     </ol>
    </div>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbkeyrange-includes" id="ref-for-dom-idbkeyrange-includes-2">includes()</a></code> method is new in this edition.
  It is supported in Chrome 52 and Firefox 47.
  🚧 </aside>
    <h3 class="heading settled" data-level="4.8" id="cursor-interface"><span class="secno">4.8. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#request-idbcursor" id="ref-for-request-idbcursor-2">IDBCursor</a></code> interface</span><a class="self-link" href="#cursor-interface"></a></h3>
    <p><a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-24">Cursor</a> objects implement the <code class="idl"><a data-link-type="idl" href="#request-idbcursor" id="ref-for-request-idbcursor-3">IDBCursor</a></code> interface. There
is only ever one <code class="idl"><a data-link-type="idl" href="#request-idbcursor" id="ref-for-request-idbcursor-4">IDBCursor</a></code> instance representing a given <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-25">cursor</a>. There is no limit on how many cursors can be used at
the same time.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbcursor">IDBCursor</dfn> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> (<a class="n" data-link-type="idl-name" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-13">IDBObjectStore</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#request-idbindex" id="ref-for-request-idbindex-11">IDBIndex</a>) <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="(IDBObjectStore or IDBIndex)" href="#dom-idbcursor-source" id="ref-for-dom-idbcursor-source-1">source</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection" id="ref-for-enumdef-request-idbcursordirection-5">IDBCursorDirection</a>           <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBCursorDirection" href="#dom-idbcursor-direction" id="ref-for-dom-idbcursor-direction-1">direction</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>                          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbcursor-key" id="ref-for-dom-idbcursor-key-1">key</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>                          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbcursor-primarykey" id="ref-for-dom-idbcursor-primarykey-1">primaryKey</a>;

  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-advance" id="ref-for-dom-idbcursor-advance-1">advance</a>([<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">unsigned</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="IDBCursor/advance(count)" data-dfn-type="argument" data-export="" id="dom-idbcursor-advance-count-count">count<a class="self-link" href="#dom-idbcursor-advance-count-count"></a></dfn>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-continue" id="ref-for-dom-idbcursor-continue-1">continue</a>(<span class="kt">optional</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBCursor/continue(key), IDBCursor/continue()" data-dfn-type="argument" data-export="" id="dom-idbcursor-continue-key-key">key<a class="self-link" href="#dom-idbcursor-continue-key-key"></a></dfn>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-continueprimarykey" id="ref-for-dom-idbcursor-continueprimarykey-1">continuePrimaryKey</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBCursor/continuePrimaryKey(key, primaryKey)" data-dfn-type="argument" data-export="" id="dom-idbcursor-continueprimarykey-key-primarykey-key">key<a class="self-link" href="#dom-idbcursor-continueprimarykey-key-primarykey-key"></a></dfn>, <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBCursor/continuePrimaryKey(key, primaryKey)" data-dfn-type="argument" data-export="" id="dom-idbcursor-continueprimarykey-key-primarykey-primarykey">primaryKey<a class="self-link" href="#dom-idbcursor-continueprimarykey-key-primarykey-primarykey"></a></dfn>);

  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-45">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-update" id="ref-for-dom-idbcursor-update-1">update</a>(<span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="IDBCursor/update(value)" data-dfn-type="argument" data-export="" id="dom-idbcursor-update-value-value">value<a class="self-link" href="#dom-idbcursor-update-value-value"></a></dfn>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest" id="ref-for-request-idbrequest-46">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-delete" id="ref-for-dom-idbcursor-delete-1">delete</a>();
};

<span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="enum" data-export="" id="enumdef-request-idbcursordirection">IDBCursorDirection</dfn> {
  <dfn class="s dfn-paneled idl-code" data-dfn-for="IDBCursorDirection" data-dfn-type="enum-value" data-export="" data-lt="&quot;next&quot;|next" id="dom-idbcursordirection-next">"next"</dfn>,
  <dfn class="s dfn-paneled idl-code" data-dfn-for="IDBCursorDirection" data-dfn-type="enum-value" data-export="" data-lt="&quot;nextunique&quot;|nextunique" id="dom-idbcursordirection-nextunique">"nextunique"</dfn>,
  <dfn class="s dfn-paneled idl-code" data-dfn-for="IDBCursorDirection" data-dfn-type="enum-value" data-export="" data-lt="&quot;prev&quot;|prev" id="dom-idbcursordirection-prev">"prev"</dfn>,
  <dfn class="s dfn-paneled idl-code" data-dfn-for="IDBCursorDirection" data-dfn-type="enum-value" data-export="" data-lt="&quot;prevunique&quot;|prevunique" id="dom-idbcursordirection-prevunique">"prevunique"</dfn>
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursor" data-dfn-type="attribute" data-export="" id="dom-idbcursor-source">source</dfn> attribute’s getter must
return the <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-14">source</a> of this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-26">cursor</a>. This
attribute never returns null or throws an exception, even if the
cursor is currently being iterated, has iterated past its end, or its <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-38">transaction</a> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-30">active</a>.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursor" data-dfn-type="attribute" data-export="" id="dom-idbcursor-direction">direction</dfn> attribute’s getter
must return the <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-6">direction</a> of the <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-27">cursor</a>.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursor" data-dfn-type="attribute" data-export="" id="dom-idbcursor-key">key</dfn> attribute’s getter must
return the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-key-to-a-value" id="ref-for-request-convert-a-key-to-a-value-3">convert a key to a
value</a> with the cursor’s current <a data-link-type="dfn" href="#cursor-key" id="ref-for-cursor-key-5">key</a>. Note that
if this property returns an object (e.g. a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-date-objects">Date</a> or <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a>), it returns the same object instance every time it is
inspected, until the cursor’s <a data-link-type="dfn" href="#cursor-key" id="ref-for-cursor-key-6">key</a> is changed. This
means that if the object is modified, those modifications will be seen
by anyone inspecting the value of the cursor. However modifying such
an object does not modify the contents of the database.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursor" data-dfn-type="attribute" data-export="" id="dom-idbcursor-primarykey">primaryKey</dfn> attribute’s getter
must return the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-key-to-a-value" id="ref-for-request-convert-a-key-to-a-value-4">convert a key to a
value</a> with the cursor’s current <a data-link-type="dfn" href="#cursor-effective-key" id="ref-for-cursor-effective-key-2">effective key</a>. Note that if
this property returns an object (e.g. a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-date-objects">Date</a> or <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a>),
it returns the same object instance every time it is inspected, until
the cursor’s <a data-link-type="dfn" href="#cursor-effective-key" id="ref-for-cursor-effective-key-3">effective key</a> is changed. This means that if the
object is modified, those modifications will be seen by anyone
inspecting the value of the cursor. However modifying such an object
does not modify the contents of the database.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursor" data-dfn-type="method" data-export="" id="dom-idbcursor-update">update(<var>value</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-28">cursor</a>'s <a data-link-type="dfn" href="#cursor-transaction" id="ref-for-cursor-transaction-5">transaction</a>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-31">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-26">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is a <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-13">read-only transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-readonlyerror" id="ref-for-exceptiondef-request-readonlyerror-5">ReadOnlyError</a></code>.</p>
      <li data-md="">
       <p>If the cursor’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-15">source</a> or <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-2">effective object
store</a> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-35">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If this cursor’s <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-5">got value flag</a> is unset, indicating that
the cursor is being iterated or has iterated past its end, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-36">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If this cursor’s <a data-link-type="dfn" href="#cursor-key-only-flag" id="ref-for-cursor-key-only-flag-3">key only flag</a> is set, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-37">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>Let <var>clone</var> be <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#structuredclone">structured clone</a> of <var>value</var>. Rethrow any
exceptions.</p>
      <li data-md="">
       <p>If the <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-3">effective object store</a> of this cursor uses <a data-link-type="dfn" href="#object-store-in-line-keys" id="ref-for-object-store-in-line-keys-6">in-line
keys</a>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>kpk</var> be the result of running the steps to <a data-link-type="dfn" href="#request-extract-a-key-from-a-value-using-a-key-path" id="ref-for-request-extract-a-key-from-a-value-using-a-key-path-4">extract a key from a value using a key path</a> with <var>clone</var> and the <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-16">key
path</a> of the <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-4">effective object store</a>.
Rethrow any exceptions.</p>
        <li data-md="">
         <p>If <var>kpk</var> is failure, invalid, or not <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-4">equal to</a> the cursor’s <a data-link-type="dfn" href="#cursor-effective-key" id="ref-for-cursor-effective-key-4">effective key</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-22">DataError</a></code>.</p>
       </ol>
      <li data-md="">
       <p>Run <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-20">steps for asynchronously executing a request</a> and return
the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-47">IDBRequest</a></code> created by these steps. The steps are run with
this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-29">cursor</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-storing-a-record-into-an-object-store" id="ref-for-request-steps-for-storing-a-record-into-an-object-store-3">steps for storing a
record into an object store</a> as <var>operation</var>, using this
cursor’s <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-5">effective object store</a> as <var>store</var>, the <var>clone</var> as <var>value</var>, this cursor’s <a data-link-type="dfn" href="#cursor-effective-key" id="ref-for-cursor-effective-key-5">effective key</a> as <var>key</var>, and with the <var>no-overwrite flag</var> unset.</p>
     </ol>
    </div>
    <aside class="note" role="note"> A result of running the <a data-link-type="dfn" href="#request-steps-for-storing-a-record-into-an-object-store" id="ref-for-request-steps-for-storing-a-record-into-an-object-store-4">steps for storing a record into an object
  store</a> is that if the record has been deleted since the cursor
  moved to it, a new record will be created. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursor" data-dfn-type="method" data-export="" id="dom-idbcursor-advance">advance(<var>count</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>count</var> is 0 (zero), <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a>.</p>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-30">cursor</a>'s <a data-link-type="dfn" href="#cursor-transaction" id="ref-for-cursor-transaction-6">transaction</a>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-32">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-27">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If the cursor’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-16">source</a> or <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-6">effective object
store</a> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-38">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If this cursor’s <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-6">got value flag</a> is unset, indicating that
the cursor is being iterated or has iterated past its end, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-39">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>Unset the <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-7">got value flag</a> on the cursor.</p>
      <li data-md="">
       <p>Let <var>request</var> be the <a data-link-type="dfn" href="#request" id="ref-for-request-24">request</a> created when this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-31">cursor</a> was created.</p>
      <li data-md="">
       <p>Unset the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-9">done flag</a> on <var>request</var>.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-21">steps for asynchronously executing a request</a> with
the cursor’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-17">source</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-iterating-a-cursor" id="ref-for-request-steps-for-iterating-a-cursor-5">steps
for iterating a cursor</a> with this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-32">cursor</a> and <var>count</var>,
and <var>request</var>.</p>
     </ol>
    </div>
    <aside class="note" role="note"> Calling this method more than once before new cursor data has been
  loaded - for example, calling <code class="idl"><a data-link-type="idl" href="#dom-idbcursor-advance" id="ref-for-dom-idbcursor-advance-2">advance()</a></code> twice from the
  same onsuccess handler - results in an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-40">InvalidStateError</a></code> exception being thrown on the second call because the cursor’s <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-8">got value flag</a> has been unset. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursor" data-dfn-type="method" data-export="" data-lt="continue(key)|continue()" id="dom-idbcursor-continue">continue(<var>key</var>)</dfn> method, when
invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-33">cursor</a>'s <a data-link-type="dfn" href="#cursor-transaction" id="ref-for-cursor-transaction-7">transaction</a>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-33">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-28">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If the cursor’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-18">source</a> or <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-7">effective object store</a> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-41">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If this cursor’s <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-9">got value flag</a> is unset, indicating that
the cursor is being iterated or has iterated past its end, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-42">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If <var>key</var> is given, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>r</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-13">convert a
value to a key</a> with <var>key</var>. Rethrow any exceptions.</p>
        <li data-md="">
         <p>If <var>r</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-23">DataError</a></code>.</p>
        <li data-md="">
         <p>Let <var>key</var> be <var>r</var>.</p>
        <li data-md="">
         <p>If <var>key</var> is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-3">less than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-5">equal to</a> this cursor’s <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-8">position</a> and this cursor’s <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-7">direction</a> is <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-next" id="ref-for-dom-idbcursordirection-next-3">"next"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-nextunique" id="ref-for-dom-idbcursordirection-nextunique-2">"nextunique"</a></code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-24">DataError</a></code>.</p>
        <li data-md="">
         <p>If <var>key</var> is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-6">greater than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-6">equal to</a> this
cursor’s <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-9">position</a> and this cursor’s <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-8">direction</a> is <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prev" id="ref-for-dom-idbcursordirection-prev-3">"prev"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prevunique" id="ref-for-dom-idbcursordirection-prevunique-2">"prevunique"</a></code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-25">DataError</a></code>.</p>
       </ol>
      <li data-md="">
       <p>Unset the <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-10">got value flag</a> on the cursor.</p>
      <li data-md="">
       <p>Let <var>request</var> be the <a data-link-type="dfn" href="#request" id="ref-for-request-25">request</a> created when this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-34">cursor</a> was created.</p>
      <li data-md="">
       <p>Unset the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-10">done flag</a> on <var>request</var>.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-22">steps for asynchronously executing a request</a> with
the cursor’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-19">source</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-iterating-a-cursor" id="ref-for-request-steps-for-iterating-a-cursor-6">steps
for iterating a cursor</a> with this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-35">cursor</a> and <var>key</var> (if
given), and <var>request</var>.</p>
     </ol>
    </div>
    <aside class="note" role="note"> Calling this method more than once before new cursor data has been
  loaded - for example, calling <code class="idl"><a data-link-type="idl" href="#dom-idbcursor-continue" id="ref-for-dom-idbcursor-continue-2">continue()</a></code> twice from the
  same onsuccess handler - results in an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-43">InvalidStateError</a></code> exception being thrown on the second call because the cursor’s <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-11">got value flag</a> has been unset. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursor" data-dfn-type="method" data-export="" data-lt="continuePrimaryKey(key, primaryKey)" id="dom-idbcursor-continueprimarykey">continuePrimaryKey(<var>key</var>, <var>primaryKey</var>)</dfn> method, when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-36">cursor</a>'s <a data-link-type="dfn" href="#cursor-transaction" id="ref-for-cursor-transaction-8">transaction</a>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-34">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-29">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If the cursor’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-20">source</a> or <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-8">effective object
store</a> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-44">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If this cursor’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-21">source</a> is not an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-33">index</a> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidaccesserror" id="ref-for-exceptiondef-request-invalidaccesserror-4">InvalidAccessError</a></code>.</p>
      <li data-md="">
       <p>If this cursor’s <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-9">direction</a> is not <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-next" id="ref-for-dom-idbcursordirection-next-4">"next"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prev" id="ref-for-dom-idbcursordirection-prev-4">"prev"</a></code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidaccesserror" id="ref-for-exceptiondef-request-invalidaccesserror-5">InvalidAccessError</a></code>.</p>
      <li data-md="">
       <p>If this cursor’s <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-12">got value flag</a> is unset, indicating that
the cursor is being iterated or has iterated past its end, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-45">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>Let <var>r</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-14">convert a value to
a key</a> with <var>key</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>r</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-26">DataError</a></code>.</p>
      <li data-md="">
       <p>Let <var>key</var> be <var>r</var>.</p>
      <li data-md="">
       <p>Let <var>r</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-15">convert a value
 to a key</a> with <var>primaryKey</var>. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>r</var> is invalid, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-27">DataError</a></code>.</p>
      <li data-md="">
       <p>Let <var>primaryKey</var> be <var>r</var>.</p>
      <li data-md="">
       <p>If <var>key</var> is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-4">less than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-7">equal to</a> this cursor’s <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-10">position</a> and this cursor’s <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-10">direction</a> is <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-next" id="ref-for-dom-idbcursordirection-next-5">"next"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-nextunique" id="ref-for-dom-idbcursordirection-nextunique-3">"nextunique"</a></code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-28">DataError</a></code>.</p>
      <li data-md="">
       <p>If <var>key</var> is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-7">greater than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-8">equal to</a> this cursor’s <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-11">position</a> and this cursor’s <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-11">direction</a> is <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prev" id="ref-for-dom-idbcursordirection-prev-5">"prev"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prevunique" id="ref-for-dom-idbcursordirection-prevunique-3">"prevunique"</a></code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-29">DataError</a></code>.</p>
      <li data-md="">
       <p>If <var>key</var> is <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-9">equal to</a> this cursor’s <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-12">position</a> and <var>primaryKey</var> is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-5">less than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-10">equal to</a> this cursor’s <a data-link-type="dfn" href="#cursor-object-store-position" id="ref-for-cursor-object-store-position-3">object store position</a> and this cursor’s <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-12">direction</a> is <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-next" id="ref-for-dom-idbcursordirection-next-6">"next"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-nextunique" id="ref-for-dom-idbcursordirection-nextunique-4">"nextunique"</a></code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-30">DataError</a></code>.</p>
      <li data-md="">
       <p>If <var>key</var> is <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-11">equal to</a> this cursor’s <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-13">position</a> and <var>primaryKey</var> is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-8">greater than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-12">equal to</a> this
cursor’s <a data-link-type="dfn" href="#cursor-object-store-position" id="ref-for-cursor-object-store-position-4">object store position</a> and this cursor’s <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-13">direction</a> is <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prev" id="ref-for-dom-idbcursordirection-prev-6">"prev"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prevunique" id="ref-for-dom-idbcursordirection-prevunique-4">"prevunique"</a></code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-31">DataError</a></code>.</p>
      <li data-md="">
       <p>Unset the <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-13">got value flag</a> on the cursor.</p>
      <li data-md="">
       <p>Let <var>request</var> be the <a data-link-type="dfn" href="#request" id="ref-for-request-26">request</a> created when this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-37">cursor</a> was created.</p>
      <li data-md="">
       <p>Unset the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-11">done flag</a> on <var>request</var>.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-23">steps for asynchronously executing a request</a> with
the cursor’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-22">source</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-iterating-a-cursor" id="ref-for-request-steps-for-iterating-a-cursor-7">steps
for iterating a cursor</a> with this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-38">cursor</a>, <var>key</var>, <var>primaryKey</var>, and <var>request</var>.</p>
     </ol>
    </div>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbcursor-continueprimarykey" id="ref-for-dom-idbcursor-continueprimarykey-2">continuePrimaryKey()</a></code> method is new in this edition.
  It will be supported in Firefox 51.
  🚧 </aside>
    <aside class="note" role="note"> Calling this method more than once before new cursor data has been
  loaded - for example, calling <code class="idl"><a data-link-type="idl" href="#dom-idbcursor-continueprimarykey" id="ref-for-dom-idbcursor-continueprimarykey-3">continuePrimaryKey()</a></code> twice from
  the same onsuccess handler - results in an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-46">InvalidStateError</a></code> being thrown on the second call because the cursor’s <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-14">got value
  flag</a> has been unset. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursor" data-dfn-type="method" data-export="" id="dom-idbcursor-delete">delete()</dfn> method, when invoked,
must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-39">cursor</a>'s <a data-link-type="dfn" href="#cursor-transaction" id="ref-for-cursor-transaction-9">transaction</a>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-35">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-30">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is a <a data-link-type="dfn" href="#transaction-read-only-transaction" id="ref-for-transaction-read-only-transaction-14">read-only transaction</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-readonlyerror" id="ref-for-exceptiondef-request-readonlyerror-6">ReadOnlyError</a></code>.</p>
      <li data-md="">
       <p>If the cursor’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-23">source</a> or <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-9">effective object
store</a> has been deleted, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-47">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If this cursor’s <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-15">got value flag</a> is unset, indicating that
the cursor is being iterated or has iterated past its end, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-48">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>If this cursor’s <a data-link-type="dfn" href="#cursor-key-only-flag" id="ref-for-cursor-key-only-flag-4">key only flag</a> is set, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-49">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>Run the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-24">steps for asynchronously executing a request</a> and
return the <code class="idl"><a data-link-type="idl" href="#request-idbrequest" id="ref-for-request-idbrequest-48">IDBRequest</a></code> created by these steps. The steps are
run with this <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-40">cursor</a> as <var>source</var> and the <a data-link-type="dfn" href="#request-steps-for-deleting-records-from-an-object-store" id="ref-for-request-steps-for-deleting-records-from-an-object-store-2">steps for
deleting records from an object store</a> as <var>operation</var>, using
this cursor’s <a data-link-type="dfn" href="#cursor-effective-object-store" id="ref-for-cursor-effective-object-store-10">effective object store</a> and <a data-link-type="dfn" href="#cursor-effective-key" id="ref-for-cursor-effective-key-6">effective
key</a> as <var>store</var> and <var>key</var> respectively.</p>
     </ol>
    </div>
    <p>A <a data-link-type="dfn" href="#request-cursor" id="ref-for-request-cursor-41">cursor</a> that has the <a data-link-type="dfn" href="#cursor-key-only-flag" id="ref-for-cursor-key-only-flag-5">key only flag</a> unset implements the <code class="idl"><a data-link-type="idl" href="#request-idbcursorwithvalue" id="ref-for-request-idbcursorwithvalue-1">IDBCursorWithValue</a></code> interface as well.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbcursorwithvalue">IDBCursorWithValue</dfn> : <a class="n" data-link-type="idl-name" href="#request-idbcursor" id="ref-for-request-idbcursor-5">IDBCursor</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbcursorwithvalue-value" id="ref-for-dom-idbcursorwithvalue-value-1">value</a>;
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBCursorWithValue" data-dfn-type="attribute" data-export="" id="dom-idbcursorwithvalue-value">value</dfn> attribute’s
getter must return the cursor’s current <a data-link-type="dfn" href="#cursor-value" id="ref-for-cursor-value-6">value</a>. Note
that if this property returns an object, it returns the same object
instance every time it is inspected, until the cursor’s <a data-link-type="dfn" href="#cursor-value" id="ref-for-cursor-value-7">value</a> is changed. This means that if the object is
modified, those modifications will be seen by anyone inspecting the
value of the cursor. However modifying such an object does not modify
the contents of the database.</p>
    <h3 class="heading settled" data-level="4.9" id="transaction"><span class="secno">4.9. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#request-idbtransaction" id="ref-for-request-idbtransaction-5">IDBTransaction</a></code> interface</span><a class="self-link" href="#transaction"></a></h3>
    <p><a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-39">transaction</a> objects implement the following interface:</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-idbtransaction">IDBTransaction</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-domstringlist" id="ref-for-request-domstringlist-4">DOMStringList</a>      <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMStringList" href="#dom-idbtransaction-objectstorenames" id="ref-for-dom-idbtransaction-objectstorenames-1">objectStoreNames</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbtransactionmode" id="ref-for-enumdef-request-idbtransactionmode-2">IDBTransactionMode</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBTransactionMode" href="#dom-idbtransaction-mode" id="ref-for-dom-idbtransaction-mode-1">mode</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbdatabase" id="ref-for-request-idbdatabase-11">IDBDatabase</a>        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBDatabase" href="#dom-idbtransaction-db" id="ref-for-dom-idbtransaction-db-1">db</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#dfn-DOMException">DOMException</a>       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMException" href="#dom-idbtransaction-error" id="ref-for-dom-idbtransaction-error-1">error</a>;

  <a class="n" data-link-type="idl-name" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-14">IDBObjectStore</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbtransaction-objectstore" id="ref-for-dom-idbtransaction-objectstore-1">objectStore</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="IDBTransaction/objectStore(name)" data-dfn-type="argument" data-export="" id="dom-idbtransaction-objectstore-name-name">name<a class="self-link" href="#dom-idbtransaction-objectstore-name-name"></a></dfn>);
  <span class="kt">void</span>           <a class="nv idl-code" data-link-type="method" href="#dom-idbtransaction-abort" id="ref-for-dom-idbtransaction-abort-1">abort</a>();

  // Event handlers:
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbtransaction-onabort" id="ref-for-dom-idbtransaction-onabort-1">onabort</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbtransaction-oncomplete" id="ref-for-dom-idbtransaction-oncomplete-1">oncomplete</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbtransaction-onerror" id="ref-for-dom-idbtransaction-onerror-1">onerror</a>;
};

<span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="enum" data-export="" id="enumdef-request-idbtransactionmode">IDBTransactionMode</dfn> {
  <dfn class="s dfn-paneled idl-code" data-dfn-for="IDBTransactionMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;readonly&quot;|readonly" id="dom-idbtransactionmode-readonly">"readonly"</dfn>,
  <dfn class="s dfn-paneled idl-code" data-dfn-for="IDBTransactionMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;readwrite&quot;|readwrite" id="dom-idbtransactionmode-readwrite">"readwrite"</dfn>,
  <dfn class="s dfn-paneled idl-code" data-dfn-for="IDBTransactionMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;versionchange&quot;|versionchange" id="dom-idbtransactionmode-versionchange">"versionchange"</dfn>
};
</pre>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBTransaction" data-dfn-type="attribute" data-export="" id="dom-idbtransaction-objectstorenames">objectStoreNames</dfn> attribute’s getter must run the following steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-40">transaction</a> is an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-35">upgrade transaction</a>,
return a <a data-link-type="dfn" href="#sorted-list" id="ref-for-sorted-list-3">sorted list</a> of the <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-12">names</a> of the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-83">object stores</a> in this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-41">transaction</a>'s <a data-link-type="dfn" href="#connection" id="ref-for-connection-40">connection</a>'s <a data-link-type="dfn" href="#connection-object-store-set" id="ref-for-connection-object-store-set-3">object store
set</a>.</p>
      <li data-md="">
       <p>Otherwise, return a <a data-link-type="dfn" href="#sorted-list" id="ref-for-sorted-list-4">sorted list</a> of the <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-13">names</a> of the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-84">object stores</a> in
this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-42">transaction</a>'s <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-12">scope</a>.</p>
     </ol>
    </div>
    <aside class="advisement"> 🚧
  The <code class="idl"><a data-link-type="idl" href="#dom-idbtransaction-objectstorenames" id="ref-for-dom-idbtransaction-objectstorenames-2">objectStoreNames</a></code> attribute is new in this edition.
  It is supported in Chrome 48 and Firefox 44.
  🚧 </aside>
    <aside class="note" role="note"> The contents of each list returned by this attribute does not
  change, but subsequent calls to this attribute during an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-36">upgrade
  transaction</a> may return lists with different contents as <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-85">object stores</a> are created and deleted. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBTransaction" data-dfn-type="attribute" data-export="" id="dom-idbtransaction-mode">mode</dfn> attribute’s getter
must return the <a data-link-type="dfn" href="#transaction-mode" id="ref-for-transaction-mode-9">mode</a> of the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-43">transaction</a>.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBTransaction" data-dfn-type="attribute" data-export="" id="dom-idbtransaction-db">db</dfn> attribute’s getter must
return the <a data-link-type="dfn" href="#database" id="ref-for-database-43">database</a> <a data-link-type="dfn" href="#connection" id="ref-for-connection-41">connection</a> of which this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-44">transaction</a> is a part.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBTransaction" data-dfn-type="attribute" data-export="" id="dom-idbtransaction-error">error</dfn> attribute’s getter
must return this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-45">transaction</a>'s <a data-link-type="dfn" href="#transaction-error" id="ref-for-transaction-error-1">error</a>, or null if
none.</p>
    <aside class="note" role="note"> If this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-46">transaction</a> was aborted due to a failed <a data-link-type="dfn" href="#request" id="ref-for-request-27">request</a>, this will be the same as the <a data-link-type="dfn" href="#request" id="ref-for-request-28">request</a>'s <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-5">error</a>. If this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-47">transaction</a> was aborted
  due to an uncaught exception in an event handler, the error will be <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-aborterror" id="ref-for-exceptiondef-request-aborterror-1">AbortError</a></code>. If the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-48">transaction</a> was aborted due to
  an error while committing, it will reflect the reason for the
  failure (e.g. <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-quotaexceedederror" id="ref-for-exceptiondef-request-quotaexceedederror-4">QuotaExceededError</a></code>, <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-7">ConstraintError</a></code>, or <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-unknownerror" id="ref-for-exceptiondef-request-unknownerror-2">UnknownError</a></code>). </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBTransaction" data-dfn-type="method" data-export="" id="dom-idbtransaction-objectstore">objectStore(<var>name</var>)</dfn> method,
when invoked, must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>transaction</var> has <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-12">finished</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-50">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>Let <var>store</var> be the <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-86">object store</a> <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-14">named</a> <var>name</var> in this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-49">transaction</a>'s <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-13">scope</a>, or <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-notfounderror" id="ref-for-exceptiondef-request-notfounderror-5">NotFoundError</a></code> if none.</p>
      <li data-md="">
       <p>Return an <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-61">object store handle</a> associated with <var>store</var> and this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-50">transaction</a>.</p>
     </ol>
    </div>
    <aside class="note" role="note"> Each call to this method on the same <code class="idl"><a data-link-type="idl" href="#request-idbtransaction" id="ref-for-request-idbtransaction-6">IDBTransaction</a></code> instance
  with the same name returns the same <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-15">IDBObjectStore</a></code> instance. </aside>
    <aside class="note" role="note"> The returned <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-16">IDBObjectStore</a></code> instance is specific to this <code class="idl"><a data-link-type="idl" href="#request-idbtransaction" id="ref-for-request-idbtransaction-7">IDBTransaction</a></code>. If this method is called on a different <code class="idl"><a data-link-type="idl" href="#request-idbtransaction" id="ref-for-request-idbtransaction-8">IDBTransaction</a></code>, a different <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-17">IDBObjectStore</a></code> instance is
  returned. </aside>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBTransaction" data-dfn-type="method" data-export="" id="dom-idbtransaction-abort">abort()</dfn> method, when invoked,
must run these steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-51">transaction</a> is <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-13">finished</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-invalidstateerror" id="ref-for-exceptiondef-request-invalidstateerror-51">InvalidStateError</a></code>.</p>
      <li data-md="">
       <p>Unset the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-52">transaction</a>'s <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-5">active flag</a> and run the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-5">steps for aborting a transaction</a> with null as <var>error</var>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBTransaction" data-dfn-type="attribute" data-export="" id="dom-idbtransaction-onabort">onabort</dfn> attribute is the
event handler for the <code>abort</code> event.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBTransaction" data-dfn-type="attribute" data-export="" id="dom-idbtransaction-oncomplete">oncomplete</dfn> attribute is
the event handler for the <code>complete</code> event.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="IDBTransaction" data-dfn-type="attribute" data-export="" id="dom-idbtransaction-onerror">onerror</dfn> attribute is the
event handler for the <code>error</code> event.</p>
    <aside class="note" role="note"> To determine if a <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-53">transaction</a> has completed successfully,
  listen to the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-54">transaction</a>'s <code>complete</code> event
  rather than the <code>success</code> event of a particular <a data-link-type="dfn" href="#request" id="ref-for-request-29">request</a>, because the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-55">transaction</a> may still fail after
  the <code>success</code> event fires. </aside>
    <h3 class="heading settled" data-level="4.10" id="domstringlist"><span class="secno">4.10. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#request-domstringlist" id="ref-for-request-domstringlist-5">DOMStringList</a></code> interface</span><a class="self-link" href="#domstringlist"></a></h3>
    <p>The <code class="idl"><a data-link-type="idl" href="#request-domstringlist" id="ref-for-request-domstringlist-6">DOMStringList</a></code> interface represents an immutable ordered
collection of zero or more <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> values. The items in a <code class="idl"><a data-link-type="idl" href="#request-domstringlist" id="ref-for-request-domstringlist-7">DOMStringList</a></code> are accessible via an integral index, starting from
zero.</p>
    <aside class="note" role="note"> The <code class="idl"><a data-link-type="idl" href="#request-domstringlist" id="ref-for-request-domstringlist-8">DOMStringList</a></code> interface was previously defined in <a data-link-type="biblio" href="#biblio-dom-level-3-core">[DOM-Level-3-core]</a> but has been removed from the current versions
  of <a data-link-type="biblio" href="#biblio-dom">[DOM]</a> and is now only referenced in this specification. It is
  hoped that in the future all uses of this type can be replaced by
  the conceptually similar <code>FrozenArray&lt;DOMString></code> to enable the use of other <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> methods, but retaining support
  for the <code class="idl"><a data-link-type="idl" href="#dom-domstringlist-contains" id="ref-for-dom-domstringlist-contains-1">contains()</a></code> method for compatibility with
  deployed content. </aside>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="request" data-dfn-type="interface" data-export="" id="request-domstringlist">DOMStringList</dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long" href="#dom-domstringlist-length" id="ref-for-dom-domstringlist-length-1">length</a>;
    <span class="kt">getter</span> <span class="kt">DOMString</span> (<span class="kt">unsigned</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="DOMStringList/__getter__(index)" data-dfn-type="argument" data-export="" id="dom-domstringlist-__getter__-index-index">index<a class="self-link" href="#dom-domstringlist-__getter__-index-index"></a></dfn>);
    <span class="kt">DOMString</span>? <a class="nv idl-code" data-link-type="method" href="#dom-domstringlist-item" id="ref-for-dom-domstringlist-item-1">item</a>(<span class="kt">unsigned</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="DOMStringList/item(index)" data-dfn-type="argument" data-export="" id="dom-domstringlist-item-index-index">index<a class="self-link" href="#dom-domstringlist-item-index-index"></a></dfn>);

    <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="method" href="#dom-domstringlist-contains" id="ref-for-dom-domstringlist-contains-2">contains</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="DOMStringList/contains(str)" data-dfn-type="argument" data-export="" id="dom-domstringlist-contains-str-str">str<a class="self-link" href="#dom-domstringlist-contains-str-str"></a></dfn>);
};
</pre>
    <p>The <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-supported-property-indices">supported property indices</a> for a <code class="idl"><a data-link-type="idl" href="#request-domstringlist" id="ref-for-request-domstringlist-9">DOMStringList</a></code> <var>list</var> are the numbers zero to the number of items in <var>list</var> minus one.
If <var>list</var> has no items, it has no <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-supported-property-indices">supported property indices</a>.</p>
    <p>To <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-determine-the-value-of-an-indexed-property">determine the value of an indexed property</a> for a given index <var>index</var> in a <code class="idl"><a data-link-type="idl" href="#request-domstringlist" id="ref-for-request-domstringlist-10">DOMStringList</a></code> <var>list</var>, return the <var>index</var><sup>th</sup> item in <var>list</var>.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="DOMStringList" data-dfn-type="attribute" data-export="" id="dom-domstringlist-length">length</dfn> attribute’s
getter must return the number of items in the collection.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="DOMStringList" data-dfn-type="method" data-export="" id="dom-domstringlist-item">item(<var>index</var>)</dfn> method must
return the <var>index</var><sup>th</sup> item in the collection, or null
if there are less than <var>index</var> + 1 items in the collection.</p>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="DOMStringList" data-dfn-type="method" data-export="" id="dom-domstringlist-contains">contains(<var>str</var>)</dfn> method must
return true if <var>str</var> is equal to any item in the collection, and false
otherwise.</p>
    <h2 class="heading settled" data-level="5" id="algorithms"><span class="secno">5. </span><span class="content">Algorithms</span><a class="self-link" href="#algorithms"></a></h2>
    <h3 class="heading settled" data-level="5.1" id="opening"><span class="secno">5.1. </span><span class="content">Opening a database</span><a class="self-link" href="#opening"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-opening-a-database">steps for opening a database</dfn> are defined in the
following steps. The algorithm in these steps takes four arguments:
the <var>origin</var> which requested the <a data-link-type="dfn" href="#database" id="ref-for-database-44">database</a> to be opened, a
database <var>name</var>, a database <var>version</var>, and a <var>request</var>.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>queue</var> be the <a data-link-type="dfn" href="#request-connection-queue" id="ref-for-request-connection-queue-3">connection queue</a> for <var>origin</var> and <var>name</var>.</p>
      <li data-md="">
       <p>Add <var>request</var> to <var>queue</var>.</p>
      <li data-md="">
       <p>Wait until all previous requests in <var>queue</var> have been processed.</p>
      <li data-md="">
       <p>Let <var>db</var> be the <a data-link-type="dfn" href="#database" id="ref-for-database-45">database</a> <a data-link-type="dfn" href="#database-name" id="ref-for-database-name-3">named</a> <var>name</var> in <var>origin</var>, or null otherwise.</p>
      <li data-md="">
       <p>If <var>version</var> is undefined, let <var>version</var> be 1 if <var>db</var> is null, or <var>db</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-9">version</a> otherwise.</p>
      <li data-md="">
       <p>If <var>db</var> is null, let <var>db</var> be a new <a data-link-type="dfn" href="#database" id="ref-for-database-46">database</a> with <a data-link-type="dfn" href="#database-name" id="ref-for-database-name-4">name</a> <var>name</var>, <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-10">version</a> 0 (zero), and with
no <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-87">object stores</a>. If this fails for any reason, return an
appropriate error (e.g. <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-quotaexceedederror" id="ref-for-exceptiondef-request-quotaexceedederror-5">QuotaExceededError</a></code> or <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-unknownerror" id="ref-for-exceptiondef-request-unknownerror-3">UnknownError</a></code>).</p>
      <li data-md="">
       <p>If <var>db</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-11">version</a> is greater than <var>version</var>,
abort these steps and return a new <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-versionerror" id="ref-for-exceptiondef-request-versionerror-1">VersionError</a></code>.</p>
      <li data-md="">
       <p>Let <var>connection</var> be a new <a data-link-type="dfn" href="#connection" id="ref-for-connection-42">connection</a> to <var>db</var>.</p>
      <li data-md="">
       <p>Set <var>connection</var>’s <a data-link-type="dfn" href="#connection-version" id="ref-for-connection-version-3">version</a> to <var>version</var>.</p>
      <li data-md="">
       <p>If <var>db</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-12">version</a> is less than <var>version</var>, run
these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>openConnections</var> be the set of all <a data-link-type="dfn" href="#connection" id="ref-for-connection-43">connections</a>,
except <var>connection</var>, associated with <var>db</var>.</p>
        <li data-md="">
         <p>For each <var>entry</var> in <var>openConnections</var> that does not have its <a data-link-type="dfn" href="#connection-close-pending-flag" id="ref-for-connection-close-pending-flag-5">close pending flag</a> set, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to <a data-link-type="dfn" href="#request-fire-a-version-change-event" id="ref-for-request-fire-a-version-change-event-2">fire a
version change event</a> named <code>versionchange</code> at <var>entry</var> with <var>db</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-13">version</a> and <var>version</var>.</p>
         <aside class="note" role="note"> Firing this event might cause one or more of the other
  objects in <var>openConnections</var> to be closed, in which case the <code>versionchange</code> event must not be fired at those
  objects if that hasn’t yet been done. </aside>
        <li data-md="">
         <p>Wait for all of the events to be fired.</p>
        <li data-md="">
         <p>If any of the <a data-link-type="dfn" href="#connection" id="ref-for-connection-44">connections</a> in <var>openConnections</var> are still
not closed, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a>= to <a data-link-type="dfn" href="#request-fire-a-version-change-event" id="ref-for-request-fire-a-version-change-event-3">fire a version change
event</a> named <code><a data-link-type="dfn" href="#request-blocked" id="ref-for-request-blocked-3">blocked</a></code> at <var>request</var> with <var>db</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-14">version</a> and <var>version</var>.</p>
        <li data-md="">
         <p><span id="version-change-close-block">Wait</span> until all <a data-link-type="dfn" href="#connection" id="ref-for-connection-45">connections</a> in <var>openConnections</var> are <a data-link-type="dfn" href="#connection-closed" id="ref-for-connection-closed-5">closed</a>.</p>
        <li data-md="">
         <p>Run the <a data-link-type="dfn" href="#request-steps-for-running-an-upgrade-transaction" id="ref-for-request-steps-for-running-an-upgrade-transaction-3">steps for running an upgrade transaction</a> using <var>connection</var>, <var>version</var> and <var>request</var>.</p>
        <li data-md="">
         <p>If <var>connection</var> was <a data-link-type="dfn" href="#connection-closed" id="ref-for-connection-closed-6">closed</a>, create and
return a newly <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception">created</a> <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-aborterror" id="ref-for-exceptiondef-request-aborterror-2">AbortError</a></code> and abort these steps.</p>
        <li data-md="">
         <p>If the <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-37">upgrade transaction</a> was aborted, run the <a data-link-type="dfn" href="#request-steps-for-closing-a-database-connection" id="ref-for-request-steps-for-closing-a-database-connection-4">steps
for closing a database connection</a> with <var>connection</var>,
create and return a newly <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception">created</a> <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-aborterror" id="ref-for-exceptiondef-request-aborterror-3">AbortError</a></code> and abort these steps.</p>
       </ol>
      <li data-md="">
       <p>Return <var>connection</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="5.2" id="closing-connection"><span class="secno">5.2. </span><span class="content">Closing a database</span><a class="self-link" href="#closing-connection"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-closing-a-database-connection">steps for closing a database connection</dfn> are as follows.
These steps take two arguments, a <var>connection</var> object, and an
optional <var>forced flag</var>.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Set the <a data-link-type="dfn" href="#connection-close-pending-flag" id="ref-for-connection-close-pending-flag-6">close pending flag</a> of <var>connection</var>.</p>
      <li data-md="">
       <p>If the <var>forced flag</var> is set, then for each <var>transaction</var> <a data-link-type="dfn" href="#transaction-created" id="ref-for-transaction-created-4">created</a> using <var>connection</var> run the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-6">steps for aborting a
transaction</a> with <var>transaction</var> and newly <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception">created</a> <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-aborterror" id="ref-for-exceptiondef-request-aborterror-4">AbortError</a></code>.</p>
      <li data-md="">
       <p>Wait for all transactions <a data-link-type="dfn" href="#transaction-created" id="ref-for-transaction-created-5">created</a> using <var>connection</var> to complete.
Once they are complete, <var>connection</var> is <a data-link-type="dfn" href="#connection-closed" id="ref-for-connection-closed-7">closed</a>.</p>
      <li data-md="">
       <p>If the <var>forced flag</var> is set, then fire a <code>close</code> event
at <var>connection</var>. The event must use the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event">Event</a> interface and
have its type set to "<code>close</code>". The event must not
bubble or be cancelable.</p>
       <aside class="advisement"> 🚧
  This behavior is new in this edition.
  It is supported in Chrome 31 and Firefox 50.
  🚧 </aside>
     </ol>
    </div>
    <aside class="note" role="note"> Once the <a data-link-type="dfn" href="#connection-close-pending-flag" id="ref-for-connection-close-pending-flag-7">close pending flag</a> has been set no new transactions
  can be <a data-link-type="dfn" href="#transaction-created" id="ref-for-transaction-created-6">created</a> using <var>connection</var>. All methods that <a data-link-type="dfn" href="#transaction-created" id="ref-for-transaction-created-7">create</a> transactions first check the <a data-link-type="dfn" href="#connection-close-pending-flag" id="ref-for-connection-close-pending-flag-8">close pending flag</a> first and throw an exception if it is set. </aside>
    <aside class="note" role="note"> Once the <a data-link-type="dfn" href="#connection" id="ref-for-connection-46">connection</a> is closed, this can unblock the <a data-link-type="dfn" href="#request-steps-for-running-an-upgrade-transaction" id="ref-for-request-steps-for-running-an-upgrade-transaction-4">steps for
  running an upgrade transaction</a>, and the <a data-link-type="dfn" href="#request-steps-for-deleting-a-database" id="ref-for-request-steps-for-deleting-a-database-2">steps for deleting a
  database</a>, which <a href="#delete-close-block">both</a> <a href="#version-change-close-block">wait</a> for <a data-link-type="dfn" href="#connection" id="ref-for-connection-47">connections</a> to
  a given <a data-link-type="dfn" href="#database" id="ref-for-database-47">database</a> to be closed before continuing. </aside>
    <h3 class="heading settled" data-level="5.3" id="deleting-a-database"><span class="secno">5.3. </span><span class="content">Deleting a database</span><a class="self-link" href="#deleting-a-database"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-deleting-a-database">steps for deleting a database</dfn> are as follows. The
algorithm in these steps takes three arguments: the <var>origin</var> that
requested the <a data-link-type="dfn" href="#database" id="ref-for-database-48">database</a> to be deleted, a database <var>name</var>, and a <var>request</var>.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>queue</var> be the <a data-link-type="dfn" href="#request-connection-queue" id="ref-for-request-connection-queue-4">connection queue</a> for <var>origin</var> and <var>name</var>.</p>
      <li data-md="">
       <p>Add <var>request</var> to <var>queue</var>.</p>
      <li data-md="">
       <p>Wait until all previous requests in <var>queue</var> have been processed.</p>
      <li data-md="">
       <p>Let <var>db</var> be the <a data-link-type="dfn" href="#database" id="ref-for-database-49">database</a> <a data-link-type="dfn" href="#database-name" id="ref-for-database-name-5">named</a> <var>name</var> in <var>origin</var>, if one exists. Otherwise, return 0 (zero).</p>
      <li data-md="">
       <p>Let <var>openConnections</var> be the set of all <a data-link-type="dfn" href="#connection" id="ref-for-connection-48">connections</a> associated with <var>db</var>.</p>
      <li data-md="">
       <p>For each <var>entry</var> in <var>openConnections</var> that does not have its <a data-link-type="dfn" href="#connection-close-pending-flag" id="ref-for-connection-close-pending-flag-9">close pending flag</a> set, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to <a data-link-type="dfn" href="#request-fire-a-version-change-event" id="ref-for-request-fire-a-version-change-event-4">fire a version
change event</a> named <code>versionchange</code> at <var>entry</var> with <var>db</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-15">version</a> and null.</p>
       <aside class="note" role="note"> Firing this event might cause one or more of the other objects
  in <var>openConnections</var> to be closed, in which case the <code>versionchange</code> event must not be fired at those
  objects if that hasn’t yet been done. </aside>
      <li data-md="">
       <p>Wait for all of the events to be fired.</p>
      <li data-md="">
       <p>If any of the <a data-link-type="dfn" href="#connection" id="ref-for-connection-49">connections</a> in <var>openConnections</var> are
still not closed, <a data-link-type="dfn" href="#request-fire-a-version-change-event" id="ref-for-request-fire-a-version-change-event-5">fire a version change event</a> named <code><a data-link-type="dfn" href="#request-blocked" id="ref-for-request-blocked-4">blocked</a></code> at <var>request</var> with <var>db</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-16">version</a> and null.</p>
      <li data-md="">
       <p><span id="delete-close-block">Wait</span> until all <a data-link-type="dfn" href="#connection" id="ref-for-connection-50">connections</a> in <var>openConnections</var> are <a data-link-type="dfn" href="#connection-closed" id="ref-for-connection-closed-8">closed</a>.</p>
      <li data-md="">
       <p>Let <var>version</var> be <var>db</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-17">version</a>.</p>
      <li data-md="">
       <p>Delete <var>db</var>. If this fails for any reason, return an appropriate
error (e.g. <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-quotaexceedederror" id="ref-for-exceptiondef-request-quotaexceedederror-6">QuotaExceededError</a></code> or <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-unknownerror" id="ref-for-exceptiondef-request-unknownerror-4">UnknownError</a></code>).</p>
      <li data-md="">
       <p>Return <var>version</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="5.4" id="commit-transaction"><span class="secno">5.4. </span><span class="content">Committing a transaction</span><a class="self-link" href="#commit-transaction"></a></h3>
    <p>When taking the <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-committing-a-transaction">steps for committing a transaction</dfn> the
implementation must execute the following algorithm. This algorithm
takes one argument, the <var>transaction</var> to commit.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>All the changes made to the <a data-link-type="dfn" href="#database" id="ref-for-database-50">database</a> by <var>transaction</var> are
written to the <a data-link-type="dfn" href="#database" id="ref-for-database-51">database</a>.</p>
      <li data-md="">
       <p>If an error occurs while writing the changes to the <a data-link-type="dfn" href="#database" id="ref-for-database-52">database</a>, abort the transaction by following the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-7">steps
for aborting a transaction</a> with <var>transaction</var> and an
appropriate for the error, for example <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-quotaexceedederror" id="ref-for-exceptiondef-request-quotaexceedederror-7">QuotaExceededError</a></code> or <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-unknownerror" id="ref-for-exceptiondef-request-unknownerror-5">UnknownError</a></code>.</p>
      <li data-md="">
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to dispatch an event at <var>transaction</var>. The
event must use the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event">Event</a> interface and have its <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> set to "<code>complete</code>". The event does not
bubble and is not cancelable.</p>
       <aside class="note" role="note"> Even if an exception is thrown from one of the event handlers of
  this event, the transaction is still committed since writing the
  database changes happens before the event takes places. Only
  after the transaction has been successfully written is the
  "<code>complete</code>" event fired. </aside>
     </ol>
    </div>
    <h3 class="heading settled" data-level="5.5" id="abort-transaction"><span class="secno">5.5. </span><span class="content">Aborting a transaction</span><a class="self-link" href="#abort-transaction"></a></h3>
    <p>When taking the <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-aborting-a-transaction">steps for aborting a transaction</dfn> the
implementation must execute the following algorithm. This algorithm
takes two arguments: the <var>transaction</var> to abort, and <var>error</var>.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>All the changes made to the <a data-link-type="dfn" href="#database" id="ref-for-database-53">database</a> by the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-56">transaction</a> are reverted. For <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-38">upgrade transactions</a> this includes changes
to the set of <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-88">object stores</a> and <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-34">indexes</a>, as well as the
change to the <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-18">version</a>. Any <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-89">object stores</a> and <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-35">indexes</a> which were created during the transaction are now
considered deleted for the purposes of other algorithms.</p>
      <li data-md="">
       <p>If <var>transaction</var> is an <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-39">upgrade transactions</a>, run the <a data-link-type="dfn" href="#request-steps-for-aborting-an-upgrade-transaction" id="ref-for-request-steps-for-aborting-an-upgrade-transaction-2">steps
for aborting an upgrade transaction</a> with <var>transaction</var>. This
reverts changes to all <a data-link-type="dfn" href="#connection" id="ref-for-connection-51">connection</a>, <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-62">object store handle</a>,
and <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-39">index handle</a> instances associated with <var>transaction</var>.</p>
      <li data-md="">
       <p>If <var>error</var> is not null, set <var>transaction</var>’s <a data-link-type="dfn" href="#transaction-error" id="ref-for-transaction-error-2">error</a> to <var>error</var>.</p>
      <li data-md="">
       <p>For each <var>request</var> in <var>transaction</var>’s <a data-link-type="dfn" href="#transaction-request-list" id="ref-for-transaction-request-list-1">request list</a> with <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-12">done flag</a> unset, abort the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-25">steps for asynchronously
executing a request</a> for <var>request</var> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to
run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Set the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-13">done flag</a> on <var>request</var>.</p>
        <li data-md="">
         <p>Set the <a data-link-type="dfn" href="#request-result" id="ref-for-request-result-6">result</a> of <var>request</var> to undefined.</p>
        <li data-md="">
         <p>Set the <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-6">error</a> of <var>request</var> to a newly <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception">created</a> <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-aborterror" id="ref-for-exceptiondef-request-aborterror-5">AbortError</a></code>.</p>
        <li data-md="">
         <p>Dispatch an event at <var>request</var>. The event must use the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event">Event</a> interface and have its <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> set to
"<code>error</code>". The event bubbles and is cancelable.</p>
       </ol>
       <aside class="note" role="note"> This does not always result in any <code>error</code> events
  being fired. For example if a transaction is aborted due to an
  error while <a data-link-type="dfn" href="#transaction-commit" id="ref-for-transaction-commit-4">committing</a> the transaction,
  or if it was the last remaining request that failed. </aside>
      <li data-md="">
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to dispatch an event at <var>transaction</var>. The event
must use the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event">Event</a> interface and have its <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> set
to "<code>abort</code>". The event does bubble but is not
cancelable.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="5.6" id="async-execute-request"><span class="secno">5.6. </span><span class="content">Asynchronously executing a <a data-link-type="dfn" href="#request" id="ref-for-request-30">request</a></span><a class="self-link" href="#async-execute-request"></a></h3>
    <p>When taking the <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-lt="steps for asynchronously executing a request" data-noexport="" id="request-steps-for-asynchronously-executing-a-request">steps for asynchronously executing a
request</dfn> the implementation must run the following algorithm. The
algorithm takes a <var>source</var> object and an <var>operation</var> to perform on a
database, and an optional <var>request</var>.</p>
    <p>These steps can be aborted at any point if the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-57">transaction</a> the
created <a data-link-type="dfn" href="#request" id="ref-for-request-31">request</a> belongs to is <a data-link-type="dfn" href="#transaction-abort" id="ref-for-transaction-abort-7">aborted</a> using the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-8">steps for
aborting a transaction</a></p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>transaction</var> be the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-58">transaction</a> associated with <var>source</var>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is not <a data-link-type="dfn" href="#transaction-active" id="ref-for-transaction-active-36">active</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-transactioninactiveerror" id="ref-for-exceptiondef-request-transactioninactiveerror-31">TransactionInactiveError</a></code>.</p>
      <li data-md="">
       <p>If <var>request</var> was not given, let <var>request</var> be a new <var>request</var> with <a data-link-type="dfn" href="#request-source" id="ref-for-request-source-4">source</a> as <var>source</var></p>
      <li data-md="">
       <p>Add <var>request</var> to the end of <var>transaction</var>’s <a data-link-type="dfn" href="#transaction-request-list" id="ref-for-transaction-request-list-2">request list</a>.</p>
      <li data-md="">
       <p>Return <var>request</var> and queue up the execution of the remaining steps
in this algorithm.</p>
      <li data-md="">
       <p>Wait until all previously added <a data-link-type="dfn" href="#request" id="ref-for-request-32">requests</a> in <var>transaction</var> have their <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-14">done flag</a> set.</p>
      <li data-md="">
       <p>Let <var>result</var> be the result of performing <var>operation</var>.</p>
      <li data-md="">
       <p>If <var>result</var> is an error, then revert all changes made by <var>operation</var>.</p>
       <aside class="note" role="note"> This only reverts the changes done by this request, not any
  other changes made by the transaction. </aside>
      <li data-md="">
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Set the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-15">done flag</a> on <var>request</var>.</p>
        <li data-md="">
         <p>If <var>result</var> is an error, then run these substeps:</p>
         <ol>
          <li data-md="">
           <p>Set the <a data-link-type="dfn" href="#request-result" id="ref-for-request-result-7">result</a> of <var>request</var> to undefined.</p>
          <li data-md="">
           <p>Set the <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-7">error</a> of <var>request</var> to <var>result</var>.</p>
          <li data-md="">
           <p><a data-link-type="dfn" href="#request-fire-an-error-event" id="ref-for-request-fire-an-error-event-3">Fire an error event</a> at <var>request</var>.</p>
         </ol>
        <li data-md="">
         <p>Otherwise, run these substeps:</p>
         <ol>
          <li data-md="">
           <p>Set the <a data-link-type="dfn" href="#request-result" id="ref-for-request-result-8">result</a> of <var>request</var> to <var>result</var>.</p>
          <li data-md="">
           <p>Set the <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-8">error</a> of <var>request</var> to undefined.</p>
          <li data-md="">
           <p><a data-link-type="dfn" href="#request-fire-a-success-event" id="ref-for-request-fire-a-success-event-3">Fire a success event</a> at <var>request</var>.</p>
         </ol>
       </ol>
     </ol>
    </div>
    <h3 class="heading settled" data-level="5.7" id="upgrade-transaction-steps"><span class="secno">5.7. </span><span class="content">Running an upgrade transaction</span><a class="self-link" href="#upgrade-transaction-steps"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-running-an-upgrade-transaction">steps for running an upgrade transaction</dfn> are as
follows. This algorithm takes three arguments: a <var>connection</var> object
which is used to update the <a data-link-type="dfn" href="#database" id="ref-for-database-54">database</a>, a new <var>version</var> to be set
for the <a data-link-type="dfn" href="#database" id="ref-for-database-55">database</a>, and a <var>request</var>.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>db</var> be <var>connection</var>’s <a data-link-type="dfn" href="#database" id="ref-for-database-56">database</a>.</p>
      <li data-md="">
       <p>Let <var>transaction</var> be a new <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-40">upgrade transaction</a> with <var>connection</var> used as <a data-link-type="dfn" href="#connection" id="ref-for-connection-52">connection</a>. The <a data-link-type="dfn" href="#transaction-scope" id="ref-for-transaction-scope-14">scope</a> of <var>transaction</var> includes every <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-90">object store</a> in <var>connection</var>.</p>
      <li data-md="">
       <p>Unset <var>transaction</var>’s <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-6">active flag</a>.</p>
      <li data-md="">
       <p>Start <var>transaction</var>.</p>
       <aside class="note" role="note"> Note that until this <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-59">transaction</a> is finished, no
  other <a data-link-type="dfn" href="#connection" id="ref-for-connection-53">connections</a> can be opened to the same <a data-link-type="dfn" href="#database" id="ref-for-database-57">database</a>. </aside>
      <li data-md="">
       <p>Let <var>old version</var> be <var>db</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-19">version</a>.</p>
      <li data-md="">
       <p>Set the version of <var>db</var> to <var>version</var>. This change is
considered part of the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-60">transaction</a>, and so if the
transaction is <a data-link-type="dfn" href="#transaction-abort" id="ref-for-transaction-abort-8">aborted</a>, this change is reverted.</p>
      <li data-md="">
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to run the following steps:</p>
       <ol>
        <li data-md="">
         <p>Set <var>request</var>’s <a data-link-type="dfn" href="#request-result" id="ref-for-request-result-9">result</a> to <var>connection</var>.</p>
        <li data-md="">
         <p>Set <var>request</var>’s <a data-link-type="dfn" href="#request-transaction" id="ref-for-request-transaction-4">transaction</a> to <var>transaction</var>.</p>
        <li data-md="">
         <p>Set the <a data-link-type="dfn" href="#request-done-flag" id="ref-for-request-done-flag-16">done flag</a> on the <a data-link-type="dfn" href="#request" id="ref-for-request-33">request</a>.</p>
        <li data-md="">
         <p><a data-link-type="dfn" href="#request-fire-a-version-change-event" id="ref-for-request-fire-a-version-change-event-6">Fire a version change event</a> named <code><a data-link-type="dfn" href="#request-upgradeneeded" id="ref-for-request-upgradeneeded-10">upgradeneeded</a></code> at <var>request</var> with <var>old
version</var> and <var>version</var>.</p>
        <li data-md="">
         <p>If an exception was propagated out from any event handler while
dispatching the event in the previous step, abort the
transaction by following the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-9">steps for aborting a
transaction</a> with the <var>error</var> property set to a newly <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception">created</a> <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-aborterror" id="ref-for-exceptiondef-request-aborterror-6">AbortError</a></code>.</p>
       </ol>
      <li data-md="">
       <p>Wait for <var>transaction</var> to <a data-link-type="dfn" href="#transaction-finish" id="ref-for-transaction-finish-14">finish</a>.</p>
      <li data-md="">
       <p>If <var>transaction</var> is aborted for any reason, the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-10">steps for
aborting a transaction</a> must be run.</p>
      <li data-md="">
       <p>When <var>transaction</var> is finished, immediately set <var>request</var>’s <a data-link-type="dfn" href="#request-transaction" id="ref-for-request-transaction-5">transaction</a> to null. This must be done in the same
task as the task firing the <code>complete</code> or <code>abort</code> event, but after the event has been fired.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="5.8" id="abort-upgrade-transaction"><span class="secno">5.8. </span><span class="content">Aborting an upgrade transaction</span><a class="self-link" href="#abort-upgrade-transaction"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-aborting-an-upgrade-transaction">steps for aborting an upgrade transaction</dfn> <var>transaction</var> are as follows.</p>
    <aside class="note" role="note"> The steps are run after the normal <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-11">steps for aborting a
  transaction</a>, which revert changes to the <a data-link-type="dfn" href="#database" id="ref-for-database-58">database</a> including
  the set of associated <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-91">object stores</a> and <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-36">indexes</a>, as well
  as the change to the <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-20">version</a>. </aside>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>connection</var> be <var>transaction</var>’s <a data-link-type="dfn" href="#connection" id="ref-for-connection-54">connection</a>.</p>
      <li data-md="">
       <p>Let <var>database</var> be <var>connection</var>’s <a data-link-type="dfn" href="#database" id="ref-for-database-59">database</a>.</p>
      <li data-md="">
       <p>Set <var>connection</var>’s <a data-link-type="dfn" href="#connection-version" id="ref-for-connection-version-4">version</a> to <var>database</var>’s <a data-link-type="dfn" href="#database-version" id="ref-for-database-version-21">version</a> if <var>database</var> previously existed, or 0 (zero)
if <var>database</var> was newly created.</p>
       <aside class="note" role="note"> This reverts the value of <code class="idl"><a data-link-type="idl" href="#dom-idbdatabase-version" id="ref-for-dom-idbdatabase-version-2">version</a></code> returned by the <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-12">IDBDatabase</a></code> object. </aside>
      <li data-md="">
       <p>Set <var>connection</var>’s <a data-link-type="dfn" href="#connection-object-store-set" id="ref-for-connection-object-store-set-4">object store set</a> to the set of <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-92">object stores</a> in <var>database</var> if <var>database</var> previously
existed, or the empty set if <var>database</var> was newly created.</p>
       <aside class="note" role="note"> This reverts the value of <code class="idl"><a data-link-type="idl" href="#dom-idbdatabase-objectstorenames" id="ref-for-dom-idbdatabase-objectstorenames-4">objectStoreNames</a></code> returned
  by the <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-13">IDBDatabase</a></code> object. </aside>
      <li data-md="">
       <p>For each <a data-link-type="dfn" href="#object-store-handle" id="ref-for-object-store-handle-63">object store handle</a> <var>handle</var> associated with <var>transaction</var>, including those for <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-93">object stores</a> that
were created or deleted during <var>transaction</var>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>If <var>handle</var>’s <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-20">object store</a> was not
newly created during <var>transaction</var>, set <var>handle</var>’s <a data-link-type="dfn" href="#object-store-handle-name" id="ref-for-object-store-handle-name-2">name</a> to its <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-21">object store</a>'s <a data-link-type="dfn" href="#object-store-name" id="ref-for-object-store-name-15">name</a>.</p>
        <li data-md="">
         <p>Set <var>handle</var>’s <a data-link-type="dfn" href="#object-store-handle-index-set" id="ref-for-object-store-handle-index-set-5">index set</a> to the set of <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-37">indexes</a> that
reference its <a data-link-type="dfn" href="#object-store-handle-object-store" id="ref-for-object-store-handle-object-store-22">object store</a>.</p>
       </ol>
       <aside class="note" role="note">
         This reverts the values of <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-name" id="ref-for-dom-idbobjectstore-name-4">name</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-indexnames" id="ref-for-dom-idbobjectstore-indexnames-4">indexNames</a></code> returned by related <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-18">IDBObjectStore</a></code> objects. 
        <p>Although script cannot access an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-94">object store</a> by using the <code class="idl"><a data-link-type="idl" href="#dom-idbtransaction-objectstore" id="ref-for-dom-idbtransaction-objectstore-2">objectStore()</a></code> method on an <code class="idl"><a data-link-type="idl" href="#request-idbtransaction" id="ref-for-request-idbtransaction-9">IDBTransaction</a></code> instance after
  the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-61">transaction</a> is aborted, it may still have references to <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-19">IDBObjectStore</a></code> instances where the <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-name" id="ref-for-dom-idbobjectstore-name-5">name</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-indexnames" id="ref-for-dom-idbobjectstore-indexnames-5">indexNames</a></code> properties can be queried.</p>
       </aside>
      <li data-md="">
       <p>For each <a data-link-type="dfn" href="#index-handle" id="ref-for-index-handle-40">index handle</a> <var>handle</var> associated with <var>transaction</var>,
including those for <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-38">indexes</a> that were created or deleted
during <var>transaction</var>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>If <var>handle</var>’s <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-13">index</a> was not newly created
during <var>transaction</var>, set <var>handle</var>’s <a data-link-type="dfn" href="#index-handle-name" id="ref-for-index-handle-name-2">name</a> to
its <a data-link-type="dfn" href="#index-handle-index" id="ref-for-index-handle-index-14">index</a>'s <a data-link-type="dfn" href="#index-name" id="ref-for-index-name-13">name</a>.</p>
       </ol>
       <aside class="note" role="note">
         This reverts the value of <code class="idl"><a data-link-type="idl" href="#dom-idbindex-name" id="ref-for-dom-idbindex-name-4">name</a></code> returned by related <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-12">IDBIndex</a></code> objects. 
        <p>Although script cannot access an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-39">index</a> by using the <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-index" id="ref-for-dom-idbobjectstore-index-2">index()</a></code> method on an <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-20">IDBObjectStore</a></code> instance after the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-62">transaction</a> is aborted, it may still have references to <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-13">IDBIndex</a></code> instances where the <code class="idl"><a data-link-type="idl" href="#dom-idbindex-name" id="ref-for-dom-idbindex-name-5">name</a></code> property can
  be queried.</p>
       </aside>
     </ol>
    </div>
    <aside class="note" role="note"> The <code class="idl"><a data-link-type="idl" href="#dom-idbdatabase-name" id="ref-for-dom-idbdatabase-name-2">name</a></code> property of the <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-14">IDBDatabase</a></code> instance is
  not modified, even if the aborted <a data-link-type="dfn" href="#upgrade-transaction" id="ref-for-upgrade-transaction-41">upgrade transaction</a> was
  creating a new <a data-link-type="dfn" href="#database" id="ref-for-database-60">database</a>. </aside>
    <h3 class="heading settled" data-level="5.9" id="fire-success-event"><span class="secno">5.9. </span><span class="content">Firing a success event</span><a class="self-link" href="#fire-success-event"></a></h3>
    <p>To <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-fire-a-success-event">fire a success event</dfn> at a <a data-link-type="dfn" href="#request" id="ref-for-request-34">request</a>,
the implementation must run the following steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Set <var>transaction</var> to the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-63">transaction</a> associated with
the <a data-link-type="dfn" href="#request-source" id="ref-for-request-source-5">source</a>.</p>
      <li data-md="">
       <p>Set the <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-7">active flag</a> of <var>transaction</var>.</p>
      <li data-md="">
       <p>Dispatch an event at <a data-link-type="dfn" href="#request" id="ref-for-request-35">request</a>. The event must use the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event">Event</a> interface and have its <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> set to
"<code>success</code>". The event does not bubble and is not
cancelable.</p>
      <li data-md="">
       <p>Unset the <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-8">active flag</a> of <var>transaction</var>.</p>
      <li data-md="">
       <p>If an exception was propagated out from any event handler while
dispatching the event in step 3, abort the transaction by
following the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-12">steps for aborting a transaction</a> with <var>transaction</var> and a newly <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception">created</a> <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-aborterror" id="ref-for-exceptiondef-request-aborterror-7">AbortError</a></code>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="5.10" id="fire-error-event"><span class="secno">5.10. </span><span class="content">Firing an error event</span><a class="self-link" href="#fire-error-event"></a></h3>
    <p>To <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-fire-an-error-event">fire an error event</dfn> at a <var>request</var>,
the implementation must run the following steps:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Set <var>transaction</var> to the <a data-link-type="dfn" href="#transaction-concept" id="ref-for-transaction-concept-64">transaction</a> associated with
the <a data-link-type="dfn" href="#request-source" id="ref-for-request-source-6">source</a>.</p>
      <li data-md="">
       <p>Set the <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-9">active flag</a> of <var>transaction</var>.</p>
      <li data-md="">
       <p>Dispatch an event at <var>request</var>. The event must use the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event">Event</a> interface and have its <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> set to "<code>error</code>".
The event bubbles and is cancelable.</p>
      <li data-md="">
       <p>Unset the <a data-link-type="dfn" href="#transaction-active-flag" id="ref-for-transaction-active-flag-10">active flag</a> of <var>transaction</var>.</p>
      <li data-md="">
       <p>If an exception was propagated out from any event handler while
dispatching the event in step 3, abort the transaction by
following the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-13">steps for aborting a transaction</a> with <var>transaction</var> and a newly <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception">created</a> <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-aborterror" id="ref-for-exceptiondef-request-aborterror-8">AbortError</a></code> and terminate these steps. This is done even if the
event’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#canceled-flag">canceled flag</a> is not set.</p>
       <aside class="note" role="note"> This means that if an error event is fired and any of the event
  handlers throw an exception, <var>transaction</var>’s <code class="idl"><a data-link-type="idl" href="#dom-idbtransaction-error" id="ref-for-dom-idbtransaction-error-2">error</a></code> property is set to an <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-aborterror" id="ref-for-exceptiondef-request-aborterror-9">AbortError</a></code> rather than <var>request</var>’s <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-9">error</a>, even if <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault">preventDefault()</a></code> is never called. </aside>
      <li data-md="">
       <p>If the event’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#canceled-flag">canceled flag</a> is not set, run the <a data-link-type="dfn" href="#request-steps-for-aborting-a-transaction" id="ref-for-request-steps-for-aborting-a-transaction-14">steps
for aborting a transaction</a> using <var>transaction</var> and <a data-link-type="dfn" href="#request" id="ref-for-request-36">request</a>'s <a data-link-type="dfn" href="#request-error" id="ref-for-request-error-10">error</a>.</p>
     </ol>
    </div>
    <h2 class="heading settled" data-level="6" id="database-operations"><span class="secno">6. </span><span class="content">Database operations</span><a class="self-link" href="#database-operations"></a></h2>
    <p>This section describes various operations done on the data in <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-95">object stores</a> and <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-40">indexes</a> in a <a data-link-type="dfn" href="#database" id="ref-for-database-61">database</a>.
These operations are run by the <a data-link-type="dfn" href="#request-steps-for-asynchronously-executing-a-request" id="ref-for-request-steps-for-asynchronously-executing-a-request-26">steps for asynchronously executing
a request</a>.</p>
    <h3 class="heading settled" data-level="6.1" id="object-store-storage-operation"><span class="secno">6.1. </span><span class="content">Object Store Storage Operation</span><a class="self-link" href="#object-store-storage-operation"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-storing-a-record-into-an-object-store">steps for storing a record into an object store</dfn> with <var>store</var>, <var>value</var>, an optional <var>key</var>, and a <var>no-overwrite flag</var> are as
follows.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>store</var> uses <a data-link-type="dfn" href="#object-store-in-line-keys" id="ref-for-object-store-in-line-keys-7">in-line keys</a>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>kpk</var> be the result of running the steps to <a data-link-type="dfn" href="#request-extract-a-key-from-a-value-using-a-key-path" id="ref-for-request-extract-a-key-from-a-value-using-a-key-path-5">extract a
key from a value using a key path</a> with <var>value</var> and <var>store</var>’s <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-17">key path</a>.</p>
        <li data-md="">
         <p class="assertion">Assert: <var>kpk</var> will not be invalid or an exception.</p>
        <li data-md="">
         <p>If <var>kpk</var> is not failure, let <var>key</var> be <var>kpk</var>.</p>
       </ol>
      <li data-md="">
       <p>If <var>store</var> uses a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-18">key generator</a>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>If <var>key</var> is undefined, run these substeps:</p>
         <ol>
          <li data-md="">
           <p>If the <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-19">key generator</a>'s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-19">current number</a> is
greater than 2<sup>53</sup> (9007199254740992), then this
operation failed with a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-8">ConstraintError</a></code>. Abort this
algorithm without taking any further steps.</p>
          <li data-md="">
           <p>Set <var>key</var> to the <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-20">key generator</a>'s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-20">current number</a></p>
          <li data-md="">
           <p>Increase the <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-21">key generator</a>'s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-21">current number</a> by 1.</p>
          <li data-md="">
           <p>If <var>store</var> also uses <a data-link-type="dfn" href="#object-store-in-line-keys" id="ref-for-object-store-in-line-keys-8">in-line keys</a>, then run the
steps to <a data-link-type="dfn" href="#request-inject-a-key-into-a-value-using-a-key-path" id="ref-for-request-inject-a-key-into-a-value-using-a-key-path-1">inject a key into a value using a key path</a> with <var>value</var>, <var>key</var> and <var>store</var>’s <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-18">key
path</a>.</p>
         </ol>
        <li data-md="">
         <p>Otherwise, if the <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-8">type</a> of <var>key</var> is <i>number</i> and the <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-6">value</a> is greater than or equal to the <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-22">key generator</a>'s <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-22">current number</a>, set the <a data-link-type="dfn" href="#request-current-number" id="ref-for-request-current-number-23">current number</a> to lowest integer greater than <var>key</var>.</p>
       </ol>
      <li data-md="">
       <p>If the <var>no-overwrite flag</var> was given to these steps and is set, and
a <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-36">record</a> already exists in <var>store</var> with its key <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-13">equal to</a> <var>key</var>, then this operation failed with a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-9">ConstraintError</a></code>.
Abort this algorithm without taking any further steps.</p>
      <li data-md="">
       <p>If a <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-37">record</a> already exists in <var>store</var> with its key <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-14">equal
to</a> <var>key</var>, then remove the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-38">record</a> from <var>store</var> using the <a data-link-type="dfn" href="#request-steps-for-deleting-records-from-an-object-store" id="ref-for-request-steps-for-deleting-records-from-an-object-store-3">steps for deleting records from an object store</a>.</p>
      <li data-md="">
       <p>Store a record in <var>store</var> containing <var>key</var> as its key and <var>value</var> as its value. The record is stored in the object store’s <a data-link-type="dfn" href="#object-store-list-of-records" id="ref-for-object-store-list-of-records-1">list of records</a> such that the list is sorted
according key of the records in ascending order.</p>
      <li data-md="">
       <p>For each <var>index</var> which <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-9">reference</a> <var>store</var>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>index key</var> be the result of running the steps to <a data-link-type="dfn" href="#request-extract-a-key-from-a-value-using-a-key-path" id="ref-for-request-extract-a-key-from-a-value-using-a-key-path-6">extract a key from a value using a key path</a> with <var>value</var>, <var>index</var>’s <a data-link-type="dfn" href="#index-key-path" id="ref-for-index-key-path-5">key path</a>, and <var>index</var>’s <a data-link-type="dfn" href="#index-multientry-flag" id="ref-for-index-multientry-flag-5">multiEntry flag</a>.</p>
        <li data-md="">
         <p>If <var>index key</var> is an exception, or invalid, or failure, take no
further actions for this index, and continue these substeps
for the next index.</p>
         <aside class="note" role="note"> An exception thrown in this step is not rethrown. </aside>
        <li data-md="">
         <p>If <var>index</var>’s <a data-link-type="dfn" href="#index-multientry-flag" id="ref-for-index-multientry-flag-6">multiEntry flag</a> is unset, or if <var>index key</var> is not an <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-5">array key</a>, and if <var>index</var> already contains a <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-39">record</a> with <a data-link-type="dfn" href="#key" id="ref-for-key-61">key</a> <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-15">equal to</a> <var>index
key</var>, and <var>index</var> has its <a data-link-type="dfn" href="#index-unique-flag" id="ref-for-index-unique-flag-7">unique flag</a> set, then this
operation failed with a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-10">ConstraintError</a></code>. Abort this
algorithm without taking any further steps.</p>
        <li data-md="">
         <p>If <var>index</var>’s <a data-link-type="dfn" href="#index-multientry-flag" id="ref-for-index-multientry-flag-7">multiEntry flag</a> is set and <var>index key</var> is
an <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-6">array key</a>, and if <var>index</var> already contains a <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-40">record</a> with <a data-link-type="dfn" href="#key" id="ref-for-key-62">key</a> <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-16">equal to</a> any of the <a data-link-type="dfn" href="#subkeys" id="ref-for-subkeys-2">subkeys</a> of <var>index key</var>, and <var>index</var> has its <a data-link-type="dfn" href="#index-unique-flag" id="ref-for-index-unique-flag-8">unique
flag</a> set, then this operation failed with a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-constrainterror" id="ref-for-exceptiondef-request-constrainterror-11">ConstraintError</a></code>. Abort this algorithm without taking any
further steps.</p>
        <li data-md="">
         <p>If <var>index</var>’s <a data-link-type="dfn" href="#index-multientry-flag" id="ref-for-index-multientry-flag-8">multiEntry flag</a> is unset, or if <var>index key</var> is not an <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-7">array key</a> then store a record in <var>index</var> containing <var>index key</var> as its key and <var>key</var> as its value. The
record is stored in <var>index</var>’s <a data-link-type="dfn" href="#index-list-of-records" id="ref-for-index-list-of-records-1">list of records</a> such that the list is sorted primarily on the records keys,
and secondarily on the records values, in ascending order.</p>
        <li data-md="">
         <p>If <var>index</var>’s <a data-link-type="dfn" href="#index-multientry-flag" id="ref-for-index-multientry-flag-9">multiEntry flag</a> is set and <var>index key</var> is
an <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-8">array key</a>, then for each <var>subkey</var> of the <a data-link-type="dfn" href="#subkeys" id="ref-for-subkeys-3">subkeys</a> of <var>index key</var> store a record in <var>index</var> containing <var>subkey</var> as its key and <var>key</var> as its value. The
records are stored in <var>index</var>’s <a data-link-type="dfn" href="#index-list-of-records" id="ref-for-index-list-of-records-2">list of
records</a> such that the list is sorted primarily on the
records keys, and secondarily on the records values, in
ascending order.</p>
         <aside class="note" role="note"> It is valid for there to be no <a data-link-type="dfn" href="#subkeys" id="ref-for-subkeys-4">subkeys</a>. In this case
  no records are added to the index. </aside>
         <aside class="note" role="note"> Even if any member of <a data-link-type="dfn" href="#subkeys" id="ref-for-subkeys-5">subkeys</a> is itself an <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-9">array key</a>,
  the member is used directly as the key for the index record.
  Nested <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-10">array keys</a> are not flattened or "unpacked" to
  produce multiple rows; only the outer-most <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-11">array key</a> is. </aside>
       </ol>
      <li data-md="">
       <p>Return <var>key</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="6.2" id="object-store-retrieval-operation"><span class="secno">6.2. </span><span class="content">Object Store Retrieval Operations</span><a class="self-link" href="#object-store-retrieval-operation"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-retrieving-a-value-from-an-object-store">steps for retrieving a value from an object store</dfn> with <var>store</var> and <var>range</var> are as follows:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>record</var> be the first <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-41">record</a> in <var>store</var>’s <a data-link-type="dfn" href="#object-store-list-of-records" id="ref-for-object-store-list-of-records-2">list of records</a> whose key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-3">in</a> <var>range</var>, if
any.</p>
      <li data-md="">
       <p>If <var>record</var> was not found, return undefined.</p>
      <li data-md="">
       <p>Return a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#structuredclone">structured clone</a> of <var>record</var>’s value.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-lt="steps for retrieving multiple values from an object store" data-noexport="" id="request-steps-for-retrieving-multiple-values-from-an-object-store">steps for retrieving multiple values from an object
store</dfn> with <var>store</var>, <var>range</var> and optional <var>count</var> are as follows:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>
      <li data-md="">
       <p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-42">records</a> in <var>store</var>’s <a data-link-type="dfn" href="#object-store-list-of-records" id="ref-for-object-store-list-of-records-3">list of records</a> whose key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-4">in</a> <var>range</var>.</p>
      <li data-md="">
       <p>Let <var>array</var> be a new <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> object.</p>
      <li data-md="">
       <p>Let <var>index</var> be 0.</p>
      <li data-md="">
       <p>For each <var>record</var> in <var>records</var>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>entry</var> be a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#structuredclone">structured clone</a> of <var>record</var>’s value.</p>
        <li data-md="">
         <p>Let <var>status</var> be CreateDataProperty(<var>array</var>, <var>index</var>, <var>entry</var>).</p>
        <li data-md="">
         <p class="assertion">Assert: <var>status</var> is true.</p>
        <li data-md="">
         <p>Increase <var>index</var> by 1.</p>
       </ol>
      <li data-md="">
       <p>Return <var>array</var>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-retrieving-a-key-from-an-object-store">steps for retrieving a key from an object store</dfn> with <var>store</var> and <var>range</var> are as follows:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>record</var> be the first <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-43">record</a> in <var>store</var>’s <a data-link-type="dfn" href="#object-store-list-of-records" id="ref-for-object-store-list-of-records-4">list of records</a> whose key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-5">in</a> <var>range</var>, if
any.</p>
      <li data-md="">
       <p>If <var>record</var> was not found, return undefined.</p>
      <li data-md="">
       <p>Return <var>record</var>’s key.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-retrieving-multiple-keys-from-an-object-store">steps for retrieving multiple keys from an object store</dfn> with <var>store</var>, <var>range</var> and optional <var>count</var> are as follows:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>
      <li data-md="">
       <p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-44">records</a> in <var>store</var>’s <a data-link-type="dfn" href="#object-store-list-of-records" id="ref-for-object-store-list-of-records-5">list of records</a> whose key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-6">in</a> <var>range</var>.</p>
      <li data-md="">
       <p>Let <var>array</var> be a new <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> object.</p>
      <li data-md="">
       <p>Let <var>index</var> be 0.</p>
      <li data-md="">
       <p>For each <var>record</var> in <var>records</var>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>entry</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-key-to-a-value" id="ref-for-request-convert-a-key-to-a-value-5">convert a
key to a value</a> with <var>record</var>’s key.</p>
        <li data-md="">
         <p>Let <var>status</var> be CreateDataProperty(<var>array</var>, <var>index</var>, <var>entry</var>).</p>
        <li data-md="">
         <p class="assertion">Assert: <var>status</var> is true.</p>
        <li data-md="">
         <p>Increase <var>index</var> by 1.</p>
       </ol>
      <li data-md="">
       <p>Return <var>array</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="6.3" id="index-retrieval-operation"><span class="secno">6.3. </span><span class="content">Index Retrieval Operations</span><a class="self-link" href="#index-retrieval-operation"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-retrieving-a-referenced-value-from-an-index">steps for retrieving a referenced value from an index</dfn> with <var>index</var> and <var>range</var> are as follows.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>record</var> be the first <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-45">record</a> in <var>index</var>’s <a data-link-type="dfn" href="#index-list-of-records" id="ref-for-index-list-of-records-3">list of
records</a> whose key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-7">in</a> <var>range</var>, if any.</p>
      <li data-md="">
       <p>If <var>record</var> was not found, return undefined.</p>
      <li data-md="">
       <p>Return a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#structuredclone">structured clone</a> of <var>record</var>’s <a data-link-type="dfn" href="#index-referenced-value" id="ref-for-index-referenced-value-3">referenced
value</a>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-lt="steps for retrieving multiple referenced values from an index" data-noexport="" id="request-steps-for-retrieving-multiple-referenced-values-from-an-index">steps for retrieving multiple referenced values from an
index</dfn> with <var>index</var>, <var>range</var> and optional <var>count</var> are as follows:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>
      <li data-md="">
       <p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-46">records</a> in <var>index</var>’s <a data-link-type="dfn" href="#index-list-of-records" id="ref-for-index-list-of-records-4">list of records</a> whose key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-8">in</a> <var>range</var>.</p>
      <li data-md="">
       <p>Let <var>array</var> be a new <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> object.</p>
      <li data-md="">
       <p>Let <var>index</var> be 0.</p>
      <li data-md="">
       <p>For each <var>record</var> in <var>records</var>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>entry</var> be a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#structuredclone">structured clone</a> of <var>record</var>’s <a data-link-type="dfn" href="#index-referenced-value" id="ref-for-index-referenced-value-4">referenced value</a>.</p>
        <li data-md="">
         <p>Let <var>status</var> be CreateDataProperty(<var>array</var>, <var>index</var>, <var>entry</var>).</p>
        <li data-md="">
         <p class="assertion">Assert: <var>status</var> is true.</p>
        <li data-md="">
         <p>Increase <var>index</var> by 1.</p>
       </ol>
      <li data-md="">
       <p>Return <var>array</var>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-retrieving-a-value-from-an-index">steps for retrieving a value from an index</dfn> with <var>index</var> and <var>range</var> are as follows.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>record</var> be the first <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-47">record</a> in <var>index</var>’s <a data-link-type="dfn" href="#index-list-of-records" id="ref-for-index-list-of-records-5">list of
records</a> whose key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-9">in</a> <var>range</var>, if any.</p>
      <li data-md="">
       <p>If <var>record</var> was not found, return undefined.</p>
      <li data-md="">
       <p>Return <var>record</var>’s <a data-link-type="dfn" href="#value" id="ref-for-value-10">value</a>.</p>
     </ol>
    </div>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-retrieving-multiple-values-from-an-index">steps for retrieving multiple values from an index</dfn> with <var>index</var>, <var>range</var> and optional <var>count</var> are as follows:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>
      <li data-md="">
       <p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-48">records</a> in <var>index</var>’s <a data-link-type="dfn" href="#index-list-of-records" id="ref-for-index-list-of-records-6">list of records</a> whose key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-10">in</a> <var>range</var>.</p>
      <li data-md="">
       <p>Let <var>array</var> be a new <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> object.</p>
      <li data-md="">
       <p>Let <var>index</var> be 0.</p>
      <li data-md="">
       <p>For each <var>record</var> in <var>records</var>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>entry</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-key-to-a-value" id="ref-for-request-convert-a-key-to-a-value-6">convert a
key to a value</a> with <var>record</var>’s value.</p>
        <li data-md="">
         <p>Let <var>status</var> be CreateDataProperty(<var>array</var>, <var>index</var>, <var>entry</var>).</p>
        <li data-md="">
         <p class="assertion">Assert: <var>status</var> is true.</p>
        <li data-md="">
         <p>Increase <var>index</var> by 1.</p>
       </ol>
      <li data-md="">
       <p>Return <var>array</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="6.4" id="object-store-deletion-operation"><span class="secno">6.4. </span><span class="content">Object Store Deletion Operation</span><a class="self-link" href="#object-store-deletion-operation"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-deleting-records-from-an-object-store">steps for deleting records from an object store</dfn> with <var>store</var> and <var>range</var> are as follows.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Remove all records, if any, from <var>store</var>’s <a data-link-type="dfn" href="#object-store-list-of-records" id="ref-for-object-store-list-of-records-6">list
of records</a> with key <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-11">in</a> <var>range</var>.</p>
      <li data-md="">
       <p>For each <var>index</var> which <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-10">references</a> <var>store</var>, remove every <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-49">record</a> from <var>index</var>’s <a data-link-type="dfn" href="#index-list-of-records" id="ref-for-index-list-of-records-7">list of records</a> whose value is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-12">in</a> <var>range</var>, if any such records exist.</p>
      <li data-md="">
       <p>Return undefined.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="6.5" id="record-counting-operation"><span class="secno">6.5. </span><span class="content">Record Counting Operation</span><a class="self-link" href="#record-counting-operation"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-to-count-the-records-in-a-range">steps to count the records in a range</dfn> with <var>source</var> and <var>range</var> are as follows:</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>count</var> be the number of records, if any, in <var>source</var>’s list of
records with key <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-13">in</a> <var>range</var>.</p>
      <li data-md="">
       <p>Return <var>count</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="6.6" id="object-store-clear-operation"><span class="secno">6.6. </span><span class="content">Object Store Clear Operation</span><a class="self-link" href="#object-store-clear-operation"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-clearing-an-object-store">steps for clearing an object store</dfn> with <var>store</var> are as follows.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Remove all records from <var>store</var>.</p>
      <li data-md="">
       <p>In all <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-41">indexes</a> which <a data-link-type="dfn" href="#index-referenced" id="ref-for-index-referenced-11">reference</a> <var>store</var>, remove all <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-50">records</a>.</p>
      <li data-md="">
       <p>Return undefined.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="6.7" id="cursor-iteration-operation"><span class="secno">6.7. </span><span class="content">Cursor Iteration Operation</span><a class="self-link" href="#cursor-iteration-operation"></a></h3>
    <p>The <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-steps-for-iterating-a-cursor">steps for iterating a cursor</dfn> with <var>cursor</var>, an optional <var>key</var> and <var>primaryKey</var> to iterate to, and an optional <var>count</var> are as
follows.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>source</var> be <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-source" id="ref-for-cursor-source-24">source</a>.</p>
      <li data-md="">
       <p>Let <var>direction</var> be <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-direction" id="ref-for-cursor-direction-14">direction</a>.</p>
      <li data-md="">
       <p class="assertion">Assert: if <var>primaryKey</var> is given, <var>source</var> is an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-42">index</a> and <var>direction</var> is <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-next" id="ref-for-dom-idbcursordirection-next-7">"next"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prev" id="ref-for-dom-idbcursordirection-prev-7">"prev"</a></code>.</p>
      <li data-md="">
       <p>Let <var>records</var> be the list of <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-51">records</a> in <var>source</var>.</p>
       <aside class="note" role="note"> <var>records</var> is always sorted in ascending <a data-link-type="dfn" href="#key" id="ref-for-key-63">key</a> order.
  In the case of <var>source</var> being an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-43">index</a>, <var>records</var> is secondarily sorted in ascending <a data-link-type="dfn" href="#value" id="ref-for-value-11">value</a> order
  (where the value in an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-44">index</a> is the <a data-link-type="dfn" href="#key" id="ref-for-key-64">key</a> of the <a data-link-type="dfn" href="#object-store-record" id="ref-for-object-store-record-52">record</a> in the referenced <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-96">object store</a>). </aside>
      <li data-md="">
       <p>Let <var>range</var> be <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-range" id="ref-for-cursor-range-11">range</a>.</p>
      <li data-md="">
       <p>Let <var>position</var> be <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-14">position</a>.</p>
      <li data-md="">
       <p>Let <var>object store position</var> be <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-object-store-position" id="ref-for-cursor-object-store-position-5">object store position</a>.</p>
      <li data-md="">
       <p>If <var>count</var> is not given, let <var>count</var> be 1.</p>
      <li data-md="">
       <p>While <var>count</var> is greater than 0, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Switch on <var>direction</var>:</p>
         <dl class="switch">
          <dt><code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-next" id="ref-for-dom-idbcursordirection-next-8">"next"</a></code>
          <dd>
            Let <var>found record</var> be the first record in <var>records</var> which
    satisfy all of the following requirements: 
           <ul>
            <li data-md="">
             <p>If <var>key</var> is defined, the record’s key is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-9">greater
than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-17">equal to</a> <var>key</var>.</p>
            <li data-md="">
             <p>If <var>primaryKey</var> is defined, the record’s key is <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-18">equal
to</a> <var>key</var> and the record’s value is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-10">greater
than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-19">equal to</a> <var>primaryKey</var>, or the
record’s key is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-11">greater than</a> <var>key</var>.</p>
            <li data-md="">
             <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-97">object store</a>, the record’s key is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-12">greater than</a> <var>position</var>.</p>
            <li data-md="">
             <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-45">index</a>, the record’s key is <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-20">equal to</a> <var>position</var> and the record’s value is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-13">greater
than</a> <var>object store position</var> or the record’s key is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-14">greater than</a> <var>position</var>.</p>
            <li data-md="">
             <p>The record’s key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-14">in</a> <var>range</var>.</p>
           </ul>
          <dt><code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-nextunique" id="ref-for-dom-idbcursordirection-nextunique-5">"nextunique"</a></code>
          <dd>
            Let <var>found record</var> be the first record in <var>records</var> which
    satisfy all of the following requirements: 
           <ul>
            <li data-md="">
             <p>If <var>key</var> is defined, the record’s key is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-15">greater
than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-21">equal to</a> <var>key</var>.</p>
            <li data-md="">
             <p>If <var>position</var> is defined, the record’s key is <a data-link-type="dfn" href="#greater-than" id="ref-for-greater-than-16">greater
than</a> <var>position</var>.</p>
            <li data-md="">
             <p>The record’s key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-15">in</a> <var>range</var>.</p>
           </ul>
          <dt><code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prev" id="ref-for-dom-idbcursordirection-prev-8">"prev"</a></code>
          <dd>
            Let <var>found record</var> be the last record in <var>records</var> which
    satisfy all of the following requirements: 
           <ul>
            <li data-md="">
             <p>If <var>key</var> is defined, the record’s key is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-6">less
than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-22">equal to</a> <var>key</var>.</p>
            <li data-md="">
             <p>If <var>primaryKey</var> is defined, the record’s key is <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-23">equal
to</a> <var>key</var> and the record’s value is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-7">less than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-24">equal to</a> <var>primaryKey</var>, or the record’s key is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-8">less than</a> <var>key</var>.</p>
            <li data-md="">
             <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-98">object store</a>, the record’s key is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-9">less
than</a> <var>position</var>.</p>
            <li data-md="">
             <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-46">index</a>, the record’s key is <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-25">equal to</a> <var>position</var> and the record’s value is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-10">less than</a> <var>object store position</var> or the record’s key is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-11">less than</a> <var>position</var>.</p>
            <li data-md="">
             <p>The record’s key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-16">in</a> <var>range</var>.</p>
           </ul>
          <dt><code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prevunique" id="ref-for-dom-idbcursordirection-prevunique-5">"prevunique"</a></code>
          <dd>
            Let <var>temp record</var> be the last record in <var>records</var> which satisfy all of the following requirements: 
           <ul>
            <li data-md="">
             <p>If <var>key</var> is defined, the record’s key is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-12">less
than</a> or <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-26">equal to</a> <var>key</var>.</p>
            <li data-md="">
             <p>If <var>position</var> is defined, the record’s key is <a data-link-type="dfn" href="#less-than" id="ref-for-less-than-13">less
than</a> <var>position</var>.</p>
            <li data-md="">
             <p>The record’s key is <a data-link-type="dfn" href="#request-in" id="ref-for-request-in-17">in</a> <var>range</var>.</p>
           </ul>
           <p>If <var>temp record</var> is defined, let <var>found record</var> be the
    first record in <var>records</var> whose key is <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-27">equal to</a> <var>temp record</var>’s key.</p>
           <aside class="note" role="note"> Iterating with <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-prevunique" id="ref-for-dom-idbcursordirection-prevunique-6">"prevunique"</a></code> visits the same records that <code class="idl"><a data-link-type="idl" href="#dom-idbcursordirection-nextunique" id="ref-for-dom-idbcursordirection-nextunique-6">"nextunique"</a></code> visits, but in reverse order. </aside>
         </dl>
        <li data-md="">
         <p>If <var>found record</var> is not defined, run these substeps:</p>
         <ol>
          <li data-md="">
           <p>Set <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-key" id="ref-for-cursor-key-7">key</a> to undefined.</p>
          <li data-md="">
           <p>If <var>source</var> is an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-47">index</a>, set <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-object-store-position" id="ref-for-cursor-object-store-position-6">object store position</a> to undefined.</p>
          <li data-md="">
           <p>If <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-key-only-flag" id="ref-for-cursor-key-only-flag-6">key only flag</a> is unset, set <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-value" id="ref-for-cursor-value-8">value</a> to undefined.</p>
          <li data-md="">
           <p>Return null.</p>
         </ol>
        <li data-md="">
         <p>Let <var>position</var> be <var>found record</var>’s key.</p>
        <li data-md="">
         <p>If <var>source</var> is an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-48">index</a>, let <var>object store
position</var> be <var>found record</var>’s value.</p>
        <li data-md="">
         <p>Decrease <var>count</var> by 1.</p>
       </ol>
      <li data-md="">
       <p>Set <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-position" id="ref-for-cursor-position-15">position</a> to <var>position</var>.</p>
      <li data-md="">
       <p>If <var>source</var> is an <a data-link-type="dfn" href="#index-concept" id="ref-for-index-concept-49">index</a>, set <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-object-store-position" id="ref-for-cursor-object-store-position-7">object
store position</a> to <var>object store position</var>.</p>
      <li data-md="">
       <p>Set <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-key" id="ref-for-cursor-key-8">key</a> to <var>found record</var>’s key.</p>
      <li data-md="">
       <p>If <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-key-only-flag" id="ref-for-cursor-key-only-flag-7">key only flag</a> is unset, set <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-value" id="ref-for-cursor-value-9">value</a> to a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#structuredclone">structured clone</a> of <var>found
record</var>’s <a data-link-type="dfn" href="#index-referenced-value" id="ref-for-index-referenced-value-5">referenced value</a>.</p>
      <li data-md="">
       <p>Set <var>cursor</var>’s <a data-link-type="dfn" href="#cursor-got-value-flag" id="ref-for-cursor-got-value-flag-16">got value flag</a>.</p>
      <li data-md="">
       <p>Return <var>cursor</var>.</p>
     </ol>
    </div>
    <h2 class="heading settled" data-level="7" id="binding"><span class="secno">7. </span><span class="content">ECMAScript binding</span><a class="self-link" href="#binding"></a></h2>
    <p>This section defines how <a data-link-type="dfn" href="#key" id="ref-for-key-65">key</a> values defined in this specification
are converted to and from ECMAScript values, and how they may be
extracted from and injected into ECMAScript values using <a data-link-type="dfn" href="#key-path" id="ref-for-key-path-2">key
paths</a>. This section references types and algorithms and uses some
algorithm conventions from the ECMAScript Language Specification. <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a></p>
    <aside class="issue" id="issue-8f674373"><a class="self-link" href="#issue-8f674373"></a> Simplify this section as much as possible by relying more on <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> for key conversion logic. </aside>
    <h3 class="heading settled" data-level="7.1" id="extract-key-from-value"><span class="secno">7.1. </span><span class="content">Extract a key from a value</span><a class="self-link" href="#extract-key-from-value"></a></h3>
    <p>The steps to <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-extract-a-key-from-a-value-using-a-key-path">extract a key from a value using a key path</dfn> with <var>value</var>, <var>keyPath</var> and an optional <var>multiEntry flag</var> are as
follows. The result of these steps is a <a data-link-type="dfn" href="#key" id="ref-for-key-66">key</a>, invalid, or
failure, or the steps may throw an exception.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>r</var> be the result of running the steps to <a data-link-type="dfn" href="#request-evaluate-a-key-path-on-a-value" id="ref-for-request-evaluate-a-key-path-on-a-value-1">evaluate a key
path on a value</a> with <var>value</var> and <var>keyPath</var>. Rethrow any
exceptions.</p>
      <li data-md="">
       <p>If <var>r</var> is failure, return failure.</p>
      <li data-md="">
       <p>Let <var>key</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-16">convert a value
to a key</a> with <var>r</var> if the <var>multiEntry flag</var> is unset, and the
result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-multientry-key" id="ref-for-request-convert-a-value-to-a-multientry-key-1">convert a value to a multiEntry
key</a> with <var>r</var> otherwise. Rethrow any exceptions.</p>
      <li data-md="">
       <p>If <var>key</var> is invalid, return invalid.</p>
      <li data-md="">
       <p>Return <var>key</var>.</p>
     </ol>
    </div>
    <p>The steps to <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-evaluate-a-key-path-on-a-value">evaluate a key path on a value</dfn> with <var>value</var> and <var>keyPath</var> are as follows. The result of these steps is an
ECMAScript value or failure, or the steps may throw an exception.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>keyPath</var> is a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence">sequence&lt;DOMString></a>, run these substeps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>result</var> be a new <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> ECMAScript object.</p>
        <li data-md="">
         <p>For each <var>item</var> in the <var>keyPath</var> sequence, run these substeps:</p>
         <ol>
          <li data-md="">
           <p>Let <var>key</var> be the result of recursively running the steps to <a data-link-type="dfn" href="#request-extract-a-key-from-a-value-using-a-key-path" id="ref-for-request-extract-a-key-from-a-value-using-a-key-path-7">extract a key from a value using a key path</a> using <var>item</var> as <var>keyPath</var> and <var>value</var> as <var>value</var>.</p>
          <li data-md="">
           <p class="assertion">Assert: <var>key</var> is not an abrupt completion.</p>
          <li data-md="">
           <p>If <var>key</var> is failure, abort the overall algorithm and return
failure.</p>
          <li data-md="">
           <p>Append the result of the first sub-step to end of <var>result</var>.</p>
         </ol>
        <li data-md="">
         <p>Return <var>result</var>.</p>
         <aside class="note" role="note"> This will only ever "recurse" one level since <a data-link-type="dfn" href="#key-path" id="ref-for-key-path-3">key
  path</a> sequences can’t ever be nested. </aside>
       </ol>
      <li data-md="">
       <p>If <var>keyPath</var> is the empty string, return <var>value</var> and skip the
remaining steps.</p>
      <li data-md="">
       <p>Let <var>identifiers</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#strictly-split-a-string">strictly splitting the
string</a> <var>keyPath</var> on U+002E FULL STOP characters (.).</p>
      <li data-md="">
       <p>For each <var>identifier</var> in <var>identifiers</var>, jump to the appropriate step below:</p>
       <dl class="switch">
        <dt>If Type(<var>value</var>) is String, and <var>identifier</var> is "<code>length</code>"
        <dd>Let <var>value</var> be a Number equal to the number of elements in <var>value</var>.
        <dt>If <var>value</var> is an <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> and <var>identifier</var> is "<code>length</code>"
        <dd>Let <var>value</var> be <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">!</a> ToLength(<a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">!</a> Get(<var>value</var>, "<code>length</code>")).
        <dt>If <var>value</var> is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob">Blob</a></code> and <var>identifier</var> is "<code>size</code>"
        <dd>Let <var>value</var> be a Number equal to <var>value</var>’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-size">size</a></code>.
        <dt>If <var>value</var> is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob">Blob</a></code> and <var>identifier</var> is "<code>type</code>"
        <dd>Let <var>value</var> be a String equal to <var>value</var>’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-type">type</a></code>.
        <dt>If <var>value</var> is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file">File</a></code> and <var>identifier</var> is "<code>name</code>"
        <dd>Let <var>value</var> be a String equal to <var>value</var>’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-name">name</a></code>.
        <dt>If <var>value</var> is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file">File</a></code> and <var>identifier</var> is "<code>lastModified</code>"
        <dd>Let <var>value</var> be a Number equal to <var>value</var>’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-lastModified">lastModified</a></code>.
        <dt>If <var>value</var> is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file">File</a></code> and <var>identifier</var> is "<code>lastModifiedDate</code>"
        <dd>Let <var>value</var> be a new <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-date-objects">Date</a> object with [<span>[</span>DateValue]]
    equal to <var>value</var>’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-lastModified">lastModified</a></code>.
        <dt>Otherwise
        <dd>
         <ol>
          <li data-md="">
           <p>If Type(<var>value</var>) is not Object, return failure.</p>
          <li data-md="">
           <p>Let <var>hop</var> be <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">!</a> HasOwnProperty(<var>value</var>, <var>identifier</var>)</p>
          <li data-md="">
           <p>If <var>hop</var> is false, return failure.</p>
          <li data-md="">
           <p>Let <var>value</var> be <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">!</a> <var>value</var>.[<span>[</span>Get]](<var>identifier</var>, <var>value</var>)</p>
          <li data-md="">
           <p>If <var>value</var> is undefined, return failure.</p>
         </ol>
       </dl>
      <li data-md="">
       <p class="assertion">Assert: <var>value</var> is not an abrupt completion.</p>
      <li data-md="">
       <p>Return <var>value</var>.</p>
     </ol>
    </div>
    <aside class="note" role="note"> Assertions can be made in the above steps because this algorithm is
  only applied to values that are the output of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#safe-passing-of-structured-data">structured clone
  algorithm</a> and only access "own" properties. </aside>
    <h3 class="heading settled" data-level="7.2" id="inject-key-into-value"><span class="secno">7.2. </span><span class="content">Inject a key into a value</span><a class="self-link" href="#inject-key-into-value"></a></h3>
    <p>The steps to <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-inject-a-key-into-a-value-using-a-key-path">inject a key into a value using a key path</dfn> are
as follows. The algorithm takes a <var>value</var>, a <var>key</var> and a <var>keyPath</var>.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>identifiers</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#strictly-split-a-string">strictly splitting the
string</a> <var>keyPath</var> on U+002E FULL STOP characters (.).</p>
      <li data-md="">
       <p class="assertion">Assert: <var>identifiers</var> is not empty.</p>
      <li data-md="">
       <p>Let <var>last</var> be the last member of <var>identifiers</var> and remove it from
the list.</p>
      <li data-md="">
       <p>For each remaining <var>identifier</var> in <var>identifiers</var>, run these
substeps:</p>
       <ol>
        <li data-md="">
         <p>If <var>value</var> is not an <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-object-objects">Object</a> object or an <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> object (see <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#safe-passing-of-structured-data">structured clone algorithm</a> <a data-link-type="biblio" href="#biblio-html">[HTML]</a>), then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptiondef-request-dataerror" id="ref-for-exceptiondef-request-dataerror-32">DataError</a></code>.</p>
        <li data-md="">
         <p>Let <var>hop</var> be <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">!</a> HasOwnProperty(<var>value</var>, <var>identifier</var>).</p>
        <li data-md="">
         <p>If <var>hop</var> is false, run these substeps:</p>
         <ol>
          <li data-md="">
           <p>Let <var>o</var> be a new <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-object-objects">Object</a>.</p>
          <li data-md="">
           <p>Let <var>status</var> be CreateDataProperty(<var>value</var>, <var>identifier</var>, <var>o</var>).</p>
          <li data-md="">
           <p class="assertion">Assert: <var>status</var> is true.</p>
         </ol>
        <li data-md="">
         <p>Let <var>value</var> be <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">!</a> <var>value</var>.[<span>[</span>Get]](<var>identifier</var>, <var>value</var>).</p>
       </ol>
      <li data-md="">
       <p class="assertion">Assert: <var>value</var> is an <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-object-objects">Object</a> or an <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a>.</p>
      <li data-md="">
       <p>Let <var>keyValue</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-key-to-a-value" id="ref-for-request-convert-a-key-to-a-value-7">convert a
key to a value</a>.</p>
      <li data-md="">
       <p>Let <var>status</var> be CreateDataProperty(<var>value</var>, <var>last</var>, <var>keyValue</var>).</p>
      <li data-md="">
       <p class="assertion">Assert: <var>status</var> is true.</p>
     </ol>
    </div>
    <aside class="note" role="note"> The <a data-link-type="dfn" href="#key-path" id="ref-for-key-path-4">key path</a> used here is always a string and never a sequence,
  since it is not possible to create a <a data-link-type="dfn" href="#object-store" id="ref-for-object-store-99">object store</a> which has a <a data-link-type="dfn" href="#request-key-generator" id="ref-for-request-key-generator-23">key generator</a> and also has a <a data-link-type="dfn" href="#object-store-key-path" id="ref-for-object-store-key-path-19">key path</a> that is a
  sequence. </aside>
    <aside class="note" role="note"> Assertions can be made in the above steps because this algorithm is
  only applied to values that are the output of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#safe-passing-of-structured-data">structured clone
  algorithm</a>. </aside>
    <h3 class="heading settled" data-level="7.3" id="convert-key-to-value"><span class="secno">7.3. </span><span class="content">Convert a key to a value</span><a class="self-link" href="#convert-key-to-value"></a></h3>
    <p>The steps to <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-convert-a-key-to-a-value">convert a key to a value</dfn> are as follows. These
steps take one argument, <var>key</var>, and return an ECMAScript value.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>Let <var>type</var> be <var>key</var>’s <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-9">type</a>.</p>
      <li data-md="">
       <p>Let <var>value</var> be <var>key</var>’s <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-7">value</a>.</p>
      <li data-md="">
       <p>Switch on <var>type</var>:</p>
       <dl class="switch">
        <dt><i>number</i>
        <dd>Return an ECMAScript Number value equal to <var>value</var>
        <dt><i>string</i>
        <dd>Return an ECMAScript String value equal to <var>value</var>
        <dt><i>date</i>
        <dd>
         <ol>
          <li data-md="">
           <p>Let <var>date</var> be the result of executing the ECMAScript Date
constructor with the single argument <var>value</var>.</p>
          <li data-md="">
           <p class="assertion">Assert: <var>date</var> is not an abrupt completion.</p>
          <li data-md="">
           <p>Return <var>date</var>.</p>
         </ol>
        <dt><i>binary</i>
        <dd>
         <ol>
          <li data-md="">
           <p>Let <var>len</var> be the length of <var>value</var>.</p>
          <li data-md="">
           <p>Let <var>buffer</var> be the result of executing the ECMAScript
ArrayBuffer constructor with <var>len</var>.</p>
          <li data-md="">
           <p class="assertion">Assert: <var>buffer</var> is not an abrupt completion.</p>
          <li data-md="">
           <p>Set the entries in <var>buffer</var>’s
[<span>[</span>ArrayBufferData]] internal slot to the entries
in <var>value</var>.</p>
          <li data-md="">
           <p>Return <var>buffer</var>.</p>
         </ol>
        <dt><i>array</i>
        <dd>
         <ol>
          <li data-md="">
           <p>Let <var>array</var> be the result of executing the ECMAScript Array
constructor with no arguments.</p>
          <li data-md="">
           <p class="assertion">Assert: <var>array</var> is not an abrupt completion.</p>
          <li data-md="">
           <p>Let <var>len</var> be the length of <var>value</var>.</p>
          <li data-md="">
           <p>Let <var>index</var> be 0.</p>
          <li data-md="">
           <p>While <var>index</var> is less than <var>len</var>, run these substeps:</p>
           <ol>
            <li data-md="">
             <p>Let <var>entry</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-key-to-a-value" id="ref-for-request-convert-a-key-to-a-value-8">convert a key to a value</a> with the <var>index</var>th
entry of <var>value</var> as input.</p>
            <li data-md="">
             <p>Let <var>status</var> be CreateDataProperty(<var>array</var>, <var>index</var>, <var>entry</var>).</p>
            <li data-md="">
             <p class="assertion">Assert: <var>status</var> is true.</p>
            <li data-md="">
             <p>Increase <var>index</var> by 1.</p>
           </ol>
          <li data-md="">
           <p>Return <var>array</var>.</p>
         </ol>
       </dl>
     </ol>
    </div>
    <h3 class="heading settled" data-level="7.4" id="convert-value-to-key"><span class="secno">7.4. </span><span class="content">Convert a value to a key</span><a class="self-link" href="#convert-value-to-key"></a></h3>
    <p>The steps to <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-convert-a-value-to-a-key">convert a value to a key</dfn> are as follows. These
steps take two arguments, an ECMAScript value <var>input</var>, and an optional
set <var>seen</var>. The result of these steps is a <a data-link-type="dfn" href="#key" id="ref-for-key-67">key</a> or invalid, or the
steps may throw an exception.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If <var>seen</var> was not given, let <var>seen</var> be a new empty set</p>
      <li data-md="">
       <p>If <var>input</var> is in <var>seen</var> return invalid</p>
      <li data-md="">
       <p>Jump to the appropriate step below:</p>
       <dl class="switch">
        <dt>If Type(<var>input</var>) is Number
        <dd>
         <ol>
          <li data-md="">
           <p>If <var>input</var> is NaN then return invalid.</p>
          <li data-md="">
           <p>Otherwise, return a new <a data-link-type="dfn" href="#key" id="ref-for-key-68">key</a> with <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-10">type</a> <i>number</i> and <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-8">value</a> <var>input</var></p>
         </ol>
        <dt>If <var>input</var> has an [<span>[</span>DateValue]] internal slot
        <dd>
         <ol>
          <li data-md="">
           <p>Let <var>ms</var> be the value of <var>input</var>’s
[<span>[</span>DateValue]] internal slot.</p>
          <li data-md="">
           <p>If <var>ms</var> is NaN then return invalid.</p>
          <li data-md="">
           <p>Otherwise, return a new <a data-link-type="dfn" href="#key" id="ref-for-key-69">key</a> with <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-11">type</a> <i>date</i> and <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-9">value</a> <var>ms</var>.</p>
         </ol>
        <dt>If Type(<var>input</var>) is String
        <dd>
         <ol>
          <li data-md="">
           <p>Return a new <a data-link-type="dfn" href="#key" id="ref-for-key-70">key</a> with <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-12">type</a> <i>string</i> and <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-10">value</a> <var>input</var>.</p>
         </ol>
        <dt> If <var>input</var> has an [<span>[</span>ArrayBufferData]] internal slot
    or an [<span>[</span>ViewedArrayBuffer]] internal slot
        <dd>
         <ol>
          <li data-md="">
           <p>Let <var>octets</var> be the result of running the steps for <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-get-buffer-source-copy">getting a copy of the bytes held by a buffer source</a> with <var>value</var>. Rethrow any exceptions.</p>
          <li data-md="">
           <p>Return a new <a data-link-type="dfn" href="#key" id="ref-for-key-71">key</a> with <a data-link-type="dfn" href="#key-type" id="ref-for-key-type-13">type</a> <i>binary</i> and <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-11">value</a> <var>octets</var>.</p>
         </ol>
        <dt>If IsArray(<var>input</var>)
        <dd>
         <ol>
          <li data-md="">
           <p>Let <var>len</var> be <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">?</a> ToLength( <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">?</a> Get(<var>input</var>,
"<code>length</code>")).</p>
          <li data-md="">
           <p>Add <var>input</var> to <var>seen</var>.</p>
          <li data-md="">
           <p>Let <var>keys</var> be a new empty list.</p>
          <li data-md="">
           <p>Let <var>index</var> be 0.</p>
          <li data-md="">
           <p>While <var>index</var> is less than <var>len</var>, run these substeps:</p>
           <ol>
            <li data-md="">
             <p>Let <var>hop</var> be <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">!</a> HasOwnProperty(<var>input</var>, <var>index</var>).</p>
            <li data-md="">
             <p>If <var>hop</var> is false, return invalid.</p>
            <li data-md="">
             <p>Let <var>entry</var> be <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">?</a> <var>input</var>.[<span>[</span>Get]](<var>index</var>, <var>input</var>).</p>
            <li data-md="">
             <p>Let <var>key</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-17">convert a value to a key</a> with arguments <var>entry</var> and <var>seen</var>.</p>
            <li data-md="">
             <p>ReturnIfAbrupt(<var>key</var>).</p>
            <li data-md="">
             <p>If <var>key</var> is invalid abort these steps and return
invalid.</p>
            <li data-md="">
             <p>Append <var>key</var> to <var>keys</var>.</p>
            <li data-md="">
             <p>Increase <var>index</var> by 1.</p>
           </ol>
          <li data-md="">
           <p>Return a new <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-12">array key</a> with <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-12">value</a> <var>keys</var>.</p>
         </ol>
        <dt>Otherwise
        <dd>Return invalid
       </dl>
     </ol>
    </div>
    <p>The steps to <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport="" id="request-convert-a-value-to-a-multientry-key">convert a value to a multiEntry key</dfn> are as
follows. These steps take one argument, an ECMAScript value <var>input</var>.
The result of these steps is a <a data-link-type="dfn" href="#key" id="ref-for-key-72">key</a> or invalid, or the
steps may throw an exception.</p>
    <div class="algorithm">
     <ol>
      <li data-md="">
       <p>If IsArray(<var>input</var>), then:</p>
       <ol>
        <li data-md="">
         <p>Let <var>len</var> be <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">?</a> ToLength( <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">?</a> Get(<var>input</var>, "<code>length</code>")).</p>
        <li data-md="">
         <p>Let <var>seen</var> be a new set containing only <var>input</var>.</p>
        <li data-md="">
         <p>Let <var>keys</var> be a new empty set.</p>
        <li data-md="">
         <p>Let <var>index</var> be 0.</p>
        <li data-md="">
         <p>While <var>index</var> is less than <var>len</var>, run these substeps:</p>
         <ol>
          <li data-md="">
           <p>Let <var>entry</var> be <var>input</var>.[<span>[</span>Get]](<var>index</var>, <var>input</var>)</p>
          <li data-md="">
           <p>If <var>entry</var> is not an exception, run these substeps:</p>
           <ol>
            <li data-md="">
             <p>Let <var>key</var> be the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-18">convert a value to a key</a> with arguments <var>entry</var> and <var>seen</var>.</p>
            <li data-md="">
             <p>If <var>key</var> is not invalid or an exception, add <var>key</var> to <var>keys</var> if there are no other members of <var>keys</var> <a data-link-type="dfn" href="#equal-to" id="ref-for-equal-to-28">equal to</a> <var>key</var>.</p>
           </ol>
          <li data-md="">
           <p>Increase <var>index</var> by 1.</p>
         </ol>
       </ol>
      <li data-md="">
       <p>Return a new <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-13">array key</a> with <a data-link-type="dfn" href="#key-value" id="ref-for-key-value-13">value</a> set to
   a list of the members of <var>keys</var>.</p>
      <li data-md="">
       <p>Otherwise, return the result of running the steps to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-19">convert a
value to a key</a> with argument <var>input</var>.</p>
     </ol>
    </div>
    <aside class="note" role="note">
      These steps are similar to those to <a data-link-type="dfn" href="#request-convert-a-value-to-a-key" id="ref-for-request-convert-a-value-to-a-key-20">convert a value to a key</a> but if the top-level value is an <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a> then members which can
  not be converted to keys are ignored, and duplicates are removed. 
     <p>For example, the value <code>[10, 20, null, 30, 20]</code> is
  converted to an <a data-link-type="dfn" href="#array-key" id="ref-for-array-key-14">array key</a> with <a data-link-type="dfn" href="#subkeys" id="ref-for-subkeys-6">subkeys</a> 10, 20, 30.</p>
    </aside>
    <h2 class="heading settled" data-level="8" id="privacy"><span class="secno">8. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <h3 class="heading settled" data-level="8.1" id="user-tracking"><span class="secno">8.1. </span><span class="content">User tracking</span><a class="self-link" href="#user-tracking"></a></h3>
    <p>A third-party host (or any object capable of getting content
distributed to multiple sites) could use a unique identifier stored in
its client-side database to track a user across multiple sessions,
building a profile of the user’s activities. In conjunction with a
site that is aware of the user’s real id object (for example an
e-commerce site that requires authenticated credentials), this could
allow oppressive groups to target individuals with greater accuracy
than in a world with purely anonymous Web usage.</p>
    <p>There are a number of techniques that can be used to mitigate the risk
of user tracking:</p>
    <dl>
     <dt>Blocking third-party storage
     <dd> User agents may restrict access to the database objects
to scripts originating at the domain of the top-level document of
the <span>browsing context</span>, for instance denying access to
the API for pages from other domains running in <code>iframe</code>s. 
     <dt>Expiring stored data
     <dd>
      <p>User agents may automatically delete stored data after a period of
time.</p>
      <p>This can restrict the ability of a site to track a user, as the site
would then only be able to track the user across multiple sessions
when she authenticates with the site itself (e.g. by making a purchase
or logging in to a service).</p>
      <p>However, this also puts the user’s data at risk.</p>
     <dt>Treating persistent storage as cookies
     <dd>
      <p>User agents should present the database feature to the user in a way
that associates them strongly with HTTP session cookies. <a data-link-type="biblio" href="#biblio-cookies">[COOKIES]</a></p>
      <p>This might encourage users to view such storage with healthy
suspicion.</p>
     <dt>Site-specific safe-listing of access to databases
     <dd>
      <p>User agents may require the user to authorize access to databases
before a site can use the feature.</p>
     <dt>Origin-tracking of stored data
     <dd>
      <p>User agents may record the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origins</a> of sites that contained content
from third-party origins that caused data to be stored.</p>
      <p>If this information is then used to present the view of data
currently in persistent storage, it would allow the user to make
informed decisions about which parts of the persistent storage to
prune. Combined with a blocklist ("delete this data and prevent
this domain from ever storing data again"), the user can restrict
the use of persistent storage to sites that she trusts.</p>
     <dt>Shared blocklists
     <dd>
      <p>User agents may allow users to share their persistent storage
domain blocklists.</p>
      <p>This would allow communities to act together to protect their
privacy.</p>
    </dl>
    <p>While these suggestions prevent trivial use of this API for user
tracking, they do not block it altogether. Within a single domain, a
site can continue to track the user during a session, and can then
pass all this information to the third party along with any
identifying information (names, credit card numbers, addresses)
obtained by the site. If a third party cooperates with multiple
sites to obtain such information, a profile can still be
created.</p>
    <p>However, user tracking is to some extent possible even with no
cooperation from the user agent whatsoever, for instance by using
session identifiers in URLs, a technique already commonly used for
innocuous purposes but easily repurposed for user tracking (even
retroactively). This information can then be shared with other
sites, using using visitors' IP addresses and other user-specific
data (e.g. user-agent headers and configuration settings) to combine
separate sessions into coherent user profiles.</p>
    <h3 class="heading settled" data-level="8.2" id="cookie-resurrection"><span class="secno">8.2. </span><span class="content">Cookie resurrection</span><a class="self-link" href="#cookie-resurrection"></a></h3>
    <p>If the user interface for persistent storage presents data in the
persistent storage features described in this specification separately
from data in HTTP session cookies, then users are likely to delete
data in one and not the other. This would allow sites to use the two
features as redundant backup for each other, defeating a user’s
attempts to protect his privacy.</p>
    <h3 class="heading settled" data-level="8.3" id="sensitivity-of-data"><span class="secno">8.3. </span><span class="content">Sensitivity of data</span><a class="self-link" href="#sensitivity-of-data"></a></h3>
    <p>User agents should treat persistently stored data as potentially
sensitive; it is quite possible for e-mails, calendar appointments,
health records, or other confidential documents to be stored in this
mechanism.</p>
    <p>To this end, user agents should ensure that when deleting data,
it is promptly deleted from the underlying storage.</p>
    <h2 class="heading settled" data-level="9" id="security"><span class="secno">9. </span><span class="content">Security Considerations</span><a class="self-link" href="#security"></a></h2>
    <h3 class="heading settled" data-level="9.1" id="dns-spoofing-attacks"><span class="secno">9.1. </span><span class="content">DNS spoofing attacks</span><a class="self-link" href="#dns-spoofing-attacks"></a></h3>
    <p>Because of the potential for DNS spoofing attacks, one cannot
guarantee that a host claiming to be in a certain domain really is
from that domain. To mitigate this, pages can use SSL. Pages using SSL
can be sure that only pages using SSL that have certificates
identifying them as being from the same domain can access their
databases.</p>
    <h3 class="heading settled" data-level="9.2" id="cross-directory-attacks"><span class="secno">9.2. </span><span class="content">Cross-directory attacks</span><a class="self-link" href="#cross-directory-attacks"></a></h3>
    <p>Different authors sharing one host name, for example users hosting
content on <code>geocities.com</code>, all share one set of databases.</p>
    <p>There is no feature to restrict the access by pathname. Authors on
shared hosts are therefore recommended to avoid using these features,
as it would be trivial for other authors to read the data and
overwrite it.</p>
    <aside class="note" role="note"> Even if a path-restriction feature was made available, the usual DOM
  scripting security model would make it trivial to bypass this
  protection and access the data from any path. </aside>
    <h3 class="heading settled" data-level="9.3" id="implementation-risks"><span class="secno">9.3. </span><span class="content">Implementation risks</span><a class="self-link" href="#implementation-risks"></a></h3>
    <p>The two primary risks when implementing these persistent storage
features are letting hostile sites read information from other
domains, and letting hostile sites write information that is then read
from other domains.</p>
    <p>Letting third-party sites read data that is not supposed to be read
from their domain causes <em>information leakage</em>, For example, a
user’s shopping wish list on one domain could be used by another
domain for targeted advertising; or a user’s work-in-progress
confidential documents stored by a word-processing site could be
examined by the site of a competing company.</p>
    <p>Letting third-party sites write data to the persistent storage of
other domains can result in <em>information spoofing</em>, which is
equally dangerous. For example, a hostile site could add records to a
user’s wish list; or a hostile site could set a user’s session
identifier to a known ID that the hostile site can then use to track
the user’s actions on the victim site.</p>
    <p>Thus, strictly following the <span>origin</span> model described in
this specification is important for user security.</p>
    <h2 class="heading settled" data-level="10" id="revision-history"><span class="secno">10. </span><span class="content">Revision History</span><a class="self-link" href="#revision-history"></a></h2>
    <p>The following is an informative summary of the changes since the last
publication of this specification. A complete revision history can be
found <a href="https://github.com/w3c/IndexedDB/">here</a>. For the
revision history of the first edition, see <a href="https://www.w3.org/TR/IndexedDB/#revision-history">that
document’s Revision History</a>.</p>
    <ul>
     <li data-md="">
      <p>Address comparison of empty arrays.
(<a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27712">bug #27712</a>)</p>
     <li data-md="">
      <p>Added <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-openkeycursor" id="ref-for-dom-idbobjectstore-openkeycursor-3">openKeyCursor()</a></code> on <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-21">IDBObjectStore</a></code>.
(<a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=19955">bug #19955</a>)</p>
     <li data-md="">
      <p>Correct <var>source</var> used for <code class="idl"><a data-link-type="idl" href="#dom-idbindex-get" id="ref-for-dom-idbindex-get-2">get()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-idbindex-getkey" id="ref-for-dom-idbindex-getkey-2">getKey()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-idbindex-openkeycursor" id="ref-for-dom-idbindex-openkeycursor-2">openKeyCursor()</a></code> on <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-14">IDBIndex</a></code>.</p>
     <li data-md="">
      <p>Added details around garbage collection of <code class="idl"><a data-link-type="idl" href="#request-idbdatabase" id="ref-for-request-idbdatabase-15">IDBDatabase</a></code> objects.
(<a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25223">bug #25223</a>)</p>
     <li data-md="">
      <p>Added <code>[Exposed=(Window,Worker)]</code> annotations to interfaces.</p>
     <li data-md="">
      <p>Added <var>forced flag</var> to the <a data-link-type="dfn" href="#request-steps-for-closing-a-database-connection" id="ref-for-request-steps-for-closing-a-database-connection-5">steps for closing a database connection</a>,
described the firing of a "<code>close</code>" event, and <code class="idl"><a data-link-type="idl" href="#dom-idbdatabase-onclose" id="ref-for-dom-idbdatabase-onclose-3">onclose</a></code>.
(<a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22540">bug #22540</a>)</p>
     <li data-md="">
      <p>Converted specification to a more algorithmic style,
and define abstract types such as <a data-link-type="dfn" href="#key" id="ref-for-key-73">key</a> more rigorously.
(<a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=17681">bug #17681</a>)</p>
     <li data-md="">
      <p>Added <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-getall" id="ref-for-dom-idbobjectstore-getall-3">getAll()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-getallkeys" id="ref-for-dom-idbobjectstore-getallkeys-3">getAllKeys()</a></code> on <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-22">IDBObjectStore</a></code>, and <code class="idl"><a data-link-type="idl" href="#dom-idbindex-getall" id="ref-for-dom-idbindex-getall-3">getAll()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-idbindex-getallkeys" id="ref-for-dom-idbindex-getallkeys-3">getAllKeys()</a></code> on <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-15">IDBIndex</a></code>.
(<a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=16595">bug #16595</a>)</p>
     <li data-md="">
      <p>Replaced <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domerror">DOMError</a></code> with <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dfn-DOMException">DOMException</a></code>.
(<a href="https://github.com/w3c/IndexedDB/issues/16">bug #16</a>)</p>
     <li data-md="">
      <p>Added <code class="idl"><a data-link-type="idl" href="#dom-idbtransaction-objectstorenames" id="ref-for-dom-idbtransaction-objectstorenames-3">objectStoreNames</a></code> on <code class="idl"><a data-link-type="idl" href="#request-idbtransaction" id="ref-for-request-idbtransaction-10">IDBTransaction</a></code>.
(<a href="https://github.com/w3c/IndexedDB/issues/18">bug #18</a>)</p>
     <li data-md="">
      <p>Added <i>binary</i> <a data-link-type="dfn" href="#key" id="ref-for-key-74">keys</a>, including comparisons and ECMAScript bindings.
(<a href="https://github.com/w3c/IndexedDB/issues/21">bug #21</a>)</p>
     <li data-md="">
      <p>Allow renaming stores and indexes via <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-23">IDBObjectStore</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-name" id="ref-for-dom-idbobjectstore-name-6">name</a></code> and <code class="idl"><a data-link-type="idl" href="#request-idbindex" id="ref-for-request-idbindex-16">IDBIndex</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-idbindex-name" id="ref-for-dom-idbindex-name-6">name</a></code> attribute setters.
(<a href="https://github.com/w3c/IndexedDB/issues/21">bug #22</a>)</p>
     <li data-md="">
      <p>Added <code class="idl"><a data-link-type="idl" href="#dom-idbcursor-continueprimarykey" id="ref-for-dom-idbcursor-continueprimarykey-4">continuePrimaryKey()</a></code> on <code class="idl"><a data-link-type="idl" href="#request-idbcursor" id="ref-for-request-idbcursor-6">IDBCursor</a></code>.
(<a href="https://github.com/w3c/IndexedDB/issues/14">bug #14</a>)</p>
     <li data-md="">
      <p>Added <code class="idl"><a data-link-type="idl" href="#dom-idbkeyrange-includes" id="ref-for-dom-idbkeyrange-includes-3">includes()</a></code> on <code class="idl"><a data-link-type="idl" href="#request-idbkeyrange" id="ref-for-request-idbkeyrange-22">IDBKeyRange</a></code>.
(<a href="https://github.com/w3c/IndexedDB/issues/41">bug #41</a>)</p>
     <li data-md="">
      <p>Added <code class="idl"><a data-link-type="idl" href="#dom-idbobjectstore-getkey" id="ref-for-dom-idbobjectstore-getkey-3">getKey()</a></code> on <code class="idl"><a data-link-type="idl" href="#request-idbobjectstore" id="ref-for-request-idbobjectstore-24">IDBObjectStore</a></code>.
(<a href="https://github.com/w3c/IndexedDB/issues/26">bug #26</a>)</p>
     <li data-md="">
      <p>Clarified when a transaction can attempt to commit.
(<a href="https://github.com/w3c/IndexedDB/issues/77">bug #77</a>)</p>
     <li data-md="">
      <p>Clarified <a data-link-type="dfn" href="#request-open-request" id="ref-for-request-open-request-13">open request</a> / <a data-link-type="dfn" href="#request-connection-queue" id="ref-for-request-connection-queue-5">connection queue</a> processing.
(<a href="https://github.com/w3c/IndexedDB/issues/9">bug #9</a>, <a href="https://github.com/w3c/IndexedDB/issues/77">bug #78</a>, <a href="https://github.com/w3c/IndexedDB/issues/77">bug #79</a>, <a href="https://github.com/w3c/IndexedDB/issues/77">bug #81</a>)</p>
     <li data-md="">
      <p>Added <code class="idl"><a data-link-type="idl" href="#request-domstringlist" id="ref-for-request-domstringlist-11">DOMStringList</a></code>.
(<a href="https://github.com/w3c/IndexedDB/issues/28">bug #28</a>)</p>
    </ul>
    <h2 class="heading settled" data-level="11" id="acknowledgements"><span class="secno">11. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
    <p>Special thanks to Nikunj Mehta, the original author of the first
edition, and Jonas Sicking, Eliot Graff, Andrei Popescu, and Jeremy
Orlow, additional editors of the first edition.</p>
    <p>Garret Swart was extremely influential in the design of this specification.</p>
    <p>Thanks to Tab Atkins, Jr. for creating and maintaining <a href="https://github.com/tabatkins/bikeshed">Bikeshed</a>, the
specification authoring tool used to create this document.</p>
    <p>Special thanks to
Chris Anderson,
Pablo Castro,
Victor Costan,
Kristof Degrave,
Jake Drew,
Ben Dilts,
João Eiras,
Alec Flett,
Dana Florescu,
David Grogan,
Israel Hilerio,
Kyle Huey,
Laxminarayan G Kamath A,
Anne van Kesteren,
Adam Klein,
Tobie Langel,
Kang-Hao Lu,
Andrea Marchesini,
Glenn Maynard,
Ms2ger,
Odin Omdal,
Danillo Paiva,
Olli Pettay,
Simon Pieters,
Anthony Ramine,
Yonathan Randolph,
Arun Ranganathan,
Margo Seltzer,
Maciej Stachowiak,
Bevis Tseng,
Ben Turner,
Kyaw Tun,
Hans Wennborg,
Shawn Wilsher,
Boris Zbarsky,
Zhiqiang Zhang,
and
Kris Zyp,
all of whose feedback and suggestions have led to improvements to this
specification.</p>
   </div>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">Document conventions</span><a class="self-link" href="#conventions"></a></h3>
   <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
   <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="example-f839f6c8">
    <a class="self-link" href="#example-f839f6c8"></a> 
    <p>This is an example of an informative example.</p>
   </div>
   <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms (such as
    "strip any leading space characters" or "return false and abort these
    steps") are to be interpreted with the meaning of the key word ("must",
    "should", "may", etc) used in introducing the algorithm.</p>
   <p>Conformance requirements phrased as algorithms or specific steps can be
    implemented in any manner, so long as the end result is <dfn data-dfn-type="dfn" data-lt="processing equivalence" data-noexport="" id="dfn-processing-equivalence">equivalent<a class="self-link" href="#dfn-processing-equivalence"></a></dfn>. In
    particular, the algorithms defined in this specification are intended to
    be easy to understand and are not intended to be performant. Implementers
    are encouraged to optimize.</p>
  </div>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-idbtransaction-abort">abort()</a><span>, in §4.9</span>
   <li><a href="#transaction-abort">abort</a><span>, in §2.7.1</span>
   <li><a href="#transaction-abort">aborted</a><span>, in §2.7.1</span>
   <li><a href="#exceptiondef-request-aborterror">AbortError</a><span>, in §3</span>
   <li><a href="#transaction-abort">aborting</a><span>, in §2.7.1</span>
   <li><a href="#transaction-active">active</a><span>, in §2.7</span>
   <li><a href="#transaction-active-flag">active flag</a><span>, in §2.7</span>
   <li><a href="#dom-idbobjectstore-add">add(value)</a><span>, in §4.5</span>
   <li><a href="#dom-idbobjectstore-add">add(value, key)</a><span>, in §4.5</span>
   <li><a href="#dom-idbcursor-advance">advance(count)</a><span>, in §4.8</span>
   <li><a href="#array-key">array key</a><span>, in §2.4</span>
   <li>
    autoIncrement
    <ul>
     <li><a href="#dom-idbobjectstoreparameters-autoincrement">dict-member for IDBObjectStoreParameters</a><span>, in §4.4</span>
     <li><a href="#dom-idbobjectstore-autoincrement">attribute for IDBObjectStore</a><span>, in §4.5</span>
    </ul>
   <li><a href="#request-blocked">blocked</a><span>, in §2.8.1</span>
   <li><a href="#dom-idbkeyrange-bound">bound(lower, upper)</a><span>, in §4.7</span>
   <li><a href="#dom-idbkeyrange-bound">bound(lower, upper, lowerOpen)</a><span>, in §4.7</span>
   <li><a href="#dom-idbkeyrange-bound">bound(lower, upper, lowerOpen, upperOpen)</a><span>, in §4.7</span>
   <li><a href="#dom-idbobjectstore-clear">clear()</a><span>, in §4.5</span>
   <li><a href="#dom-idbdatabase-close">close()</a><span>, in §4.4</span>
   <li><a href="#connection-closed">closed</a><span>, in §2.1.1</span>
   <li><a href="#connection-close-pending-flag">close pending flag</a><span>, in §2.1.1</span>
   <li><a href="#dom-idbfactory-cmp">cmp(first, second)</a><span>, in §4.3</span>
   <li><a href="#transaction-commit">commit</a><span>, in §2.7.1</span>
   <li><a href="#transaction-commit">committed</a><span>, in §2.7.1</span>
   <li><a href="#transaction-commit">committing</a><span>, in §2.7.1</span>
   <li><a href="#compare-two-keys">compare two keys</a><span>, in §2.4</span>
   <li><a href="#connection">connected</a><span>, in §2.1.1</span>
   <li>
    connection
    <ul>
     <li><a href="#connection">definition of</a><span>, in §2.1.1</span>
     <li><a href="#transaction-connection">dfn for transaction</a><span>, in §2.7</span>
    </ul>
   <li><a href="#request-connection-queue">connection queue</a><span>, in §2.8.1</span>
   <li><a href="#exceptiondef-request-constrainterror">ConstraintError</a><span>, in §3</span>
   <li><a href="#request-containing-only">containing only</a><span>, in §2.9</span>
   <li><a href="#dom-domstringlist-contains">contains(str)</a><span>, in §4.10</span>
   <li><a href="#dom-idbcursor-continue">continue()</a><span>, in §4.8</span>
   <li><a href="#dom-idbcursor-continue">continue(key)</a><span>, in §4.8</span>
   <li><a href="#dom-idbcursor-continueprimarykey">continuePrimaryKey(key, primaryKey)</a><span>, in §4.8</span>
   <li><a href="#request-convert-a-key-to-a-value">convert a key to a value</a><span>, in §7.3</span>
   <li><a href="#request-convert-a-value-to-a-key">convert a value to a key</a><span>, in §7.4</span>
   <li><a href="#request-convert-a-value-to-a-key-range">convert a value to a key range</a><span>, in §2.9</span>
   <li><a href="#request-convert-a-value-to-a-multientry-key">convert a value to a multiEntry key</a><span>, in §7.4</span>
   <li>
    count()
    <ul>
     <li><a href="#dom-idbobjectstore-count">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-count">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    count(query)
    <ul>
     <li><a href="#dom-idbobjectstore-count">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-count">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li><a href="#transaction-created">created</a><span>, in §2.7.1</span>
   <li><a href="#dom-idbobjectstore-createindex">createIndex(name, keyPath)</a><span>, in §4.5</span>
   <li><a href="#dom-idbobjectstore-createindex">createIndex(name, keyPath, options)</a><span>, in §4.5</span>
   <li><a href="#dom-idbdatabase-createobjectstore">createObjectStore(name)</a><span>, in §4.4</span>
   <li><a href="#dom-idbdatabase-createobjectstore">createObjectStore(name, options)</a><span>, in §4.4</span>
   <li><a href="#request-current-number">current number</a><span>, in §2.11</span>
   <li><a href="#request-cursor">cursor</a><span>, in §2.10</span>
   <li><a href="#database">database</a><span>, in §2.1</span>
   <li><a href="#request-database-access-task-source">database access task source</a><span>, in §4</span>
   <li><a href="#exceptiondef-request-datacloneerror">DataCloneError</a><span>, in §3</span>
   <li><a href="#exceptiondef-request-dataerror">DataError</a><span>, in §3</span>
   <li><a href="#dom-idbtransaction-db">db</a><span>, in §4.9</span>
   <li><a href="#dom-idbcursor-delete">delete()</a><span>, in §4.8</span>
   <li><a href="#dom-idbfactory-deletedatabase">deleteDatabase(name)</a><span>, in §4.3</span>
   <li><a href="#dom-idbobjectstore-deleteindex">deleteIndex(indexName)</a><span>, in §4.5</span>
   <li><a href="#dom-idbdatabase-deleteobjectstore">deleteObjectStore(name)</a><span>, in §4.4</span>
   <li><a href="#dom-idbobjectstore-delete">delete(query)</a><span>, in §4.5</span>
   <li>
    direction
    <ul>
     <li><a href="#cursor-direction">dfn for cursor</a><span>, in §2.10</span>
     <li><a href="#dom-idbcursor-direction">attribute for IDBCursor</a><span>, in §4.8</span>
    </ul>
   <li><a href="#request-domstringlist">DOMStringList</a><span>, in §4.10</span>
   <li><a href="#dom-idbrequestreadystate-done">done</a><span>, in §4.1</span>
   <li><a href="#dom-idbrequestreadystate-done">"done"</a><span>, in §4.1</span>
   <li><a href="#request-done-flag">done flag</a><span>, in §2.8</span>
   <li><a href="#cursor-effective-key">effective key</a><span>, in §2.10</span>
   <li><a href="#cursor-effective-object-store">effective object store</a><span>, in §2.10</span>
   <li><a href="#equal-to">equal to</a><span>, in §2.4</span>
   <li>
    error
    <ul>
     <li><a href="#transaction-error">dfn for transaction</a><span>, in §2.7</span>
     <li><a href="#request-error">dfn for request</a><span>, in §2.8</span>
     <li><a href="#dom-idbrequest-error">attribute for IDBRequest</a><span>, in §4.1</span>
     <li><a href="#dom-idbtransaction-error">attribute for IDBTransaction</a><span>, in §4.9</span>
    </ul>
   <li><a href="#request-evaluate-a-key-path-on-a-value">evaluate a key path on a value</a><span>, in §7.1</span>
   <li><a href="#request-extract-a-key-from-a-value-using-a-key-path">extract a key from a value using a key path</a><span>, in §7.1</span>
   <li><a href="#transaction-finish">finish</a><span>, in §2.7.1</span>
   <li><a href="#transaction-finish">finished</a><span>, in §2.7.1</span>
   <li><a href="#request-fire-an-error-event">fire an error event</a><span>, in §5.10</span>
   <li><a href="#request-fire-a-success-event">fire a success event</a><span>, in §5.9</span>
   <li><a href="#request-fire-a-version-change-event">fire a version change event</a><span>, in §4.2</span>
   <li>
    getAll()
    <ul>
     <li><a href="#dom-idbobjectstore-getall">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-getall">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    getAllKeys()
    <ul>
     <li><a href="#dom-idbobjectstore-getallkeys">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-getallkeys">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    getAllKeys(query)
    <ul>
     <li><a href="#dom-idbobjectstore-getallkeys">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-getallkeys">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    getAllKeys(query, count)
    <ul>
     <li><a href="#dom-idbobjectstore-getallkeys">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-getallkeys">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    getAll(query)
    <ul>
     <li><a href="#dom-idbobjectstore-getall">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-getall">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    getAll(query, count)
    <ul>
     <li><a href="#dom-idbobjectstore-getall">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-getall">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    getKey(query)
    <ul>
     <li><a href="#dom-idbobjectstore-getkey">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-getkey">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    get(query)
    <ul>
     <li><a href="#dom-idbobjectstore-get">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-get">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li><a href="#cursor-got-value-flag">got value flag</a><span>, in §2.10</span>
   <li><a href="#greater-than">greater than</a><span>, in §2.4</span>
   <li><a href="#request-idbcursor">IDBCursor</a><span>, in §4.8</span>
   <li><a href="#enumdef-request-idbcursordirection">IDBCursorDirection</a><span>, in §4.8</span>
   <li><a href="#request-idbcursorwithvalue">IDBCursorWithValue</a><span>, in §4.8</span>
   <li><a href="#request-idbdatabase">IDBDatabase</a><span>, in §4.4</span>
   <li><a href="#request-idbfactory">IDBFactory</a><span>, in §4.3</span>
   <li><a href="#request-idbindex">IDBIndex</a><span>, in §4.6</span>
   <li><a href="#dictdef-request-idbindexparameters">IDBIndexParameters</a><span>, in §4.5</span>
   <li><a href="#request-idbkeyrange">IDBKeyRange</a><span>, in §4.7</span>
   <li><a href="#request-idbobjectstore">IDBObjectStore</a><span>, in §4.5</span>
   <li><a href="#dictdef-request-idbobjectstoreparameters">IDBObjectStoreParameters</a><span>, in §4.4</span>
   <li><a href="#request-idbopendbrequest">IDBOpenDBRequest</a><span>, in §4.1</span>
   <li><a href="#request-idbrequest">IDBRequest</a><span>, in §4.1</span>
   <li><a href="#enumdef-request-idbrequestreadystate">IDBRequestReadyState</a><span>, in §4.1</span>
   <li><a href="#request-idbtransaction">IDBTransaction</a><span>, in §4.9</span>
   <li><a href="#enumdef-request-idbtransactionmode">IDBTransactionMode</a><span>, in §4.9</span>
   <li><a href="#request-idbversionchangeevent">IDBVersionChangeEvent</a><span>, in §4.2</span>
   <li><a href="#dictdef-request-idbversionchangeeventinit">IDBVersionChangeEventInit</a><span>, in §4.2</span>
   <li><a href="#dom-idbversionchangeevent-idbversionchangeevent">IDBVersionChangeEvent(type)</a><span>, in §4.2</span>
   <li><a href="#dom-idbversionchangeevent-idbversionchangeevent">IDBVersionChangeEvent(type, eventInitDict)</a><span>, in §4.2</span>
   <li><a href="#identifier">identifier</a><span>, in §2.5</span>
   <li><a href="#request-in">in</a><span>, in §2.9</span>
   <li><a href="#dom-idbkeyrange-includes">includes(key)</a><span>, in §4.7</span>
   <li>
    index
    <ul>
     <li><a href="#index-concept">definition of</a><span>, in §2.6</span>
     <li><a href="#index-handle-index">dfn for index-handle</a><span>, in §2.6.1</span>
    </ul>
   <li><a href="#dom-windoworworkerglobalscope-indexeddb">indexedDB</a><span>, in §4.3</span>
   <li><a href="#index-handle">index handle</a><span>, in §2.6.1</span>
   <li><a href="#dom-idbobjectstore-index">index(name)</a><span>, in §4.5</span>
   <li><a href="#dom-idbobjectstore-indexnames">indexNames</a><span>, in §4.5</span>
   <li><a href="#object-store-handle-index-set">index set</a><span>, in §2.2.1</span>
   <li><a href="#request-inject-a-key-into-a-value-using-a-key-path">inject a key into a value using a key path</a><span>, in §7.2</span>
   <li><a href="#object-store-in-line-keys">in-line keys</a><span>, in §2.2</span>
   <li><a href="#exceptiondef-request-invalidaccesserror">InvalidAccessError</a><span>, in §3</span>
   <li><a href="#exceptiondef-request-invalidstateerror">InvalidStateError</a><span>, in §3</span>
   <li><a href="#dom-domstringlist-item">item(index)</a><span>, in §4.10</span>
   <li>
    key
    <ul>
     <li><a href="#key">definition of</a><span>, in §2.4</span>
     <li><a href="#cursor-key">dfn for cursor</a><span>, in §2.10</span>
     <li><a href="#dom-idbcursor-key">attribute for IDBCursor</a><span>, in §4.8</span>
    </ul>
   <li><a href="#request-key-generator">key generator</a><span>, in §2.11</span>
   <li><a href="#cursor-key-only-flag">key only flag</a><span>, in §2.10</span>
   <li>
    keyPath
    <ul>
     <li><a href="#dom-idbobjectstoreparameters-keypath">dict-member for IDBObjectStoreParameters</a><span>, in §4.4</span>
     <li><a href="#dom-idbobjectstore-keypath">attribute for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-keypath">attribute for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    key path
    <ul>
     <li><a href="#object-store-key-path">dfn for object-store</a><span>, in §2.2</span>
     <li><a href="#key-path">definition of</a><span>, in §2.5</span>
     <li><a href="#index-key-path">dfn for index</a><span>, in §2.6</span>
    </ul>
   <li><a href="#request-key-range">key range</a><span>, in §2.9</span>
   <li><a href="#dom-domstringlist-length">length</a><span>, in §4.10</span>
   <li><a href="#less-than">less than</a><span>, in §2.4</span>
   <li><a href="#transaction-lifetime">lifetime</a><span>, in §2.7.1</span>
   <li>
    list of records
    <ul>
     <li><a href="#object-store-list-of-records">dfn for object-store</a><span>, in §2.2</span>
     <li><a href="#index-list-of-records">dfn for index</a><span>, in §2.6</span>
    </ul>
   <li><a href="#dom-idbkeyrange-lower">lower</a><span>, in §4.7</span>
   <li><a href="#request-lower-bound">lower bound</a><span>, in §2.9</span>
   <li><a href="#dom-idbkeyrange-lowerbound">lowerBound(lower)</a><span>, in §4.7</span>
   <li><a href="#dom-idbkeyrange-lowerbound">lowerBound(lower, open)</a><span>, in §4.7</span>
   <li><a href="#dom-idbkeyrange-loweropen">lowerOpen</a><span>, in §4.7</span>
   <li><a href="#request-lower-open-flag">lower open flag</a><span>, in §2.9</span>
   <li>
    mode
    <ul>
     <li><a href="#transaction-mode">dfn for transaction</a><span>, in §2.7</span>
     <li><a href="#dom-idbtransaction-mode">attribute for IDBTransaction</a><span>, in §4.9</span>
    </ul>
   <li>
    multiEntry
    <ul>
     <li><a href="#dom-idbindexparameters-multientry">dict-member for IDBIndexParameters</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-multientry">attribute for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li><a href="#index-multientry-flag">multiEntry flag</a><span>, in §2.6</span>
   <li>
    name
    <ul>
     <li><a href="#database-name">dfn for database</a><span>, in §2.1</span>
     <li><a href="#object-store-name">dfn for object-store</a><span>, in §2.2</span>
     <li><a href="#object-store-handle-name">dfn for object-store-handle</a><span>, in §2.2.1</span>
     <li><a href="#index-name">dfn for index</a><span>, in §2.6</span>
     <li><a href="#index-handle-name">dfn for index-handle</a><span>, in §2.6.1</span>
     <li><a href="#dom-idbdatabase-name">attribute for IDBDatabase</a><span>, in §4.4</span>
     <li><a href="#dom-idbobjectstore-name">attribute for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-name">attribute for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    newVersion
    <ul>
     <li><a href="#dom-idbversionchangeeventinit-newversion">dict-member for IDBVersionChangeEventInit</a><span>, in §4.2</span>
     <li><a href="#dom-idbversionchangeevent-newversion">attribute for IDBVersionChangeEvent</a><span>, in §4.2</span>
    </ul>
   <li><a href="#dom-idbcursordirection-next">next</a><span>, in §4.8</span>
   <li><a href="#dom-idbcursordirection-next">"next"</a><span>, in §4.8</span>
   <li><a href="#dom-idbcursordirection-nextunique">nextunique</a><span>, in §4.8</span>
   <li><a href="#dom-idbcursordirection-nextunique">"nextunique"</a><span>, in §4.8</span>
   <li><a href="#exceptiondef-request-notfounderror">NotFoundError</a><span>, in §3</span>
   <li>
    object store
    <ul>
     <li><a href="#object-store">definition of</a><span>, in §2.2</span>
     <li><a href="#object-store-handle-object-store">dfn for object-store-handle</a><span>, in §2.2.1</span>
    </ul>
   <li><a href="#dom-idbindex-objectstore">objectStore</a><span>, in §4.6</span>
   <li>
    object store handle
    <ul>
     <li><a href="#object-store-handle">definition of</a><span>, in §2.2.1</span>
     <li><a href="#index-handle-object-store-handle">dfn for index-handle</a><span>, in §2.6.1</span>
    </ul>
   <li><a href="#dom-idbtransaction-objectstore">objectStore(name)</a><span>, in §4.9</span>
   <li>
    objectStoreNames
    <ul>
     <li><a href="#dom-idbdatabase-objectstorenames">attribute for IDBDatabase</a><span>, in §4.4</span>
     <li><a href="#dom-idbtransaction-objectstorenames">attribute for IDBTransaction</a><span>, in §4.9</span>
    </ul>
   <li><a href="#cursor-object-store-position">object store position</a><span>, in §2.10</span>
   <li><a href="#connection-object-store-set">object store set</a><span>, in §2.1.1</span>
   <li>
    oldVersion
    <ul>
     <li><a href="#dom-idbversionchangeeventinit-oldversion">dict-member for IDBVersionChangeEventInit</a><span>, in §4.2</span>
     <li><a href="#dom-idbversionchangeevent-oldversion">attribute for IDBVersionChangeEvent</a><span>, in §4.2</span>
    </ul>
   <li>
    onabort
    <ul>
     <li><a href="#dom-idbdatabase-onabort">attribute for IDBDatabase</a><span>, in §4.4</span>
     <li><a href="#dom-idbtransaction-onabort">attribute for IDBTransaction</a><span>, in §4.9</span>
    </ul>
   <li><a href="#dom-idbopendbrequest-onblocked">onblocked</a><span>, in §4.1</span>
   <li><a href="#dom-idbdatabase-onclose">onclose</a><span>, in §4.4</span>
   <li><a href="#dom-idbtransaction-oncomplete">oncomplete</a><span>, in §4.9</span>
   <li>
    onerror
    <ul>
     <li><a href="#dom-idbrequest-onerror">attribute for IDBRequest</a><span>, in §4.1</span>
     <li><a href="#dom-idbdatabase-onerror">attribute for IDBDatabase</a><span>, in §4.4</span>
     <li><a href="#dom-idbtransaction-onerror">attribute for IDBTransaction</a><span>, in §4.9</span>
    </ul>
   <li><a href="#dom-idbkeyrange-only">only(value)</a><span>, in §4.7</span>
   <li><a href="#dom-idbrequest-onsuccess">onsuccess</a><span>, in §4.1</span>
   <li><a href="#dom-idbopendbrequest-onupgradeneeded">onupgradeneeded</a><span>, in §4.1</span>
   <li><a href="#dom-idbdatabase-onversionchange">onversionchange</a><span>, in §4.4</span>
   <li>
    openCursor()
    <ul>
     <li><a href="#dom-idbobjectstore-opencursor">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-opencursor">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    openCursor(query)
    <ul>
     <li><a href="#dom-idbobjectstore-opencursor">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-opencursor">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    openCursor(query, direction)
    <ul>
     <li><a href="#dom-idbobjectstore-opencursor">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-opencursor">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li><a href="#connection-opened">opened</a><span>, in §2.1.1</span>
   <li>
    openKeyCursor()
    <ul>
     <li><a href="#dom-idbobjectstore-openkeycursor">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-openkeycursor">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    openKeyCursor(query)
    <ul>
     <li><a href="#dom-idbobjectstore-openkeycursor">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-openkeycursor">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li>
    openKeyCursor(query, direction)
    <ul>
     <li><a href="#dom-idbobjectstore-openkeycursor">method for IDBObjectStore</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-openkeycursor">method for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li><a href="#dom-idbfactory-open">open(name)</a><span>, in §4.3</span>
   <li><a href="#dom-idbfactory-open">open(name, version)</a><span>, in §4.3</span>
   <li><a href="#request-open-request">open request</a><span>, in §2.8.1</span>
   <li><a href="#object-store-out-of-line-keys">out-of-line keys</a><span>, in §2.2</span>
   <li><a href="#dom-idbrequestreadystate-pending">pending</a><span>, in §4.1</span>
   <li><a href="#dom-idbrequestreadystate-pending">"pending"</a><span>, in §4.1</span>
   <li><a href="#request-placed">placed</a><span>, in §2.8</span>
   <li><a href="#cursor-position">position</a><span>, in §2.10</span>
   <li><a href="#dom-idbcursordirection-prev">prev</a><span>, in §4.8</span>
   <li><a href="#dom-idbcursordirection-prev">"prev"</a><span>, in §4.8</span>
   <li><a href="#dom-idbcursordirection-prevunique">"prevunique"</a><span>, in §4.8</span>
   <li><a href="#dom-idbcursordirection-prevunique">prevunique</a><span>, in §4.8</span>
   <li><a href="#dom-idbcursor-primarykey">primaryKey</a><span>, in §4.8</span>
   <li><a href="#dfn-processing-equivalence">processing equivalence</a><span>, in §Unnumbered section</span>
   <li><a href="#dom-idbobjectstore-put">put(value)</a><span>, in §4.5</span>
   <li><a href="#dom-idbobjectstore-put">put(value, key)</a><span>, in §4.5</span>
   <li><a href="#exceptiondef-request-quotaexceedederror">QuotaExceededError</a><span>, in §3</span>
   <li><a href="#cursor-range">range</a><span>, in §2.10</span>
   <li><a href="#dom-idbtransactionmode-readonly">readonly</a><span>, in §4.9</span>
   <li><a href="#dom-idbtransactionmode-readonly">"readonly"</a><span>, in §4.9</span>
   <li><a href="#exceptiondef-request-readonlyerror">ReadOnlyError</a><span>, in §3</span>
   <li><a href="#transaction-read-only-transaction">read-only transaction</a><span>, in §2.7</span>
   <li><a href="#dom-idbtransactionmode-readwrite">readwrite</a><span>, in §4.9</span>
   <li><a href="#dom-idbtransactionmode-readwrite">"readwrite"</a><span>, in §4.9</span>
   <li><a href="#transaction-read-write-transaction">read/write transaction</a><span>, in §2.7</span>
   <li><a href="#dom-idbrequest-readystate">readyState</a><span>, in §4.1</span>
   <li><a href="#object-store-record">record</a><span>, in §2.2</span>
   <li><a href="#index-referenced">referenced</a><span>, in §2.6</span>
   <li><a href="#index-referenced-value">referenced value</a><span>, in §2.6</span>
   <li><a href="#index-referenced">references</a><span>, in §2.6</span>
   <li><a href="#request">request</a><span>, in §2.8</span>
   <li><a href="#transaction-request-list">request list</a><span>, in §2.7</span>
   <li>
    result
    <ul>
     <li><a href="#request-result">dfn for request</a><span>, in §2.8</span>
     <li><a href="#dom-idbrequest-result">attribute for IDBRequest</a><span>, in §4.1</span>
    </ul>
   <li><a href="#transaction-scope">scope</a><span>, in §2.7</span>
   <li><a href="#sorted-list">sorted list</a><span>, in §2</span>
   <li>
    source
    <ul>
     <li><a href="#request-source">dfn for request</a><span>, in §2.8</span>
     <li><a href="#cursor-source">dfn for cursor</a><span>, in §2.10</span>
     <li><a href="#dom-idbrequest-source">attribute for IDBRequest</a><span>, in §4.1</span>
     <li><a href="#dom-idbcursor-source">attribute for IDBCursor</a><span>, in §4.8</span>
    </ul>
   <li><a href="#transaction-start">start</a><span>, in §2.7.1</span>
   <li><a href="#transaction-start">started</a><span>, in §2.7.1</span>
   <li><a href="#request-steps-for-aborting-an-upgrade-transaction">steps for aborting an upgrade transaction</a><span>, in §5.8</span>
   <li><a href="#request-steps-for-aborting-a-transaction">steps for aborting a transaction</a><span>, in §5.5</span>
   <li><a href="#request-steps-for-asynchronously-executing-a-request">steps for asynchronously executing a request</a><span>, in §5.6</span>
   <li><a href="#request-steps-for-clearing-an-object-store">steps for clearing an object store</a><span>, in §6.6</span>
   <li><a href="#request-steps-for-closing-a-database-connection">steps for closing a database connection</a><span>, in §5.2</span>
   <li><a href="#request-steps-for-committing-a-transaction">steps for committing a transaction</a><span>, in §5.4</span>
   <li><a href="#request-steps-for-deleting-a-database">steps for deleting a database</a><span>, in §5.3</span>
   <li><a href="#request-steps-for-deleting-records-from-an-object-store">steps for deleting records from an object store</a><span>, in §6.4</span>
   <li><a href="#request-steps-for-iterating-a-cursor">steps for iterating a cursor</a><span>, in §6.7</span>
   <li><a href="#request-steps-for-opening-a-database">steps for opening a database</a><span>, in §5.1</span>
   <li><a href="#request-steps-for-retrieving-a-key-from-an-object-store">steps for retrieving a key from an object store</a><span>, in §6.2</span>
   <li><a href="#request-steps-for-retrieving-a-referenced-value-from-an-index">steps for retrieving a referenced value from an index</a><span>, in §6.3</span>
   <li><a href="#request-steps-for-retrieving-a-value-from-an-index">steps for retrieving a value from an index</a><span>, in §6.3</span>
   <li><a href="#request-steps-for-retrieving-a-value-from-an-object-store">steps for retrieving a value from an object store</a><span>, in §6.2</span>
   <li><a href="#request-steps-for-retrieving-multiple-keys-from-an-object-store">steps for retrieving multiple keys from an object store</a><span>, in §6.2</span>
   <li><a href="#request-steps-for-retrieving-multiple-referenced-values-from-an-index">steps for retrieving multiple referenced values from an index</a><span>, in §6.3</span>
   <li><a href="#request-steps-for-retrieving-multiple-values-from-an-index">steps for retrieving multiple values from an index</a><span>, in §6.3</span>
   <li><a href="#request-steps-for-retrieving-multiple-values-from-an-object-store">steps for retrieving multiple values from an object store</a><span>, in §6.2</span>
   <li><a href="#request-steps-for-running-an-upgrade-transaction">steps for running an upgrade transaction</a><span>, in §5.7</span>
   <li><a href="#request-steps-for-storing-a-record-into-an-object-store">steps for storing a record into an object store</a><span>, in §6.1</span>
   <li><a href="#request-steps-to-count-the-records-in-a-range">steps to count the records in a range</a><span>, in §6.5</span>
   <li><a href="#subkeys">subkeys</a><span>, in §2.4</span>
   <li><a href="#exceptiondef-request-syntaxerror">SyntaxError</a><span>, in §3</span>
   <li><a href="#transaction-concept">Transaction</a><span>, in §2.7</span>
   <li>
    transaction
    <ul>
     <li><a href="#object-store-handle-transaction">dfn for object-store-handle</a><span>, in §2.2.1</span>
     <li><a href="#index-handle-transaction">dfn for index-handle</a><span>, in §2.6.1</span>
     <li><a href="#request-transaction">dfn for request</a><span>, in §2.8</span>
     <li><a href="#cursor-transaction">dfn for cursor</a><span>, in §2.10</span>
     <li><a href="#dom-idbrequest-transaction">attribute for IDBRequest</a><span>, in §4.1</span>
     <li><a href="#dom-idbobjectstore-transaction">attribute for IDBObjectStore</a><span>, in §4.5</span>
    </ul>
   <li><a href="#exceptiondef-request-transactioninactiveerror">TransactionInactiveError</a><span>, in §3</span>
   <li><a href="#dom-idbdatabase-transaction">transaction(storeNames)</a><span>, in §4.4</span>
   <li><a href="#dom-idbdatabase-transaction">transaction(storeNames, mode)</a><span>, in §4.4</span>
   <li><a href="#key-type">type</a><span>, in §2.4</span>
   <li><a href="#request-unbounded-key-range">unbounded key range</a><span>, in §2.9</span>
   <li>
    unique
    <ul>
     <li><a href="#dom-idbindexparameters-unique">dict-member for IDBIndexParameters</a><span>, in §4.5</span>
     <li><a href="#dom-idbindex-unique">attribute for IDBIndex</a><span>, in §4.6</span>
    </ul>
   <li><a href="#index-unique-flag">unique flag</a><span>, in §2.6</span>
   <li><a href="#exceptiondef-request-unknownerror">UnknownError</a><span>, in §3</span>
   <li><a href="#dom-idbcursor-update">update(value)</a><span>, in §4.8</span>
   <li><a href="#request-upgradeneeded">upgradeneeded</a><span>, in §2.8.1</span>
   <li><a href="#upgrade-transaction">upgrade transaction</a><span>, in §2.7.2</span>
   <li><a href="#dom-idbkeyrange-upper">upper</a><span>, in §4.7</span>
   <li><a href="#request-upper-bound">upper bound</a><span>, in §2.9</span>
   <li><a href="#dom-idbkeyrange-upperbound">upperBound(upper)</a><span>, in §4.7</span>
   <li><a href="#dom-idbkeyrange-upperbound">upperBound(upper, open)</a><span>, in §4.7</span>
   <li><a href="#dom-idbkeyrange-upperopen">upperOpen</a><span>, in §4.7</span>
   <li><a href="#request-upper-open-flag">upper open flag</a><span>, in §2.9</span>
   <li><a href="#valid-key-path">valid key path</a><span>, in §2.5</span>
   <li>
    value
    <ul>
     <li><a href="#value">definition of</a><span>, in §2.3</span>
     <li><a href="#key-value">dfn for key</a><span>, in §2.4</span>
     <li><a href="#cursor-value">dfn for cursor</a><span>, in §2.10</span>
     <li><a href="#dom-idbcursorwithvalue-value">attribute for IDBCursorWithValue</a><span>, in §4.8</span>
    </ul>
   <li>
    version
    <ul>
     <li><a href="#database-version">dfn for database</a><span>, in §2.1</span>
     <li><a href="#connection-version">dfn for connection</a><span>, in §2.1.1</span>
     <li><a href="#dom-idbdatabase-version">attribute for IDBDatabase</a><span>, in §4.4</span>
    </ul>
   <li><a href="#dom-idbtransactionmode-versionchange">"versionchange"</a><span>, in §4.9</span>
   <li><a href="#dom-idbtransactionmode-versionchange">versionchange</a><span>, in §4.9</span>
   <li><a href="#exceptiondef-request-versionerror">VersionError</a><span>, in §3</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#domerror">DOMError</a>
     <li><a href="https://dom.spec.whatwg.org/#event">Event</a>
     <li><a href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a>
     <li><a href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>
     <li><a href="https://dom.spec.whatwg.org/#canceled-flag">canceled flag</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-document">document</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-event">event</a>
     <li><a href="https://dom.spec.whatwg.org/#get-the-parent">get the parent</a>
     <li><a href="https://dom.spec.whatwg.org/#dom-event-preventdefault">preventDefault()</a>
     <li><a href="https://dom.spec.whatwg.org/#dom-event-type">type</a>
    </ul>
   <li>
    <a data-link-type="biblio">[ecma262]</a> defines the following terms:
    <ul>
     <li><a href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">!</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-algorithm-conventions">?</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-array-objects">array</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-arraybuffer-objects">arraybuffer</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-date-objects">date</a>
     <li><a href="https://tc39.github.io/ecma262/#prod-IdentifierName">identifiername</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-ecmascript-language-types-number-type">number</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-object-objects">object</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-ecmascript-language-types-string-type">string</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">typeerror</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-typedarray-objects">uint8array</a>
    </ul>
   <li>
    <a data-link-type="biblio">[FileAPI]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/FileAPI/#dfn-Blob">Blob</a>
     <li><a href="https://w3c.github.io/FileAPI/#dfn-file">File</a>
     <li><a href="https://w3c.github.io/FileAPI/#dfn-lastModified">lastModified</a>
     <li><a href="https://w3c.github.io/FileAPI/#dfn-name">name</a>
     <li><a href="https://w3c.github.io/FileAPI/#dfn-size">size</a>
     <li><a href="https://w3c.github.io/FileAPI/#dfn-type">type</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/dom.html#document">Document</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>
     <li><a href="https://html.spec.whatwg.org/multipage/scripting.html#imagedata">ImageData</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope">WindowOrWorkerGlobalScope</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#browsing-context">browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#dom-document-domain">domain</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">event handler idl attributes</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop">event loop</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#strictly-split-a-string">strictly splitting the string</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#structuredclone">structured clone</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#safe-passing-of-structured-data">structured clone algorithm</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue">task queue</a>
     <li><a href="https://html.spec.whatwg.org/multipage/workers.html#worker">worker</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><a href="https://heycam.github.io/webidl/#dfn-DOMException">DOMException</a>
     <li><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>
     <li><a href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>
     <li><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-create-exception">create exception</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-determine-the-value-of-an-indexed-property">determine the value of an indexed property</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-get-buffer-source-copy">getting a copy of the bytes held by a buffer source</a>
     <li><a href="https://heycam.github.io/webidl/#idl-octet">octet</a>
     <li><a href="https://heycam.github.io/webidl/#idl-sequence">sequence&lt;domstring></a>
     <li><a href="https://heycam.github.io/webidl/#dfn-supported-property-indices">supported property indices</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-throw">throw</a>
     <li><a href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecma-262">[ECMA-262]
   <dd><a href="https://tc39.github.io/ecma262/">ECMAScript Language Specification</a>. URL: <a href="https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a>
   <dt id="biblio-fileapi">[FileAPI]
   <dd>Arun Ranganathan; Jonas Sicking. <a href="https://w3c.github.io/FileAPI/">File API</a>. 21 April 2015. WD. URL: <a href="https://w3c.github.io/FileAPI/">https://w3c.github.io/FileAPI/</a>
   <dt id="biblio-html">[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Cameron McCormack; Boris Zbarsky. <a href="https://heycam.github.io/webidl/">WebIDL Level 1</a>. 15 September 2016. PR. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-cookies">[COOKIES]
   <dd>A. Barth. <a href="https://tools.ietf.org/html/rfc6265">HTTP State Management Mechanism</a>. April 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6265">https://tools.ietf.org/html/rfc6265</a>
   <dt id="biblio-dom-level-3-core">[DOM-Level-3-core]
   <dd>Arnaud Le Hors; et al. <a href="https://www.w3.org/TR/DOM-Level-3-Core/">Document Object Model (DOM) Level 3 Core Specification</a>. 7 April 2004. REC. URL: <a href="https://www.w3.org/TR/DOM-Level-3-Core/">https://www.w3.org/TR/DOM-Level-3-Core/</a>
   <dt id="biblio-webstorage">[WEBSTORAGE]
   <dd>Ian Hickson. <a href="https://w3c.github.io/webstorage/">Web Storage (Second Edition)</a>. 19 April 2016. REC. URL: <a href="https://w3c.github.io/webstorage/">https://w3c.github.io/webstorage/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbrequest">IDBRequest</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>                                        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbrequest-result">result</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#dfn-DOMException">DOMException</a>?                              <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMException?" href="#dom-idbrequest-error">error</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> (<a class="n" data-link-type="idl-name" href="#request-idbobjectstore">IDBObjectStore</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#request-idbindex">IDBIndex</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#request-idbcursor">IDBCursor</a>)? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="(IDBObjectStore or IDBIndex or IDBCursor)?" href="#dom-idbrequest-source">source</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbtransaction">IDBTransaction</a>?                            <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBTransaction?" href="#dom-idbrequest-transaction">transaction</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbrequestreadystate">IDBRequestReadyState</a>                       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBRequestReadyState" href="#dom-idbrequest-readystate">readyState</a>;

  // Event handlers:
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbrequest-onsuccess">onsuccess</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbrequest-onerror">onerror</a>;
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-request-idbrequestreadystate">IDBRequestReadyState</a> {
  <a class="s" href="#dom-idbrequestreadystate-pending">"pending"</a>,
  <a class="s" href="#dom-idbrequestreadystate-done">"done"</a>
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbopendbrequest">IDBOpenDBRequest</a> : <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> {
  // Event handlers:
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbopendbrequest-onblocked">onblocked</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbopendbrequest-onupgradeneeded">onupgradeneeded</a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>),
 <a class="nv" href="#dom-idbversionchangeevent-idbversionchangeevent">Constructor</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-idbversionchangeevent-idbversionchangeevent-type-eventinitdict-type">type</a>, <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-request-idbversionchangeeventinit">IDBVersionChangeEventInit</a> <a class="nv" href="#dom-idbversionchangeevent-idbversionchangeevent-type-eventinitdict-eventinitdict">eventInitDict</a>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbversionchangeevent">IDBVersionChangeEvent</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span>  <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long long" href="#dom-idbversionchangeevent-oldversion">oldVersion</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long long?" href="#dom-idbversionchangeevent-newversion">newVersion</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-request-idbversionchangeeventinit">IDBVersionChangeEventInit</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span>  <a class="nv" data-default="0" data-type="unsigned long long  " href="#dom-idbversionchangeeventinit-oldversion">oldVersion</a> = 0;
  <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span>? <a class="nv" data-default="null" data-type="unsigned long long? " href="#dom-idbversionchangeeventinit-newversion">newVersion</a> = <span class="kt">null</span>;
};

<span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope">WindowOrWorkerGlobalScope</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbfactory">IDBFactory</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBFactory" href="#dom-windoworworkerglobalscope-indexeddb">indexedDB</a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbfactory">IDBFactory</a> {
  <a class="n" data-link-type="idl-name" href="#request-idbopendbrequest">IDBOpenDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbfactory-open">open</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-idbfactory-open-name-version-name">name</a>,
                        [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <a class="nv" href="#dom-idbfactory-open-name-version-version">version</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbopendbrequest">IDBOpenDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbfactory-deletedatabase">deleteDatabase</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-idbfactory-deletedatabase-name-name">name</a>);

  <span class="kt">short</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbfactory-cmp">cmp</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbfactory-cmp-first-second-first">first</a>, <span class="kt">any</span> <a class="nv" href="#dom-idbfactory-cmp-first-second-second">second</a>);
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbdatabase">IDBDatabase</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-idbdatabase-name">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long long" href="#dom-idbdatabase-version">version</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-domstringlist">DOMStringList</a>      <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMStringList" href="#dom-idbdatabase-objectstorenames">objectStoreNames</a>;

  <a class="n" data-link-type="idl-name" href="#request-idbtransaction">IDBTransaction</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbdatabase-transaction">transaction</a>((<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">sequence</span>&lt;<span class="kt">DOMString</span>>) <a class="nv" href="#dom-idbdatabase-transaction-storenames-mode-storenames">storeNames</a>,
                             <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbtransactionmode">IDBTransactionMode</a> <a class="nv" href="#dom-idbdatabase-transaction-storenames-mode-mode">mode</a> = "readonly");
  <span class="kt">void</span>           <a class="nv idl-code" data-link-type="method" href="#dom-idbdatabase-close">close</a>();

  <a class="n" data-link-type="idl-name" href="#request-idbobjectstore">IDBObjectStore</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbdatabase-createobjectstore">createObjectStore</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-idbdatabase-createobjectstore-name-options-name">name</a>,
                                   <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-request-idbobjectstoreparameters">IDBObjectStoreParameters</a> <a class="nv" href="#dom-idbdatabase-createobjectstore-name-options-options">options</a>);
  <span class="kt">void</span>           <a class="nv idl-code" data-link-type="method" href="#dom-idbdatabase-deleteobjectstore">deleteObjectStore</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-idbdatabase-deleteobjectstore-name-name">name</a>);

  // Event handlers:
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbdatabase-onabort">onabort</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbdatabase-onclose">onclose</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbdatabase-onerror">onerror</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbdatabase-onversionchange">onversionchange</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-request-idbobjectstoreparameters">IDBObjectStoreParameters</a> {
  (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">sequence</span>&lt;<span class="kt">DOMString</span>>)? <a class="nv" data-default="null" data-type="(DOMString or sequence<DOMString>)? " href="#dom-idbobjectstoreparameters-keypath">keyPath</a> = <span class="kt">null</span>;
  <span class="kt">boolean</span>                             <a class="nv" data-default="false" data-type="boolean                             " href="#dom-idbobjectstoreparameters-autoincrement">autoIncrement</a> = <span class="kt">false</span>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbobjectstore">IDBObjectStore</a> {
           <span class="kt">attribute</span> <span class="kt">DOMString</span>      <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-idbobjectstore-name">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>            <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbobjectstore-keypath">keyPath</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-domstringlist">DOMStringList</a>  <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMStringList" href="#dom-idbobjectstore-indexnames">indexNames</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbtransaction">IDBTransaction</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBTransaction" href="#dom-idbobjectstore-transaction">transaction</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span>        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbobjectstore-autoincrement">autoIncrement</a>;

  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-put">put</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-put-value-key-value">value</a>, <span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-put-value-key-key">key</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-add">add</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-add-value-key-value">value</a>, <span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-add-value-key-key">key</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-delete">delete</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-delete-query-query">query</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-clear">clear</a>();
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-get">get</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-get-query-query">query</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-getkey">getKey</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-getkey-query-query">query</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-getall">getAll</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-getall-query-count-query">query</a>,
                    [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv" href="#dom-idbobjectstore-getall-query-count-count">count</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-getallkeys">getAllKeys</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-getallkeys-query-count-query">query</a>,
                        [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv" href="#dom-idbobjectstore-getallkeys-query-count-count">count</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-count">count</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-count-query-query">query</a>);

  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-opencursor">openCursor</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-opencursor-query-direction-query">query</a>,
                        <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection">IDBCursorDirection</a> <a class="nv" href="#dom-idbobjectstore-opencursor-query-direction-direction">direction</a> = "next");
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-openkeycursor">openKeyCursor</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbobjectstore-openkeycursor-query-direction-query">query</a>,
                           <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection">IDBCursorDirection</a> <a class="nv" href="#dom-idbobjectstore-openkeycursor-query-direction-direction">direction</a> = "next");

  <a class="n" data-link-type="idl-name" href="#request-idbindex">IDBIndex</a>   <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-index">index</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-idbobjectstore-index-name-name">name</a>);

  <a class="n" data-link-type="idl-name" href="#request-idbindex">IDBIndex</a>   <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-createindex">createIndex</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-idbobjectstore-createindex-name-keypath-options-name">name</a>,
                         (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">sequence</span>&lt;<span class="kt">DOMString</span>>) <a class="nv" href="#dom-idbobjectstore-createindex-name-keypath-options-keypath">keyPath</a>,
                         <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-request-idbindexparameters">IDBIndexParameters</a> <a class="nv" href="#dom-idbobjectstore-createindex-name-keypath-options-options">options</a>);
  <span class="kt">void</span>       <a class="nv idl-code" data-link-type="method" href="#dom-idbobjectstore-deleteindex">deleteIndex</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-idbobjectstore-deleteindex-indexname-indexname">indexName</a>);
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-request-idbindexparameters">IDBIndexParameters</a> {
  <span class="kt">boolean</span> <a class="nv" data-default="false" data-type="boolean " href="#dom-idbindexparameters-unique">unique</a> = <span class="kt">false</span>;
  <span class="kt">boolean</span> <a class="nv" data-default="false" data-type="boolean " href="#dom-idbindexparameters-multientry">multiEntry</a> = <span class="kt">false</span>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbindex">IDBIndex</a> {
           <span class="kt">attribute</span> <span class="kt">DOMString</span>      <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-idbindex-name">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbobjectstore">IDBObjectStore</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBObjectStore" href="#dom-idbindex-objectstore">objectStore</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>            <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbindex-keypath">keyPath</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span>        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbindex-multientry">multiEntry</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span>        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbindex-unique">unique</a>;

  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-get">get</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbindex-get-query-query">query</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-getkey">getKey</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbindex-getkey-query-query">query</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-getall">getAll</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbindex-getall-query-count-query">query</a>,
                    [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv" href="#dom-idbindex-getall-query-count-count">count</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-getallkeys">getAllKeys</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbindex-getallkeys-query-count-query">query</a>,
                        [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">optional</span> <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv" href="#dom-idbindex-getallkeys-query-count-count">count</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-count">count</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbindex-count-query-query">query</a>);

  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-opencursor">openCursor</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbindex-opencursor-query-direction-query">query</a>,
                        <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection">IDBCursorDirection</a> <a class="nv" href="#dom-idbindex-opencursor-query-direction-direction">direction</a> = "next");
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbindex-openkeycursor">openKeyCursor</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbindex-openkeycursor-query-direction-query">query</a>,
                           <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection">IDBCursorDirection</a> <a class="nv" href="#dom-idbindex-openkeycursor-query-direction-direction">direction</a> = "next");
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbkeyrange">IDBKeyRange</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>     <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbkeyrange-lower">lower</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>     <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbkeyrange-upper">upper</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbkeyrange-loweropen">lowerOpen</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-idbkeyrange-upperopen">upperOpen</a>;

  // Static construction methods:
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#request-idbkeyrange">IDBKeyRange</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-only">only</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbkeyrange-only-value-value">value</a>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#request-idbkeyrange">IDBKeyRange</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-lowerbound">lowerBound</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbkeyrange-lowerbound-lower-open-lower">lower</a>, <span class="kt">optional</span> <span class="kt">boolean</span> <a class="nv" href="#dom-idbkeyrange-lowerbound-lower-open-open">open</a> = <span class="kt">false</span>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#request-idbkeyrange">IDBKeyRange</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-upperbound">upperBound</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbkeyrange-upperbound-upper-open-upper">upper</a>, <span class="kt">optional</span> <span class="kt">boolean</span> <a class="nv" href="#dom-idbkeyrange-upperbound-upper-open-open">open</a> = <span class="kt">false</span>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#request-idbkeyrange">IDBKeyRange</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-bound">bound</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-lower">lower</a>,
                           <span class="kt">any</span> <a class="nv" href="#dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-upper">upper</a>,
                           <span class="kt">optional</span> <span class="kt">boolean</span> <a class="nv" href="#dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-loweropen">lowerOpen</a> = <span class="kt">false</span>,
                           <span class="kt">optional</span> <span class="kt">boolean</span> <a class="nv" href="#dom-idbkeyrange-bound-lower-upper-loweropen-upperopen-upperopen">upperOpen</a> = <span class="kt">false</span>);

  <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbkeyrange-includes">includes</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbkeyrange-includes-key-key">key</a>);
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbcursor">IDBCursor</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> (<a class="n" data-link-type="idl-name" href="#request-idbobjectstore">IDBObjectStore</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#request-idbindex">IDBIndex</a>) <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="(IDBObjectStore or IDBIndex)" href="#dom-idbcursor-source">source</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbcursordirection">IDBCursorDirection</a>           <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBCursorDirection" href="#dom-idbcursor-direction">direction</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>                          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbcursor-key">key</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span>                          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbcursor-primarykey">primaryKey</a>;

  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-advance">advance</a>([<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a>] <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv" href="#dom-idbcursor-advance-count-count">count</a>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-continue">continue</a>(<span class="kt">optional</span> <span class="kt">any</span> <a class="nv" href="#dom-idbcursor-continue-key-key">key</a>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-continueprimarykey">continuePrimaryKey</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbcursor-continueprimarykey-key-primarykey-key">key</a>, <span class="kt">any</span> <a class="nv" href="#dom-idbcursor-continueprimarykey-key-primarykey-primarykey">primaryKey</a>);

  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-update">update</a>(<span class="kt">any</span> <a class="nv" href="#dom-idbcursor-update-value-value">value</a>);
  <a class="n" data-link-type="idl-name" href="#request-idbrequest">IDBRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbcursor-delete">delete</a>();
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-request-idbcursordirection">IDBCursorDirection</a> {
  <a class="s" href="#dom-idbcursordirection-next">"next"</a>,
  <a class="s" href="#dom-idbcursordirection-nextunique">"nextunique"</a>,
  <a class="s" href="#dom-idbcursordirection-prev">"prev"</a>,
  <a class="s" href="#dom-idbcursordirection-prevunique">"prevunique"</a>
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbcursorwithvalue">IDBCursorWithValue</a> : <a class="n" data-link-type="idl-name" href="#request-idbcursor">IDBCursor</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="any" href="#dom-idbcursorwithvalue-value">value</a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#request-idbtransaction">IDBTransaction</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-domstringlist">DOMStringList</a>      <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMStringList" href="#dom-idbtransaction-objectstorenames">objectStoreNames</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-request-idbtransactionmode">IDBTransactionMode</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBTransactionMode" href="#dom-idbtransaction-mode">mode</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#request-idbdatabase">IDBDatabase</a>        <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IDBDatabase" href="#dom-idbtransaction-db">db</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#dfn-DOMException">DOMException</a>       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMException" href="#dom-idbtransaction-error">error</a>;

  <a class="n" data-link-type="idl-name" href="#request-idbobjectstore">IDBObjectStore</a> <a class="nv idl-code" data-link-type="method" href="#dom-idbtransaction-objectstore">objectStore</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-idbtransaction-objectstore-name-name">name</a>);
  <span class="kt">void</span>           <a class="nv idl-code" data-link-type="method" href="#dom-idbtransaction-abort">abort</a>();

  // Event handlers:
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbtransaction-onabort">onabort</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbtransaction-oncomplete">oncomplete</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-idbtransaction-onerror">onerror</a>;
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-request-idbtransactionmode">IDBTransactionMode</a> {
  <a class="s" href="#dom-idbtransactionmode-readonly">"readonly"</a>,
  <a class="s" href="#dom-idbtransactionmode-readwrite">"readwrite"</a>,
  <a class="s" href="#dom-idbtransactionmode-versionchange">"versionchange"</a>
};

<span class="kt">interface</span> <a class="nv" href="#request-domstringlist">DOMStringList</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long" href="#dom-domstringlist-length">length</a>;
    <span class="kt">getter</span> <span class="kt">DOMString</span> (<span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv" href="#dom-domstringlist-__getter__-index-index">index</a>);
    <span class="kt">DOMString</span>? <a class="nv idl-code" data-link-type="method" href="#dom-domstringlist-item">item</a>(<span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv" href="#dom-domstringlist-item-index-index">index</a>);

    <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="method" href="#dom-domstringlist-contains">contains</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-domstringlist-contains-str-str">str</a>);
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Simplify this section as much as possible by relying more on <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> for key conversion logic. <a href="#issue-8f674373"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="sorted-list">
   <b><a href="#sorted-list">#sorted-list</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sorted-list-1">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-sorted-list-2">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-sorted-list-3">4.9. The IDBTransaction interface</a> <a href="#ref-for-sorted-list-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="database">
   <b><a href="#database">#database</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-database-1">2.1. Database</a> <a href="#ref-for-database-2">(2)</a> <a href="#ref-for-database-3">(3)</a> <a href="#ref-for-database-4">(4)</a> <a href="#ref-for-database-5">(5)</a>
    <li><a href="#ref-for-database-6">2.1.1. Database Connection</a> <a href="#ref-for-database-7">(2)</a> <a href="#ref-for-database-8">(3)</a> <a href="#ref-for-database-9">(4)</a> <a href="#ref-for-database-10">(5)</a> <a href="#ref-for-database-11">(6)</a> <a href="#ref-for-database-12">(7)</a>
    <li><a href="#ref-for-database-13">2.2. Object Store</a> <a href="#ref-for-database-14">(2)</a>
    <li><a href="#ref-for-database-15">2.7. Transactions</a>
    <li><a href="#ref-for-database-16">2.7.1. Transaction Lifetime</a> <a href="#ref-for-database-17">(2)</a> <a href="#ref-for-database-18">(3)</a>
    <li><a href="#ref-for-database-19">2.7.2. Upgrade Transactions</a> <a href="#ref-for-database-20">(2)</a> <a href="#ref-for-database-21">(3)</a> <a href="#ref-for-database-22">(4)</a>
    <li><a href="#ref-for-database-23">2.8. Requests</a>
    <li><a href="#ref-for-database-24">2.8.1. Open Requests</a>
    <li><a href="#ref-for-database-25">4.1. The IDBRequest interface</a> <a href="#ref-for-database-26">(2)</a> <a href="#ref-for-database-27">(3)</a> <a href="#ref-for-database-28">(4)</a>
    <li><a href="#ref-for-database-29">4.3. The IDBFactory interface</a> <a href="#ref-for-database-30">(2)</a> <a href="#ref-for-database-31">(3)</a> <a href="#ref-for-database-32">(4)</a>
    <li><a href="#ref-for-database-33">4.4. The IDBDatabase interface</a> <a href="#ref-for-database-34">(2)</a> <a href="#ref-for-database-35">(3)</a> <a href="#ref-for-database-36">(4)</a> <a href="#ref-for-database-37">(5)</a> <a href="#ref-for-database-38">(6)</a> <a href="#ref-for-database-39">(7)</a> <a href="#ref-for-database-40">(8)</a> <a href="#ref-for-database-41">(9)</a>
    <li><a href="#ref-for-database-42">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-database-43">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-database-44">5.1. Opening a database</a> <a href="#ref-for-database-45">(2)</a> <a href="#ref-for-database-46">(3)</a>
    <li><a href="#ref-for-database-47">5.2. Closing a database</a>
    <li><a href="#ref-for-database-48">5.3. Deleting a database</a> <a href="#ref-for-database-49">(2)</a>
    <li><a href="#ref-for-database-50">5.4. Committing a transaction</a> <a href="#ref-for-database-51">(2)</a> <a href="#ref-for-database-52">(3)</a>
    <li><a href="#ref-for-database-53">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-database-54">5.7. Running an upgrade transaction</a> <a href="#ref-for-database-55">(2)</a> <a href="#ref-for-database-56">(3)</a> <a href="#ref-for-database-57">(4)</a>
    <li><a href="#ref-for-database-58">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-database-59">(2)</a> <a href="#ref-for-database-60">(3)</a>
    <li><a href="#ref-for-database-61">6. Database operations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="database-name">
   <b><a href="#database-name">#database-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-database-name-1">2.8.1. Open Requests</a>
    <li><a href="#ref-for-database-name-2">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-database-name-3">5.1. Opening a database</a> <a href="#ref-for-database-name-4">(2)</a>
    <li><a href="#ref-for-database-name-5">5.3. Deleting a database</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="database-version">
   <b><a href="#database-version">#database-version</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-database-version-1">2.1. Database</a>
    <li><a href="#ref-for-database-version-2">2.7.2. Upgrade Transactions</a> <a href="#ref-for-database-version-3">(2)</a> <a href="#ref-for-database-version-4">(3)</a> <a href="#ref-for-database-version-5">(4)</a>
    <li><a href="#ref-for-database-version-6">4.3. The IDBFactory interface</a> <a href="#ref-for-database-version-7">(2)</a>
    <li><a href="#ref-for-database-version-8">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-database-version-9">5.1. Opening a database</a> <a href="#ref-for-database-version-10">(2)</a> <a href="#ref-for-database-version-11">(3)</a> <a href="#ref-for-database-version-12">(4)</a> <a href="#ref-for-database-version-13">(5)</a> <a href="#ref-for-database-version-14">(6)</a>
    <li><a href="#ref-for-database-version-15">5.3. Deleting a database</a> <a href="#ref-for-database-version-16">(2)</a> <a href="#ref-for-database-version-17">(3)</a>
    <li><a href="#ref-for-database-version-18">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-database-version-19">5.7. Running an upgrade transaction</a>
    <li><a href="#ref-for-database-version-20">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-database-version-21">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="connection">
   <b><a href="#connection">#connection</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-connection-1">2.1.1. Database Connection</a> <a href="#ref-for-connection-2">(2)</a> <a href="#ref-for-connection-3">(3)</a> <a href="#ref-for-connection-4">(4)</a> <a href="#ref-for-connection-5">(5)</a> <a href="#ref-for-connection-6">(6)</a> <a href="#ref-for-connection-7">(7)</a> <a href="#ref-for-connection-8">(8)</a> <a href="#ref-for-connection-9">(9)</a> <a href="#ref-for-connection-10">(10)</a> <a href="#ref-for-connection-11">(11)</a> <a href="#ref-for-connection-12">(12)</a> <a href="#ref-for-connection-13">(13)</a> <a href="#ref-for-connection-14">(14)</a>
    <li><a href="#ref-for-connection-15">2.7. Transactions</a>
    <li><a href="#ref-for-connection-16">2.7.2. Upgrade Transactions</a> <a href="#ref-for-connection-17">(2)</a> <a href="#ref-for-connection-18">(3)</a> <a href="#ref-for-connection-19">(4)</a>
    <li><a href="#ref-for-connection-20">2.8.1. Open Requests</a> <a href="#ref-for-connection-21">(2)</a>
    <li><a href="#ref-for-connection-22">4.4. The IDBDatabase interface</a> <a href="#ref-for-connection-23">(2)</a> <a href="#ref-for-connection-24">(3)</a> <a href="#ref-for-connection-25">(4)</a> <a href="#ref-for-connection-26">(5)</a> <a href="#ref-for-connection-27">(6)</a> <a href="#ref-for-connection-28">(7)</a> <a href="#ref-for-connection-29">(8)</a> <a href="#ref-for-connection-30">(9)</a> <a href="#ref-for-connection-31">(10)</a> <a href="#ref-for-connection-32">(11)</a> <a href="#ref-for-connection-33">(12)</a> <a href="#ref-for-connection-34">(13)</a> <a href="#ref-for-connection-35">(14)</a> <a href="#ref-for-connection-36">(15)</a> <a href="#ref-for-connection-37">(16)</a> <a href="#ref-for-connection-38">(17)</a> <a href="#ref-for-connection-39">(18)</a>
    <li><a href="#ref-for-connection-40">4.9. The IDBTransaction interface</a> <a href="#ref-for-connection-41">(2)</a>
    <li><a href="#ref-for-connection-42">5.1. Opening a database</a> <a href="#ref-for-connection-43">(2)</a> <a href="#ref-for-connection-44">(3)</a> <a href="#ref-for-connection-45">(4)</a>
    <li><a href="#ref-for-connection-46">5.2. Closing a database</a> <a href="#ref-for-connection-47">(2)</a>
    <li><a href="#ref-for-connection-48">5.3. Deleting a database</a> <a href="#ref-for-connection-49">(2)</a> <a href="#ref-for-connection-50">(3)</a>
    <li><a href="#ref-for-connection-51">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-connection-52">5.7. Running an upgrade transaction</a> <a href="#ref-for-connection-53">(2)</a>
    <li><a href="#ref-for-connection-54">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="connection-version">
   <b><a href="#connection-version">#connection-version</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-connection-version-1">2.1.1. Database Connection</a>
    <li><a href="#ref-for-connection-version-2">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-connection-version-3">5.1. Opening a database</a>
    <li><a href="#ref-for-connection-version-4">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="connection-close-pending-flag">
   <b><a href="#connection-close-pending-flag">#connection-close-pending-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-connection-close-pending-flag-1">2.1.1. Database Connection</a>
    <li><a href="#ref-for-connection-close-pending-flag-2">4.4. The IDBDatabase interface</a> <a href="#ref-for-connection-close-pending-flag-3">(2)</a> <a href="#ref-for-connection-close-pending-flag-4">(3)</a>
    <li><a href="#ref-for-connection-close-pending-flag-5">5.1. Opening a database</a>
    <li><a href="#ref-for-connection-close-pending-flag-6">5.2. Closing a database</a> <a href="#ref-for-connection-close-pending-flag-7">(2)</a> <a href="#ref-for-connection-close-pending-flag-8">(3)</a>
    <li><a href="#ref-for-connection-close-pending-flag-9">5.3. Deleting a database</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="connection-closed">
   <b><a href="#connection-closed">#connection-closed</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-connection-closed-1">2.8.1. Open Requests</a>
    <li><a href="#ref-for-connection-closed-2">4.4. The IDBDatabase interface</a> <a href="#ref-for-connection-closed-3">(2)</a> <a href="#ref-for-connection-closed-4">(3)</a>
    <li><a href="#ref-for-connection-closed-5">5.1. Opening a database</a> <a href="#ref-for-connection-closed-6">(2)</a>
    <li><a href="#ref-for-connection-closed-7">5.2. Closing a database</a>
    <li><a href="#ref-for-connection-closed-8">5.3. Deleting a database</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="connection-object-store-set">
   <b><a href="#connection-object-store-set">#connection-object-store-set</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-connection-object-store-set-1">4.4. The IDBDatabase interface</a> <a href="#ref-for-connection-object-store-set-2">(2)</a>
    <li><a href="#ref-for-connection-object-store-set-3">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-connection-object-store-set-4">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store">
   <b><a href="#object-store">#object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-1">2.1. Database</a>
    <li><a href="#ref-for-object-store-2">2.1.1. Database Connection</a>
    <li><a href="#ref-for-object-store-3">2.2. Object Store</a> <a href="#ref-for-object-store-4">(2)</a> <a href="#ref-for-object-store-5">(3)</a> <a href="#ref-for-object-store-6">(4)</a> <a href="#ref-for-object-store-7">(5)</a> <a href="#ref-for-object-store-8">(6)</a> <a href="#ref-for-object-store-9">(7)</a>
    <li><a href="#ref-for-object-store-10">2.2.1. Object Store Handle</a> <a href="#ref-for-object-store-11">(2)</a> <a href="#ref-for-object-store-12">(3)</a>
    <li><a href="#ref-for-object-store-13">2.6. Index</a> <a href="#ref-for-object-store-14">(2)</a> <a href="#ref-for-object-store-15">(3)</a> <a href="#ref-for-object-store-16">(4)</a> <a href="#ref-for-object-store-17">(5)</a> <a href="#ref-for-object-store-18">(6)</a> <a href="#ref-for-object-store-19">(7)</a>
    <li><a href="#ref-for-object-store-20">2.7. Transactions</a>
    <li><a href="#ref-for-object-store-21">2.7.1. Transaction Lifetime</a> <a href="#ref-for-object-store-22">(2)</a> <a href="#ref-for-object-store-23">(3)</a> <a href="#ref-for-object-store-24">(4)</a> <a href="#ref-for-object-store-25">(5)</a> <a href="#ref-for-object-store-26">(6)</a> <a href="#ref-for-object-store-27">(7)</a> <a href="#ref-for-object-store-28">(8)</a> <a href="#ref-for-object-store-29">(9)</a>
    <li><a href="#ref-for-object-store-30">2.7.2. Upgrade Transactions</a>
    <li><a href="#ref-for-object-store-31">2.9. Key Range</a>
    <li><a href="#ref-for-object-store-32">2.10. Cursor</a> <a href="#ref-for-object-store-33">(2)</a> <a href="#ref-for-object-store-34">(3)</a> <a href="#ref-for-object-store-35">(4)</a> <a href="#ref-for-object-store-36">(5)</a> <a href="#ref-for-object-store-37">(6)</a>
    <li><a href="#ref-for-object-store-38">2.11. Key Generators</a> <a href="#ref-for-object-store-39">(2)</a> <a href="#ref-for-object-store-40">(3)</a> <a href="#ref-for-object-store-41">(4)</a> <a href="#ref-for-object-store-42">(5)</a> <a href="#ref-for-object-store-43">(6)</a> <a href="#ref-for-object-store-44">(7)</a> <a href="#ref-for-object-store-45">(8)</a> <a href="#ref-for-object-store-46">(9)</a> <a href="#ref-for-object-store-47">(10)</a> <a href="#ref-for-object-store-48">(11)</a> <a href="#ref-for-object-store-49">(12)</a> <a href="#ref-for-object-store-50">(13)</a>
    <li><a href="#ref-for-object-store-51">4.4. The IDBDatabase interface</a> <a href="#ref-for-object-store-52">(2)</a> <a href="#ref-for-object-store-53">(3)</a> <a href="#ref-for-object-store-54">(4)</a> <a href="#ref-for-object-store-55">(5)</a> <a href="#ref-for-object-store-56">(6)</a> <a href="#ref-for-object-store-57">(7)</a> <a href="#ref-for-object-store-58">(8)</a> <a href="#ref-for-object-store-59">(9)</a> <a href="#ref-for-object-store-60">(10)</a> <a href="#ref-for-object-store-61">(11)</a> <a href="#ref-for-object-store-62">(12)</a> <a href="#ref-for-object-store-63">(13)</a> <a href="#ref-for-object-store-64">(14)</a> <a href="#ref-for-object-store-65">(15)</a> <a href="#ref-for-object-store-66">(16)</a>
    <li><a href="#ref-for-object-store-67">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-68">(2)</a> <a href="#ref-for-object-store-69">(3)</a> <a href="#ref-for-object-store-70">(4)</a> <a href="#ref-for-object-store-71">(5)</a> <a href="#ref-for-object-store-72">(6)</a> <a href="#ref-for-object-store-73">(7)</a>
    <li><a href="#ref-for-object-store-74">4.6. The IDBIndex interface</a> <a href="#ref-for-object-store-75">(2)</a> <a href="#ref-for-object-store-76">(3)</a> <a href="#ref-for-object-store-77">(4)</a> <a href="#ref-for-object-store-78">(5)</a> <a href="#ref-for-object-store-79">(6)</a> <a href="#ref-for-object-store-80">(7)</a> <a href="#ref-for-object-store-81">(8)</a> <a href="#ref-for-object-store-82">(9)</a>
    <li><a href="#ref-for-object-store-83">4.9. The IDBTransaction interface</a> <a href="#ref-for-object-store-84">(2)</a> <a href="#ref-for-object-store-85">(3)</a> <a href="#ref-for-object-store-86">(4)</a>
    <li><a href="#ref-for-object-store-87">5.1. Opening a database</a>
    <li><a href="#ref-for-object-store-88">5.5. Aborting a transaction</a> <a href="#ref-for-object-store-89">(2)</a>
    <li><a href="#ref-for-object-store-90">5.7. Running an upgrade transaction</a>
    <li><a href="#ref-for-object-store-91">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-object-store-92">(2)</a> <a href="#ref-for-object-store-93">(3)</a> <a href="#ref-for-object-store-94">(4)</a>
    <li><a href="#ref-for-object-store-95">6. Database operations</a>
    <li><a href="#ref-for-object-store-96">6.7. Cursor Iteration Operation</a> <a href="#ref-for-object-store-97">(2)</a> <a href="#ref-for-object-store-98">(3)</a>
    <li><a href="#ref-for-object-store-99">7.2. Inject a key into a value</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-list-of-records">
   <b><a href="#object-store-list-of-records">#object-store-list-of-records</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-list-of-records-1">6.1. Object Store Storage Operation</a>
    <li><a href="#ref-for-object-store-list-of-records-2">6.2. Object Store Retrieval Operations</a> <a href="#ref-for-object-store-list-of-records-3">(2)</a> <a href="#ref-for-object-store-list-of-records-4">(3)</a> <a href="#ref-for-object-store-list-of-records-5">(4)</a>
    <li><a href="#ref-for-object-store-list-of-records-6">6.4. Object Store Deletion Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-record">
   <b><a href="#object-store-record">#object-store-record</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-record-1">2.2. Object Store</a>
    <li><a href="#ref-for-object-store-record-2">2.4. Keys</a> <a href="#ref-for-object-store-record-3">(2)</a>
    <li><a href="#ref-for-object-store-record-4">2.6. Index</a> <a href="#ref-for-object-store-record-5">(2)</a> <a href="#ref-for-object-store-record-6">(3)</a> <a href="#ref-for-object-store-record-7">(4)</a> <a href="#ref-for-object-store-record-8">(5)</a> <a href="#ref-for-object-store-record-9">(6)</a> <a href="#ref-for-object-store-record-10">(7)</a> <a href="#ref-for-object-store-record-11">(8)</a> <a href="#ref-for-object-store-record-12">(9)</a> <a href="#ref-for-object-store-record-13">(10)</a> <a href="#ref-for-object-store-record-14">(11)</a> <a href="#ref-for-object-store-record-15">(12)</a>
    <li><a href="#ref-for-object-store-record-16">2.10. Cursor</a> <a href="#ref-for-object-store-record-17">(2)</a> <a href="#ref-for-object-store-record-18">(3)</a>
    <li><a href="#ref-for-object-store-record-19">2.11. Key Generators</a> <a href="#ref-for-object-store-record-20">(2)</a> <a href="#ref-for-object-store-record-21">(3)</a> <a href="#ref-for-object-store-record-22">(4)</a> <a href="#ref-for-object-store-record-23">(5)</a> <a href="#ref-for-object-store-record-24">(6)</a>
    <li><a href="#ref-for-object-store-record-25">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-record-26">(2)</a> <a href="#ref-for-object-store-record-27">(3)</a> <a href="#ref-for-object-store-record-28">(4)</a> <a href="#ref-for-object-store-record-29">(5)</a> <a href="#ref-for-object-store-record-30">(6)</a>
    <li><a href="#ref-for-object-store-record-31">4.6. The IDBIndex interface</a> <a href="#ref-for-object-store-record-32">(2)</a> <a href="#ref-for-object-store-record-33">(3)</a> <a href="#ref-for-object-store-record-34">(4)</a> <a href="#ref-for-object-store-record-35">(5)</a>
    <li><a href="#ref-for-object-store-record-36">6.1. Object Store Storage Operation</a> <a href="#ref-for-object-store-record-37">(2)</a> <a href="#ref-for-object-store-record-38">(3)</a> <a href="#ref-for-object-store-record-39">(4)</a> <a href="#ref-for-object-store-record-40">(5)</a>
    <li><a href="#ref-for-object-store-record-41">6.2. Object Store Retrieval Operations</a> <a href="#ref-for-object-store-record-42">(2)</a> <a href="#ref-for-object-store-record-43">(3)</a> <a href="#ref-for-object-store-record-44">(4)</a>
    <li><a href="#ref-for-object-store-record-45">6.3. Index Retrieval Operations</a> <a href="#ref-for-object-store-record-46">(2)</a> <a href="#ref-for-object-store-record-47">(3)</a> <a href="#ref-for-object-store-record-48">(4)</a>
    <li><a href="#ref-for-object-store-record-49">6.4. Object Store Deletion Operation</a>
    <li><a href="#ref-for-object-store-record-50">6.6. Object Store Clear Operation</a>
    <li><a href="#ref-for-object-store-record-51">6.7. Cursor Iteration Operation</a> <a href="#ref-for-object-store-record-52">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-name">
   <b><a href="#object-store-name">#object-store-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-name-1">2.2.1. Object Store Handle</a>
    <li><a href="#ref-for-object-store-name-2">4.4. The IDBDatabase interface</a> <a href="#ref-for-object-store-name-3">(2)</a> <a href="#ref-for-object-store-name-4">(3)</a> <a href="#ref-for-object-store-name-5">(4)</a> <a href="#ref-for-object-store-name-6">(5)</a>
    <li><a href="#ref-for-object-store-name-7">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-name-8">(2)</a> <a href="#ref-for-object-store-name-9">(3)</a> <a href="#ref-for-object-store-name-10">(4)</a> <a href="#ref-for-object-store-name-11">(5)</a>
    <li><a href="#ref-for-object-store-name-12">4.9. The IDBTransaction interface</a> <a href="#ref-for-object-store-name-13">(2)</a> <a href="#ref-for-object-store-name-14">(3)</a>
    <li><a href="#ref-for-object-store-name-15">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-key-path">
   <b><a href="#object-store-key-path">#object-store-key-path</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-key-path-1">2.2. Object Store</a>
    <li><a href="#ref-for-object-store-key-path-2">2.11. Key Generators</a> <a href="#ref-for-object-store-key-path-3">(2)</a> <a href="#ref-for-object-store-key-path-4">(3)</a> <a href="#ref-for-object-store-key-path-5">(4)</a> <a href="#ref-for-object-store-key-path-6">(5)</a> <a href="#ref-for-object-store-key-path-7">(6)</a> <a href="#ref-for-object-store-key-path-8">(7)</a> <a href="#ref-for-object-store-key-path-9">(8)</a> <a href="#ref-for-object-store-key-path-10">(9)</a>
    <li><a href="#ref-for-object-store-key-path-11">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-object-store-key-path-12">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-key-path-13">(2)</a> <a href="#ref-for-object-store-key-path-14">(3)</a>
    <li><a href="#ref-for-object-store-key-path-15">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-object-store-key-path-16">4.8. The IDBCursor interface</a>
    <li><a href="#ref-for-object-store-key-path-17">6.1. Object Store Storage Operation</a> <a href="#ref-for-object-store-key-path-18">(2)</a>
    <li><a href="#ref-for-object-store-key-path-19">7.2. Inject a key into a value</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-in-line-keys">
   <b><a href="#object-store-in-line-keys">#object-store-in-line-keys</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-in-line-keys-1">2.11. Key Generators</a>
    <li><a href="#ref-for-object-store-in-line-keys-2">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-in-line-keys-3">(2)</a> <a href="#ref-for-object-store-in-line-keys-4">(3)</a> <a href="#ref-for-object-store-in-line-keys-5">(4)</a>
    <li><a href="#ref-for-object-store-in-line-keys-6">4.8. The IDBCursor interface</a>
    <li><a href="#ref-for-object-store-in-line-keys-7">6.1. Object Store Storage Operation</a> <a href="#ref-for-object-store-in-line-keys-8">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-out-of-line-keys">
   <b><a href="#object-store-out-of-line-keys">#object-store-out-of-line-keys</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-out-of-line-keys-1">2.11. Key Generators</a>
    <li><a href="#ref-for-object-store-out-of-line-keys-2">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-out-of-line-keys-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-handle">
   <b><a href="#object-store-handle">#object-store-handle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-handle-1">2.2.1. Object Store Handle</a> <a href="#ref-for-object-store-handle-2">(2)</a> <a href="#ref-for-object-store-handle-3">(3)</a> <a href="#ref-for-object-store-handle-4">(4)</a> <a href="#ref-for-object-store-handle-5">(5)</a> <a href="#ref-for-object-store-handle-6">(6)</a>
    <li><a href="#ref-for-object-store-handle-7">2.6.1. Index Handle</a>
    <li><a href="#ref-for-object-store-handle-8">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-object-store-handle-9">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-handle-10">(2)</a> <a href="#ref-for-object-store-handle-11">(3)</a> <a href="#ref-for-object-store-handle-12">(4)</a> <a href="#ref-for-object-store-handle-13">(5)</a> <a href="#ref-for-object-store-handle-14">(6)</a> <a href="#ref-for-object-store-handle-15">(7)</a> <a href="#ref-for-object-store-handle-16">(8)</a> <a href="#ref-for-object-store-handle-17">(9)</a> <a href="#ref-for-object-store-handle-18">(10)</a> <a href="#ref-for-object-store-handle-19">(11)</a> <a href="#ref-for-object-store-handle-20">(12)</a> <a href="#ref-for-object-store-handle-21">(13)</a> <a href="#ref-for-object-store-handle-22">(14)</a> <a href="#ref-for-object-store-handle-23">(15)</a> <a href="#ref-for-object-store-handle-24">(16)</a> <a href="#ref-for-object-store-handle-25">(17)</a> <a href="#ref-for-object-store-handle-26">(18)</a> <a href="#ref-for-object-store-handle-27">(19)</a> <a href="#ref-for-object-store-handle-28">(20)</a> <a href="#ref-for-object-store-handle-29">(21)</a> <a href="#ref-for-object-store-handle-30">(22)</a> <a href="#ref-for-object-store-handle-31">(23)</a> <a href="#ref-for-object-store-handle-32">(24)</a> <a href="#ref-for-object-store-handle-33">(25)</a> <a href="#ref-for-object-store-handle-34">(26)</a> <a href="#ref-for-object-store-handle-35">(27)</a> <a href="#ref-for-object-store-handle-36">(28)</a> <a href="#ref-for-object-store-handle-37">(29)</a> <a href="#ref-for-object-store-handle-38">(30)</a> <a href="#ref-for-object-store-handle-39">(31)</a> <a href="#ref-for-object-store-handle-40">(32)</a> <a href="#ref-for-object-store-handle-41">(33)</a> <a href="#ref-for-object-store-handle-42">(34)</a> <a href="#ref-for-object-store-handle-43">(35)</a> <a href="#ref-for-object-store-handle-44">(36)</a> <a href="#ref-for-object-store-handle-45">(37)</a> <a href="#ref-for-object-store-handle-46">(38)</a> <a href="#ref-for-object-store-handle-47">(39)</a> <a href="#ref-for-object-store-handle-48">(40)</a> <a href="#ref-for-object-store-handle-49">(41)</a> <a href="#ref-for-object-store-handle-50">(42)</a> <a href="#ref-for-object-store-handle-51">(43)</a> <a href="#ref-for-object-store-handle-52">(44)</a> <a href="#ref-for-object-store-handle-53">(45)</a> <a href="#ref-for-object-store-handle-54">(46)</a> <a href="#ref-for-object-store-handle-55">(47)</a> <a href="#ref-for-object-store-handle-56">(48)</a> <a href="#ref-for-object-store-handle-57">(49)</a> <a href="#ref-for-object-store-handle-58">(50)</a> <a href="#ref-for-object-store-handle-59">(51)</a> <a href="#ref-for-object-store-handle-60">(52)</a>
    <li><a href="#ref-for-object-store-handle-61">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-object-store-handle-62">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-object-store-handle-63">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-handle-object-store">
   <b><a href="#object-store-handle-object-store">#object-store-handle-object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-handle-object-store-1">2.2.1. Object Store Handle</a> <a href="#ref-for-object-store-handle-object-store-2">(2)</a>
    <li><a href="#ref-for-object-store-handle-object-store-3">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-handle-object-store-4">(2)</a> <a href="#ref-for-object-store-handle-object-store-5">(3)</a> <a href="#ref-for-object-store-handle-object-store-6">(4)</a> <a href="#ref-for-object-store-handle-object-store-7">(5)</a> <a href="#ref-for-object-store-handle-object-store-8">(6)</a> <a href="#ref-for-object-store-handle-object-store-9">(7)</a> <a href="#ref-for-object-store-handle-object-store-10">(8)</a> <a href="#ref-for-object-store-handle-object-store-11">(9)</a> <a href="#ref-for-object-store-handle-object-store-12">(10)</a> <a href="#ref-for-object-store-handle-object-store-13">(11)</a> <a href="#ref-for-object-store-handle-object-store-14">(12)</a> <a href="#ref-for-object-store-handle-object-store-15">(13)</a> <a href="#ref-for-object-store-handle-object-store-16">(14)</a> <a href="#ref-for-object-store-handle-object-store-17">(15)</a> <a href="#ref-for-object-store-handle-object-store-18">(16)</a> <a href="#ref-for-object-store-handle-object-store-19">(17)</a>
    <li><a href="#ref-for-object-store-handle-object-store-20">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-object-store-handle-object-store-21">(2)</a> <a href="#ref-for-object-store-handle-object-store-22">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-handle-transaction">
   <b><a href="#object-store-handle-transaction">#object-store-handle-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-handle-transaction-1">2.6.1. Index Handle</a>
    <li><a href="#ref-for-object-store-handle-transaction-2">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-handle-transaction-3">(2)</a> <a href="#ref-for-object-store-handle-transaction-4">(3)</a> <a href="#ref-for-object-store-handle-transaction-5">(4)</a> <a href="#ref-for-object-store-handle-transaction-6">(5)</a> <a href="#ref-for-object-store-handle-transaction-7">(6)</a> <a href="#ref-for-object-store-handle-transaction-8">(7)</a> <a href="#ref-for-object-store-handle-transaction-9">(8)</a> <a href="#ref-for-object-store-handle-transaction-10">(9)</a> <a href="#ref-for-object-store-handle-transaction-11">(10)</a> <a href="#ref-for-object-store-handle-transaction-12">(11)</a> <a href="#ref-for-object-store-handle-transaction-13">(12)</a> <a href="#ref-for-object-store-handle-transaction-14">(13)</a> <a href="#ref-for-object-store-handle-transaction-15">(14)</a> <a href="#ref-for-object-store-handle-transaction-16">(15)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-handle-index-set">
   <b><a href="#object-store-handle-index-set">#object-store-handle-index-set</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-handle-index-set-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-object-store-handle-index-set-2">(2)</a> <a href="#ref-for-object-store-handle-index-set-3">(3)</a> <a href="#ref-for-object-store-handle-index-set-4">(4)</a>
    <li><a href="#ref-for-object-store-handle-index-set-5">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="object-store-handle-name">
   <b><a href="#object-store-handle-name">#object-store-handle-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-object-store-handle-name-1">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-object-store-handle-name-2">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="value">
   <b><a href="#value">#value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-value-1">2.2. Object Store</a> <a href="#ref-for-value-2">(2)</a>
    <li><a href="#ref-for-value-3">2.3. Values</a>
    <li><a href="#ref-for-value-4">2.5. Key Path</a>
    <li><a href="#ref-for-value-5">2.6. Index</a> <a href="#ref-for-value-6">(2)</a>
    <li><a href="#ref-for-value-7">2.10. Cursor</a> <a href="#ref-for-value-8">(2)</a> <a href="#ref-for-value-9">(3)</a>
    <li><a href="#ref-for-value-10">6.3. Index Retrieval Operations</a>
    <li><a href="#ref-for-value-11">6.7. Cursor Iteration Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="key">
   <b><a href="#key">#key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-key-1">2.2. Object Store</a> <a href="#ref-for-key-2">(2)</a>
    <li><a href="#ref-for-key-3">2.4. Keys</a> <a href="#ref-for-key-4">(2)</a> <a href="#ref-for-key-5">(3)</a> <a href="#ref-for-key-6">(4)</a> <a href="#ref-for-key-7">(5)</a> <a href="#ref-for-key-8">(6)</a> <a href="#ref-for-key-9">(7)</a> <a href="#ref-for-key-10">(8)</a> <a href="#ref-for-key-11">(9)</a> <a href="#ref-for-key-12">(10)</a> <a href="#ref-for-key-13">(11)</a> <a href="#ref-for-key-14">(12)</a> <a href="#ref-for-key-15">(13)</a> <a href="#ref-for-key-16">(14)</a> <a href="#ref-for-key-17">(15)</a> <a href="#ref-for-key-18">(16)</a> <a href="#ref-for-key-19">(17)</a> <a href="#ref-for-key-20">(18)</a>
    <li><a href="#ref-for-key-21">2.5. Key Path</a>
    <li><a href="#ref-for-key-22">2.6. Index</a> <a href="#ref-for-key-23">(2)</a> <a href="#ref-for-key-24">(3)</a>
    <li><a href="#ref-for-key-25">2.9. Key Range</a> <a href="#ref-for-key-26">(2)</a> <a href="#ref-for-key-27">(3)</a> <a href="#ref-for-key-28">(4)</a> <a href="#ref-for-key-29">(5)</a> <a href="#ref-for-key-30">(6)</a> <a href="#ref-for-key-31">(7)</a> <a href="#ref-for-key-32">(8)</a>
    <li><a href="#ref-for-key-33">2.10. Cursor</a> <a href="#ref-for-key-34">(2)</a> <a href="#ref-for-key-35">(3)</a> <a href="#ref-for-key-36">(4)</a>
    <li><a href="#ref-for-key-37">2.11. Key Generators</a> <a href="#ref-for-key-38">(2)</a> <a href="#ref-for-key-39">(3)</a> <a href="#ref-for-key-40">(4)</a> <a href="#ref-for-key-41">(5)</a> <a href="#ref-for-key-42">(6)</a> <a href="#ref-for-key-43">(7)</a> <a href="#ref-for-key-44">(8)</a> <a href="#ref-for-key-45">(9)</a>
    <li><a href="#ref-for-key-46">4.5. The IDBObjectStore interface</a> <a href="#ref-for-key-47">(2)</a> <a href="#ref-for-key-48">(3)</a> <a href="#ref-for-key-49">(4)</a> <a href="#ref-for-key-50">(5)</a> <a href="#ref-for-key-51">(6)</a> <a href="#ref-for-key-52">(7)</a> <a href="#ref-for-key-53">(8)</a>
    <li><a href="#ref-for-key-54">4.6. The IDBIndex interface</a> <a href="#ref-for-key-55">(2)</a> <a href="#ref-for-key-56">(3)</a> <a href="#ref-for-key-57">(4)</a> <a href="#ref-for-key-58">(5)</a> <a href="#ref-for-key-59">(6)</a> <a href="#ref-for-key-60">(7)</a>
    <li><a href="#ref-for-key-61">6.1. Object Store Storage Operation</a> <a href="#ref-for-key-62">(2)</a>
    <li><a href="#ref-for-key-63">6.7. Cursor Iteration Operation</a> <a href="#ref-for-key-64">(2)</a>
    <li><a href="#ref-for-key-65">7. ECMAScript binding</a>
    <li><a href="#ref-for-key-66">7.1. Extract a key from a value</a>
    <li><a href="#ref-for-key-67">7.4. Convert a value to a key</a> <a href="#ref-for-key-68">(2)</a> <a href="#ref-for-key-69">(3)</a> <a href="#ref-for-key-70">(4)</a> <a href="#ref-for-key-71">(5)</a> <a href="#ref-for-key-72">(6)</a>
    <li><a href="#ref-for-key-73">10. Revision History</a> <a href="#ref-for-key-74">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="key-type">
   <b><a href="#key-type">#key-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-key-type-1">2.4. Keys</a> <a href="#ref-for-key-type-2">(2)</a> <a href="#ref-for-key-type-3">(3)</a>
    <li><a href="#ref-for-key-type-4">2.11. Key Generators</a> <a href="#ref-for-key-type-5">(2)</a> <a href="#ref-for-key-type-6">(3)</a> <a href="#ref-for-key-type-7">(4)</a>
    <li><a href="#ref-for-key-type-8">6.1. Object Store Storage Operation</a>
    <li><a href="#ref-for-key-type-9">7.3. Convert a key to a value</a>
    <li><a href="#ref-for-key-type-10">7.4. Convert a value to a key</a> <a href="#ref-for-key-type-11">(2)</a> <a href="#ref-for-key-type-12">(3)</a> <a href="#ref-for-key-type-13">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="key-value">
   <b><a href="#key-value">#key-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-key-value-1">2.4. Keys</a> <a href="#ref-for-key-value-2">(2)</a> <a href="#ref-for-key-value-3">(3)</a>
    <li><a href="#ref-for-key-value-4">2.11. Key Generators</a> <a href="#ref-for-key-value-5">(2)</a>
    <li><a href="#ref-for-key-value-6">6.1. Object Store Storage Operation</a>
    <li><a href="#ref-for-key-value-7">7.3. Convert a key to a value</a>
    <li><a href="#ref-for-key-value-8">7.4. Convert a value to a key</a> <a href="#ref-for-key-value-9">(2)</a> <a href="#ref-for-key-value-10">(3)</a> <a href="#ref-for-key-value-11">(4)</a> <a href="#ref-for-key-value-12">(5)</a> <a href="#ref-for-key-value-13">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="array-key">
   <b><a href="#array-key">#array-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-array-key-1">2.4. Keys</a> <a href="#ref-for-array-key-2">(2)</a>
    <li><a href="#ref-for-array-key-3">2.6. Index</a> <a href="#ref-for-array-key-4">(2)</a>
    <li><a href="#ref-for-array-key-5">6.1. Object Store Storage Operation</a> <a href="#ref-for-array-key-6">(2)</a> <a href="#ref-for-array-key-7">(3)</a> <a href="#ref-for-array-key-8">(4)</a> <a href="#ref-for-array-key-9">(5)</a> <a href="#ref-for-array-key-10">(6)</a> <a href="#ref-for-array-key-11">(7)</a>
    <li><a href="#ref-for-array-key-12">7.4. Convert a value to a key</a> <a href="#ref-for-array-key-13">(2)</a> <a href="#ref-for-array-key-14">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="subkeys">
   <b><a href="#subkeys">#subkeys</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-subkeys-1">2.6. Index</a>
    <li><a href="#ref-for-subkeys-2">6.1. Object Store Storage Operation</a> <a href="#ref-for-subkeys-3">(2)</a> <a href="#ref-for-subkeys-4">(3)</a> <a href="#ref-for-subkeys-5">(4)</a>
    <li><a href="#ref-for-subkeys-6">7.4. Convert a value to a key</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="compare-two-keys">
   <b><a href="#compare-two-keys">#compare-two-keys</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compare-two-keys-1">2.4. Keys</a> <a href="#ref-for-compare-two-keys-2">(2)</a> <a href="#ref-for-compare-two-keys-3">(3)</a> <a href="#ref-for-compare-two-keys-4">(4)</a>
    <li><a href="#ref-for-compare-two-keys-5">4.3. The IDBFactory interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="greater-than">
   <b><a href="#greater-than">#greater-than</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-greater-than-1">2.9. Key Range</a> <a href="#ref-for-greater-than-2">(2)</a>
    <li><a href="#ref-for-greater-than-3">2.10. Cursor</a>
    <li><a href="#ref-for-greater-than-4">2.11. Key Generators</a>
    <li><a href="#ref-for-greater-than-5">4.7. The IDBKeyRange interface</a>
    <li><a href="#ref-for-greater-than-6">4.8. The IDBCursor interface</a> <a href="#ref-for-greater-than-7">(2)</a> <a href="#ref-for-greater-than-8">(3)</a>
    <li><a href="#ref-for-greater-than-9">6.7. Cursor Iteration Operation</a> <a href="#ref-for-greater-than-10">(2)</a> <a href="#ref-for-greater-than-11">(3)</a> <a href="#ref-for-greater-than-12">(4)</a> <a href="#ref-for-greater-than-13">(5)</a> <a href="#ref-for-greater-than-14">(6)</a> <a href="#ref-for-greater-than-15">(7)</a> <a href="#ref-for-greater-than-16">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="less-than">
   <b><a href="#less-than">#less-than</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-less-than-1">2.9. Key Range</a>
    <li><a href="#ref-for-less-than-2">2.10. Cursor</a>
    <li><a href="#ref-for-less-than-3">4.8. The IDBCursor interface</a> <a href="#ref-for-less-than-4">(2)</a> <a href="#ref-for-less-than-5">(3)</a>
    <li><a href="#ref-for-less-than-6">6.7. Cursor Iteration Operation</a> <a href="#ref-for-less-than-7">(2)</a> <a href="#ref-for-less-than-8">(3)</a> <a href="#ref-for-less-than-9">(4)</a> <a href="#ref-for-less-than-10">(5)</a> <a href="#ref-for-less-than-11">(6)</a> <a href="#ref-for-less-than-12">(7)</a> <a href="#ref-for-less-than-13">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="equal-to">
   <b><a href="#equal-to">#equal-to</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-equal-to-1">2.9. Key Range</a> <a href="#ref-for-equal-to-2">(2)</a> <a href="#ref-for-equal-to-3">(3)</a>
    <li><a href="#ref-for-equal-to-4">4.8. The IDBCursor interface</a> <a href="#ref-for-equal-to-5">(2)</a> <a href="#ref-for-equal-to-6">(3)</a> <a href="#ref-for-equal-to-7">(4)</a> <a href="#ref-for-equal-to-8">(5)</a> <a href="#ref-for-equal-to-9">(6)</a> <a href="#ref-for-equal-to-10">(7)</a> <a href="#ref-for-equal-to-11">(8)</a> <a href="#ref-for-equal-to-12">(9)</a>
    <li><a href="#ref-for-equal-to-13">6.1. Object Store Storage Operation</a> <a href="#ref-for-equal-to-14">(2)</a> <a href="#ref-for-equal-to-15">(3)</a> <a href="#ref-for-equal-to-16">(4)</a>
    <li><a href="#ref-for-equal-to-17">6.7. Cursor Iteration Operation</a> <a href="#ref-for-equal-to-18">(2)</a> <a href="#ref-for-equal-to-19">(3)</a> <a href="#ref-for-equal-to-20">(4)</a> <a href="#ref-for-equal-to-21">(5)</a> <a href="#ref-for-equal-to-22">(6)</a> <a href="#ref-for-equal-to-23">(7)</a> <a href="#ref-for-equal-to-24">(8)</a> <a href="#ref-for-equal-to-25">(9)</a> <a href="#ref-for-equal-to-26">(10)</a> <a href="#ref-for-equal-to-27">(11)</a>
    <li><a href="#ref-for-equal-to-28">7.4. Convert a value to a key</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="key-path">
   <b><a href="#key-path">#key-path</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-key-path-1">2.5. Key Path</a>
    <li><a href="#ref-for-key-path-2">7. ECMAScript binding</a>
    <li><a href="#ref-for-key-path-3">7.1. Extract a key from a value</a>
    <li><a href="#ref-for-key-path-4">7.2. Inject a key into a value</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="valid-key-path">
   <b><a href="#valid-key-path">#valid-key-path</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-valid-key-path-1">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-valid-key-path-2">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="identifier">
   <b><a href="#identifier">#identifier</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-identifier-1">2.5. Key Path</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-concept">
   <b><a href="#index-concept">#index-concept</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-concept-1">2.2.1. Object Store Handle</a>
    <li><a href="#ref-for-index-concept-2">2.6. Index</a> <a href="#ref-for-index-concept-3">(2)</a> <a href="#ref-for-index-concept-4">(3)</a> <a href="#ref-for-index-concept-5">(4)</a> <a href="#ref-for-index-concept-6">(5)</a>
    <li><a href="#ref-for-index-concept-7">2.6.1. Index Handle</a> <a href="#ref-for-index-concept-8">(2)</a> <a href="#ref-for-index-concept-9">(3)</a>
    <li><a href="#ref-for-index-concept-10">2.7.1. Transaction Lifetime</a>
    <li><a href="#ref-for-index-concept-11">2.7.2. Upgrade Transactions</a>
    <li><a href="#ref-for-index-concept-12">2.9. Key Range</a>
    <li><a href="#ref-for-index-concept-13">2.10. Cursor</a> <a href="#ref-for-index-concept-14">(2)</a> <a href="#ref-for-index-concept-15">(3)</a> <a href="#ref-for-index-concept-16">(4)</a> <a href="#ref-for-index-concept-17">(5)</a> <a href="#ref-for-index-concept-18">(6)</a>
    <li><a href="#ref-for-index-concept-19">4.5. The IDBObjectStore interface</a> <a href="#ref-for-index-concept-20">(2)</a> <a href="#ref-for-index-concept-21">(3)</a> <a href="#ref-for-index-concept-22">(4)</a> <a href="#ref-for-index-concept-23">(5)</a> <a href="#ref-for-index-concept-24">(6)</a> <a href="#ref-for-index-concept-25">(7)</a> <a href="#ref-for-index-concept-26">(8)</a> <a href="#ref-for-index-concept-27">(9)</a>
    <li><a href="#ref-for-index-concept-28">4.6. The IDBIndex interface</a> <a href="#ref-for-index-concept-29">(2)</a> <a href="#ref-for-index-concept-30">(3)</a> <a href="#ref-for-index-concept-31">(4)</a> <a href="#ref-for-index-concept-32">(5)</a>
    <li><a href="#ref-for-index-concept-33">4.8. The IDBCursor interface</a>
    <li><a href="#ref-for-index-concept-34">5.5. Aborting a transaction</a> <a href="#ref-for-index-concept-35">(2)</a>
    <li><a href="#ref-for-index-concept-36">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-index-concept-37">(2)</a> <a href="#ref-for-index-concept-38">(3)</a> <a href="#ref-for-index-concept-39">(4)</a>
    <li><a href="#ref-for-index-concept-40">6. Database operations</a>
    <li><a href="#ref-for-index-concept-41">6.6. Object Store Clear Operation</a>
    <li><a href="#ref-for-index-concept-42">6.7. Cursor Iteration Operation</a> <a href="#ref-for-index-concept-43">(2)</a> <a href="#ref-for-index-concept-44">(3)</a> <a href="#ref-for-index-concept-45">(4)</a> <a href="#ref-for-index-concept-46">(5)</a> <a href="#ref-for-index-concept-47">(6)</a> <a href="#ref-for-index-concept-48">(7)</a> <a href="#ref-for-index-concept-49">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-referenced">
   <b><a href="#index-referenced">#index-referenced</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-referenced-1">2.6. Index</a> <a href="#ref-for-index-referenced-2">(2)</a> <a href="#ref-for-index-referenced-3">(3)</a> <a href="#ref-for-index-referenced-4">(4)</a> <a href="#ref-for-index-referenced-5">(5)</a>
    <li><a href="#ref-for-index-referenced-6">2.10. Cursor</a>
    <li><a href="#ref-for-index-referenced-7">4.5. The IDBObjectStore interface</a> <a href="#ref-for-index-referenced-8">(2)</a>
    <li><a href="#ref-for-index-referenced-9">6.1. Object Store Storage Operation</a>
    <li><a href="#ref-for-index-referenced-10">6.4. Object Store Deletion Operation</a>
    <li><a href="#ref-for-index-referenced-11">6.6. Object Store Clear Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-list-of-records">
   <b><a href="#index-list-of-records">#index-list-of-records</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-list-of-records-1">6.1. Object Store Storage Operation</a> <a href="#ref-for-index-list-of-records-2">(2)</a>
    <li><a href="#ref-for-index-list-of-records-3">6.3. Index Retrieval Operations</a> <a href="#ref-for-index-list-of-records-4">(2)</a> <a href="#ref-for-index-list-of-records-5">(3)</a> <a href="#ref-for-index-list-of-records-6">(4)</a>
    <li><a href="#ref-for-index-list-of-records-7">6.4. Object Store Deletion Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-key-path">
   <b><a href="#index-key-path">#index-key-path</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-key-path-1">2.6. Index</a> <a href="#ref-for-index-key-path-2">(2)</a> <a href="#ref-for-index-key-path-3">(3)</a>
    <li><a href="#ref-for-index-key-path-4">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-index-key-path-5">6.1. Object Store Storage Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-referenced-value">
   <b><a href="#index-referenced-value">#index-referenced-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-referenced-value-1">2.6. Index</a> <a href="#ref-for-index-referenced-value-2">(2)</a>
    <li><a href="#ref-for-index-referenced-value-3">6.3. Index Retrieval Operations</a> <a href="#ref-for-index-referenced-value-4">(2)</a>
    <li><a href="#ref-for-index-referenced-value-5">6.7. Cursor Iteration Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-name">
   <b><a href="#index-name">#index-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-name-1">2.6.1. Index Handle</a>
    <li><a href="#ref-for-index-name-2">4.5. The IDBObjectStore interface</a> <a href="#ref-for-index-name-3">(2)</a> <a href="#ref-for-index-name-4">(3)</a> <a href="#ref-for-index-name-5">(4)</a> <a href="#ref-for-index-name-6">(5)</a> <a href="#ref-for-index-name-7">(6)</a>
    <li><a href="#ref-for-index-name-8">4.6. The IDBIndex interface</a> <a href="#ref-for-index-name-9">(2)</a> <a href="#ref-for-index-name-10">(3)</a> <a href="#ref-for-index-name-11">(4)</a> <a href="#ref-for-index-name-12">(5)</a>
    <li><a href="#ref-for-index-name-13">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-unique-flag">
   <b><a href="#index-unique-flag">#index-unique-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-unique-flag-1">2.10. Cursor</a> <a href="#ref-for-index-unique-flag-2">(2)</a>
    <li><a href="#ref-for-index-unique-flag-3">4.5. The IDBObjectStore interface</a> <a href="#ref-for-index-unique-flag-4">(2)</a> <a href="#ref-for-index-unique-flag-5">(3)</a>
    <li><a href="#ref-for-index-unique-flag-6">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-index-unique-flag-7">6.1. Object Store Storage Operation</a> <a href="#ref-for-index-unique-flag-8">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-multientry-flag">
   <b><a href="#index-multientry-flag">#index-multientry-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-multientry-flag-1">2.6. Index</a> <a href="#ref-for-index-multientry-flag-2">(2)</a>
    <li><a href="#ref-for-index-multientry-flag-3">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-index-multientry-flag-4">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-index-multientry-flag-5">6.1. Object Store Storage Operation</a> <a href="#ref-for-index-multientry-flag-6">(2)</a> <a href="#ref-for-index-multientry-flag-7">(3)</a> <a href="#ref-for-index-multientry-flag-8">(4)</a> <a href="#ref-for-index-multientry-flag-9">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-handle">
   <b><a href="#index-handle">#index-handle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-handle-1">2.6.1. Index Handle</a> <a href="#ref-for-index-handle-2">(2)</a> <a href="#ref-for-index-handle-3">(3)</a> <a href="#ref-for-index-handle-4">(4)</a> <a href="#ref-for-index-handle-5">(5)</a>
    <li><a href="#ref-for-index-handle-6">4.5. The IDBObjectStore interface</a> <a href="#ref-for-index-handle-7">(2)</a> <a href="#ref-for-index-handle-8">(3)</a>
    <li><a href="#ref-for-index-handle-9">4.6. The IDBIndex interface</a> <a href="#ref-for-index-handle-10">(2)</a> <a href="#ref-for-index-handle-11">(3)</a> <a href="#ref-for-index-handle-12">(4)</a> <a href="#ref-for-index-handle-13">(5)</a> <a href="#ref-for-index-handle-14">(6)</a> <a href="#ref-for-index-handle-15">(7)</a> <a href="#ref-for-index-handle-16">(8)</a> <a href="#ref-for-index-handle-17">(9)</a> <a href="#ref-for-index-handle-18">(10)</a> <a href="#ref-for-index-handle-19">(11)</a> <a href="#ref-for-index-handle-20">(12)</a> <a href="#ref-for-index-handle-21">(13)</a> <a href="#ref-for-index-handle-22">(14)</a> <a href="#ref-for-index-handle-23">(15)</a> <a href="#ref-for-index-handle-24">(16)</a> <a href="#ref-for-index-handle-25">(17)</a> <a href="#ref-for-index-handle-26">(18)</a> <a href="#ref-for-index-handle-27">(19)</a> <a href="#ref-for-index-handle-28">(20)</a> <a href="#ref-for-index-handle-29">(21)</a> <a href="#ref-for-index-handle-30">(22)</a> <a href="#ref-for-index-handle-31">(23)</a> <a href="#ref-for-index-handle-32">(24)</a> <a href="#ref-for-index-handle-33">(25)</a> <a href="#ref-for-index-handle-34">(26)</a> <a href="#ref-for-index-handle-35">(27)</a> <a href="#ref-for-index-handle-36">(28)</a> <a href="#ref-for-index-handle-37">(29)</a> <a href="#ref-for-index-handle-38">(30)</a>
    <li><a href="#ref-for-index-handle-39">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-index-handle-40">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-handle-index">
   <b><a href="#index-handle-index">#index-handle-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-handle-index-1">2.6.1. Index Handle</a>
    <li><a href="#ref-for-index-handle-index-2">4.6. The IDBIndex interface</a> <a href="#ref-for-index-handle-index-3">(2)</a> <a href="#ref-for-index-handle-index-4">(3)</a> <a href="#ref-for-index-handle-index-5">(4)</a> <a href="#ref-for-index-handle-index-6">(5)</a> <a href="#ref-for-index-handle-index-7">(6)</a> <a href="#ref-for-index-handle-index-8">(7)</a> <a href="#ref-for-index-handle-index-9">(8)</a> <a href="#ref-for-index-handle-index-10">(9)</a> <a href="#ref-for-index-handle-index-11">(10)</a> <a href="#ref-for-index-handle-index-12">(11)</a>
    <li><a href="#ref-for-index-handle-index-13">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-index-handle-index-14">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-handle-object-store-handle">
   <b><a href="#index-handle-object-store-handle">#index-handle-object-store-handle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-handle-object-store-handle-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-handle-transaction">
   <b><a href="#index-handle-transaction">#index-handle-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-handle-transaction-1">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-index-handle-transaction-2">4.6. The IDBIndex interface</a> <a href="#ref-for-index-handle-transaction-3">(2)</a> <a href="#ref-for-index-handle-transaction-4">(3)</a> <a href="#ref-for-index-handle-transaction-5">(4)</a> <a href="#ref-for-index-handle-transaction-6">(5)</a> <a href="#ref-for-index-handle-transaction-7">(6)</a> <a href="#ref-for-index-handle-transaction-8">(7)</a> <a href="#ref-for-index-handle-transaction-9">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="index-handle-name">
   <b><a href="#index-handle-name">#index-handle-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-index-handle-name-1">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-index-handle-name-2">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-concept">
   <b><a href="#transaction-concept">#transaction-concept</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-concept-1">2.1.1. Database Connection</a>
    <li><a href="#ref-for-transaction-concept-2">2.2.1. Object Store Handle</a> <a href="#ref-for-transaction-concept-3">(2)</a> <a href="#ref-for-transaction-concept-4">(3)</a>
    <li><a href="#ref-for-transaction-concept-5">2.6.1. Index Handle</a> <a href="#ref-for-transaction-concept-6">(2)</a> <a href="#ref-for-transaction-concept-7">(3)</a>
    <li><a href="#ref-for-transaction-concept-8">2.7. Transactions</a> <a href="#ref-for-transaction-concept-9">(2)</a> <a href="#ref-for-transaction-concept-10">(3)</a> <a href="#ref-for-transaction-concept-11">(4)</a> <a href="#ref-for-transaction-concept-12">(5)</a> <a href="#ref-for-transaction-concept-13">(6)</a> <a href="#ref-for-transaction-concept-14">(7)</a> <a href="#ref-for-transaction-concept-15">(8)</a> <a href="#ref-for-transaction-concept-16">(9)</a> <a href="#ref-for-transaction-concept-17">(10)</a> <a href="#ref-for-transaction-concept-18">(11)</a> <a href="#ref-for-transaction-concept-19">(12)</a> <a href="#ref-for-transaction-concept-20">(13)</a> <a href="#ref-for-transaction-concept-21">(14)</a>
    <li><a href="#ref-for-transaction-concept-22">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-concept-23">(2)</a>
    <li><a href="#ref-for-transaction-concept-24">2.7.2. Upgrade Transactions</a> <a href="#ref-for-transaction-concept-25">(2)</a>
    <li><a href="#ref-for-transaction-concept-26">2.8. Requests</a>
    <li><a href="#ref-for-transaction-concept-27">2.10. Cursor</a>
    <li><a href="#ref-for-transaction-concept-28">2.11. Key Generators</a> <a href="#ref-for-transaction-concept-29">(2)</a>
    <li><a href="#ref-for-transaction-concept-30">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-transaction-concept-31">4.5. The IDBObjectStore interface</a> <a href="#ref-for-transaction-concept-32">(2)</a> <a href="#ref-for-transaction-concept-33">(3)</a> <a href="#ref-for-transaction-concept-34">(4)</a> <a href="#ref-for-transaction-concept-35">(5)</a>
    <li><a href="#ref-for-transaction-concept-36">4.6. The IDBIndex interface</a> <a href="#ref-for-transaction-concept-37">(2)</a>
    <li><a href="#ref-for-transaction-concept-38">4.8. The IDBCursor interface</a>
    <li><a href="#ref-for-transaction-concept-39">4.9. The IDBTransaction interface</a> <a href="#ref-for-transaction-concept-40">(2)</a> <a href="#ref-for-transaction-concept-41">(3)</a> <a href="#ref-for-transaction-concept-42">(4)</a> <a href="#ref-for-transaction-concept-43">(5)</a> <a href="#ref-for-transaction-concept-44">(6)</a> <a href="#ref-for-transaction-concept-45">(7)</a> <a href="#ref-for-transaction-concept-46">(8)</a> <a href="#ref-for-transaction-concept-47">(9)</a> <a href="#ref-for-transaction-concept-48">(10)</a> <a href="#ref-for-transaction-concept-49">(11)</a> <a href="#ref-for-transaction-concept-50">(12)</a> <a href="#ref-for-transaction-concept-51">(13)</a> <a href="#ref-for-transaction-concept-52">(14)</a> <a href="#ref-for-transaction-concept-53">(15)</a> <a href="#ref-for-transaction-concept-54">(16)</a> <a href="#ref-for-transaction-concept-55">(17)</a>
    <li><a href="#ref-for-transaction-concept-56">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-transaction-concept-57">5.6. Asynchronously executing a request</a> <a href="#ref-for-transaction-concept-58">(2)</a>
    <li><a href="#ref-for-transaction-concept-59">5.7. Running an upgrade transaction</a> <a href="#ref-for-transaction-concept-60">(2)</a>
    <li><a href="#ref-for-transaction-concept-61">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-transaction-concept-62">(2)</a>
    <li><a href="#ref-for-transaction-concept-63">5.9. Firing a success event</a>
    <li><a href="#ref-for-transaction-concept-64">5.10. Firing an error event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-connection">
   <b><a href="#transaction-connection">#transaction-connection</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-connection-1">2.7. Transactions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-scope">
   <b><a href="#transaction-scope">#transaction-scope</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-scope-1">2.7. Transactions</a> <a href="#ref-for-transaction-scope-2">(2)</a>
    <li><a href="#ref-for-transaction-scope-3">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-scope-4">(2)</a> <a href="#ref-for-transaction-scope-5">(3)</a> <a href="#ref-for-transaction-scope-6">(4)</a> <a href="#ref-for-transaction-scope-7">(5)</a> <a href="#ref-for-transaction-scope-8">(6)</a> <a href="#ref-for-transaction-scope-9">(7)</a> <a href="#ref-for-transaction-scope-10">(8)</a>
    <li><a href="#ref-for-transaction-scope-11">2.11. Key Generators</a>
    <li><a href="#ref-for-transaction-scope-12">4.9. The IDBTransaction interface</a> <a href="#ref-for-transaction-scope-13">(2)</a>
    <li><a href="#ref-for-transaction-scope-14">5.7. Running an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-mode">
   <b><a href="#transaction-mode">#transaction-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-mode-1">2.7. Transactions</a> <a href="#ref-for-transaction-mode-2">(2)</a> <a href="#ref-for-transaction-mode-3">(3)</a> <a href="#ref-for-transaction-mode-4">(4)</a>
    <li><a href="#ref-for-transaction-mode-5">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-mode-6">(2)</a> <a href="#ref-for-transaction-mode-7">(3)</a>
    <li><a href="#ref-for-transaction-mode-8">2.7.2. Upgrade Transactions</a>
    <li><a href="#ref-for-transaction-mode-9">4.9. The IDBTransaction interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-active-flag">
   <b><a href="#transaction-active-flag">#transaction-active-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-active-flag-1">2.7. Transactions</a>
    <li><a href="#ref-for-transaction-active-flag-2">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-active-flag-3">(2)</a>
    <li><a href="#ref-for-transaction-active-flag-4">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-transaction-active-flag-5">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-transaction-active-flag-6">5.7. Running an upgrade transaction</a>
    <li><a href="#ref-for-transaction-active-flag-7">5.9. Firing a success event</a> <a href="#ref-for-transaction-active-flag-8">(2)</a>
    <li><a href="#ref-for-transaction-active-flag-9">5.10. Firing an error event</a> <a href="#ref-for-transaction-active-flag-10">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-active">
   <b><a href="#transaction-active">#transaction-active</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-active-1">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-active-2">(2)</a> <a href="#ref-for-transaction-active-3">(3)</a> <a href="#ref-for-transaction-active-4">(4)</a>
    <li><a href="#ref-for-transaction-active-5">2.10. Cursor</a>
    <li><a href="#ref-for-transaction-active-6">4.4. The IDBDatabase interface</a> <a href="#ref-for-transaction-active-7">(2)</a>
    <li><a href="#ref-for-transaction-active-8">4.5. The IDBObjectStore interface</a> <a href="#ref-for-transaction-active-9">(2)</a> <a href="#ref-for-transaction-active-10">(3)</a> <a href="#ref-for-transaction-active-11">(4)</a> <a href="#ref-for-transaction-active-12">(5)</a> <a href="#ref-for-transaction-active-13">(6)</a> <a href="#ref-for-transaction-active-14">(7)</a> <a href="#ref-for-transaction-active-15">(8)</a> <a href="#ref-for-transaction-active-16">(9)</a> <a href="#ref-for-transaction-active-17">(10)</a> <a href="#ref-for-transaction-active-18">(11)</a> <a href="#ref-for-transaction-active-19">(12)</a> <a href="#ref-for-transaction-active-20">(13)</a> <a href="#ref-for-transaction-active-21">(14)</a>
    <li><a href="#ref-for-transaction-active-22">4.6. The IDBIndex interface</a> <a href="#ref-for-transaction-active-23">(2)</a> <a href="#ref-for-transaction-active-24">(3)</a> <a href="#ref-for-transaction-active-25">(4)</a> <a href="#ref-for-transaction-active-26">(5)</a> <a href="#ref-for-transaction-active-27">(6)</a> <a href="#ref-for-transaction-active-28">(7)</a> <a href="#ref-for-transaction-active-29">(8)</a>
    <li><a href="#ref-for-transaction-active-30">4.8. The IDBCursor interface</a> <a href="#ref-for-transaction-active-31">(2)</a> <a href="#ref-for-transaction-active-32">(3)</a> <a href="#ref-for-transaction-active-33">(4)</a> <a href="#ref-for-transaction-active-34">(5)</a> <a href="#ref-for-transaction-active-35">(6)</a>
    <li><a href="#ref-for-transaction-active-36">5.6. Asynchronously executing a request</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-request-list">
   <b><a href="#transaction-request-list">#transaction-request-list</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-request-list-1">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-transaction-request-list-2">5.6. Asynchronously executing a request</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-error">
   <b><a href="#transaction-error">#transaction-error</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-error-1">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-transaction-error-2">5.5. Aborting a transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-read-only-transaction">
   <b><a href="#transaction-read-only-transaction">#transaction-read-only-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-read-only-transaction-1">2.7. Transactions</a>
    <li><a href="#ref-for-transaction-read-only-transaction-2">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-read-only-transaction-3">(2)</a> <a href="#ref-for-transaction-read-only-transaction-4">(3)</a> <a href="#ref-for-transaction-read-only-transaction-5">(4)</a> <a href="#ref-for-transaction-read-only-transaction-6">(5)</a> <a href="#ref-for-transaction-read-only-transaction-7">(6)</a> <a href="#ref-for-transaction-read-only-transaction-8">(7)</a>
    <li><a href="#ref-for-transaction-read-only-transaction-9">4.5. The IDBObjectStore interface</a> <a href="#ref-for-transaction-read-only-transaction-10">(2)</a> <a href="#ref-for-transaction-read-only-transaction-11">(3)</a> <a href="#ref-for-transaction-read-only-transaction-12">(4)</a>
    <li><a href="#ref-for-transaction-read-only-transaction-13">4.8. The IDBCursor interface</a> <a href="#ref-for-transaction-read-only-transaction-14">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-read-write-transaction">
   <b><a href="#transaction-read-write-transaction">#transaction-read-write-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-read-write-transaction-1">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-read-write-transaction-2">(2)</a> <a href="#ref-for-transaction-read-write-transaction-3">(3)</a> <a href="#ref-for-transaction-read-write-transaction-4">(4)</a> <a href="#ref-for-transaction-read-write-transaction-5">(5)</a> <a href="#ref-for-transaction-read-write-transaction-6">(6)</a> <a href="#ref-for-transaction-read-write-transaction-7">(7)</a> <a href="#ref-for-transaction-read-write-transaction-8">(8)</a> <a href="#ref-for-transaction-read-write-transaction-9">(9)</a> <a href="#ref-for-transaction-read-write-transaction-10">(10)</a> <a href="#ref-for-transaction-read-write-transaction-11">(11)</a> <a href="#ref-for-transaction-read-write-transaction-12">(12)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-lifetime">
   <b><a href="#transaction-lifetime">#transaction-lifetime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-lifetime-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-created">
   <b><a href="#transaction-created">#transaction-created</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-created-1">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-created-2">(2)</a>
    <li><a href="#ref-for-transaction-created-3">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-transaction-created-4">5.2. Closing a database</a> <a href="#ref-for-transaction-created-5">(2)</a> <a href="#ref-for-transaction-created-6">(3)</a> <a href="#ref-for-transaction-created-7">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-start">
   <b><a href="#transaction-start">#transaction-start</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-start-1">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-start-2">(2)</a> <a href="#ref-for-transaction-start-3">(3)</a> <a href="#ref-for-transaction-start-4">(4)</a> <a href="#ref-for-transaction-start-5">(5)</a> <a href="#ref-for-transaction-start-6">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-abort">
   <b><a href="#transaction-abort">#transaction-abort</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-abort-1">2.7. Transactions</a>
    <li><a href="#ref-for-transaction-abort-2">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-abort-3">(2)</a> <a href="#ref-for-transaction-abort-4">(3)</a> <a href="#ref-for-transaction-abort-5">(4)</a>
    <li><a href="#ref-for-transaction-abort-6">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-transaction-abort-7">5.6. Asynchronously executing a request</a>
    <li><a href="#ref-for-transaction-abort-8">5.7. Running an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-commit">
   <b><a href="#transaction-commit">#transaction-commit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-commit-1">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-commit-2">(2)</a> <a href="#ref-for-transaction-commit-3">(3)</a>
    <li><a href="#ref-for-transaction-commit-4">5.5. Aborting a transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transaction-finish">
   <b><a href="#transaction-finish">#transaction-finish</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-finish-1">2.7.1. Transaction Lifetime</a> <a href="#ref-for-transaction-finish-2">(2)</a> <a href="#ref-for-transaction-finish-3">(3)</a>
    <li><a href="#ref-for-transaction-finish-4">2.7.2. Upgrade Transactions</a>
    <li><a href="#ref-for-transaction-finish-5">4.5. The IDBObjectStore interface</a> <a href="#ref-for-transaction-finish-6">(2)</a> <a href="#ref-for-transaction-finish-7">(3)</a> <a href="#ref-for-transaction-finish-8">(4)</a> <a href="#ref-for-transaction-finish-9">(5)</a>
    <li><a href="#ref-for-transaction-finish-10">4.6. The IDBIndex interface</a> <a href="#ref-for-transaction-finish-11">(2)</a>
    <li><a href="#ref-for-transaction-finish-12">4.9. The IDBTransaction interface</a> <a href="#ref-for-transaction-finish-13">(2)</a>
    <li><a href="#ref-for-transaction-finish-14">5.7. Running an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="upgrade-transaction">
   <b><a href="#upgrade-transaction">#upgrade-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-upgrade-transaction-1">2.1. Database</a>
    <li><a href="#ref-for-upgrade-transaction-2">2.1.1. Database Connection</a>
    <li><a href="#ref-for-upgrade-transaction-3">2.2. Object Store</a>
    <li><a href="#ref-for-upgrade-transaction-4">2.2.1. Object Store Handle</a> <a href="#ref-for-upgrade-transaction-5">(2)</a>
    <li><a href="#ref-for-upgrade-transaction-6">2.6.1. Index Handle</a>
    <li><a href="#ref-for-upgrade-transaction-7">2.7.2. Upgrade Transactions</a> <a href="#ref-for-upgrade-transaction-8">(2)</a> <a href="#ref-for-upgrade-transaction-9">(3)</a> <a href="#ref-for-upgrade-transaction-10">(4)</a> <a href="#ref-for-upgrade-transaction-11">(5)</a> <a href="#ref-for-upgrade-transaction-12">(6)</a>
    <li><a href="#ref-for-upgrade-transaction-13">2.8. Requests</a>
    <li><a href="#ref-for-upgrade-transaction-14">4.3. The IDBFactory interface</a> <a href="#ref-for-upgrade-transaction-15">(2)</a>
    <li><a href="#ref-for-upgrade-transaction-16">4.4. The IDBDatabase interface</a> <a href="#ref-for-upgrade-transaction-17">(2)</a> <a href="#ref-for-upgrade-transaction-18">(3)</a> <a href="#ref-for-upgrade-transaction-19">(4)</a> <a href="#ref-for-upgrade-transaction-20">(5)</a> <a href="#ref-for-upgrade-transaction-21">(6)</a> <a href="#ref-for-upgrade-transaction-22">(7)</a>
    <li><a href="#ref-for-upgrade-transaction-23">4.5. The IDBObjectStore interface</a> <a href="#ref-for-upgrade-transaction-24">(2)</a> <a href="#ref-for-upgrade-transaction-25">(3)</a> <a href="#ref-for-upgrade-transaction-26">(4)</a> <a href="#ref-for-upgrade-transaction-27">(5)</a> <a href="#ref-for-upgrade-transaction-28">(6)</a> <a href="#ref-for-upgrade-transaction-29">(7)</a> <a href="#ref-for-upgrade-transaction-30">(8)</a> <a href="#ref-for-upgrade-transaction-31">(9)</a> <a href="#ref-for-upgrade-transaction-32">(10)</a>
    <li><a href="#ref-for-upgrade-transaction-33">4.6. The IDBIndex interface</a> <a href="#ref-for-upgrade-transaction-34">(2)</a>
    <li><a href="#ref-for-upgrade-transaction-35">4.9. The IDBTransaction interface</a> <a href="#ref-for-upgrade-transaction-36">(2)</a>
    <li><a href="#ref-for-upgrade-transaction-37">5.1. Opening a database</a>
    <li><a href="#ref-for-upgrade-transaction-38">5.5. Aborting a transaction</a> <a href="#ref-for-upgrade-transaction-39">(2)</a>
    <li><a href="#ref-for-upgrade-transaction-40">5.7. Running an upgrade transaction</a>
    <li><a href="#ref-for-upgrade-transaction-41">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request">
   <b><a href="#request">#request</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-1">2.7. Transactions</a> <a href="#ref-for-request-2">(2)</a>
    <li><a href="#ref-for-request-3">2.7.1. Transaction Lifetime</a> <a href="#ref-for-request-4">(2)</a> <a href="#ref-for-request-5">(3)</a> <a href="#ref-for-request-6">(4)</a> <a href="#ref-for-request-7">(5)</a>
    <li><a href="#ref-for-request-8">2.8. Requests</a> <a href="#ref-for-request-9">(2)</a> <a href="#ref-for-request-10">(3)</a> <a href="#ref-for-request-11">(4)</a> <a href="#ref-for-request-12">(5)</a> <a href="#ref-for-request-13">(6)</a> <a href="#ref-for-request-14">(7)</a> <a href="#ref-for-request-15">(8)</a>
    <li><a href="#ref-for-request-16">2.8.1. Open Requests</a>
    <li><a href="#ref-for-request-17">4.1. The IDBRequest interface</a> <a href="#ref-for-request-18">(2)</a> <a href="#ref-for-request-19">(3)</a>
    <li><a href="#ref-for-request-20">4.3. The IDBFactory interface</a>
    <li><a href="#ref-for-request-21">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-22">(2)</a> <a href="#ref-for-request-23">(3)</a>
    <li><a href="#ref-for-request-24">4.8. The IDBCursor interface</a> <a href="#ref-for-request-25">(2)</a> <a href="#ref-for-request-26">(3)</a>
    <li><a href="#ref-for-request-27">4.9. The IDBTransaction interface</a> <a href="#ref-for-request-28">(2)</a> <a href="#ref-for-request-29">(3)</a>
    <li><a href="#ref-for-request-30">5.6. Asynchronously executing a request</a> <a href="#ref-for-request-31">(2)</a> <a href="#ref-for-request-32">(3)</a>
    <li><a href="#ref-for-request-33">5.7. Running an upgrade transaction</a>
    <li><a href="#ref-for-request-34">5.9. Firing a success event</a> <a href="#ref-for-request-35">(2)</a>
    <li><a href="#ref-for-request-36">5.10. Firing an error event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-done-flag">
   <b><a href="#request-done-flag">#request-done-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-done-flag-1">2.8. Requests</a> <a href="#ref-for-request-done-flag-2">(2)</a> <a href="#ref-for-request-done-flag-3">(3)</a> <a href="#ref-for-request-done-flag-4">(4)</a> <a href="#ref-for-request-done-flag-5">(5)</a>
    <li><a href="#ref-for-request-done-flag-6">4.1. The IDBRequest interface</a> <a href="#ref-for-request-done-flag-7">(2)</a> <a href="#ref-for-request-done-flag-8">(3)</a>
    <li><a href="#ref-for-request-done-flag-9">4.8. The IDBCursor interface</a> <a href="#ref-for-request-done-flag-10">(2)</a> <a href="#ref-for-request-done-flag-11">(3)</a>
    <li><a href="#ref-for-request-done-flag-12">5.5. Aborting a transaction</a> <a href="#ref-for-request-done-flag-13">(2)</a>
    <li><a href="#ref-for-request-done-flag-14">5.6. Asynchronously executing a request</a> <a href="#ref-for-request-done-flag-15">(2)</a>
    <li><a href="#ref-for-request-done-flag-16">5.7. Running an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-source">
   <b><a href="#request-source">#request-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-source-1">2.8.1. Open Requests</a>
    <li><a href="#ref-for-request-source-2">4.1. The IDBRequest interface</a> <a href="#ref-for-request-source-3">(2)</a>
    <li><a href="#ref-for-request-source-4">5.6. Asynchronously executing a request</a>
    <li><a href="#ref-for-request-source-5">5.9. Firing a success event</a>
    <li><a href="#ref-for-request-source-6">5.10. Firing an error event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-result">
   <b><a href="#request-result">#request-result</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-result-1">2.8. Requests</a> <a href="#ref-for-request-result-2">(2)</a>
    <li><a href="#ref-for-request-result-3">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-request-result-4">4.3. The IDBFactory interface</a> <a href="#ref-for-request-result-5">(2)</a>
    <li><a href="#ref-for-request-result-6">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-request-result-7">5.6. Asynchronously executing a request</a> <a href="#ref-for-request-result-8">(2)</a>
    <li><a href="#ref-for-request-result-9">5.7. Running an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-error">
   <b><a href="#request-error">#request-error</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-error-1">2.8. Requests</a>
    <li><a href="#ref-for-request-error-2">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-request-error-3">4.3. The IDBFactory interface</a> <a href="#ref-for-request-error-4">(2)</a>
    <li><a href="#ref-for-request-error-5">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-request-error-6">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-request-error-7">5.6. Asynchronously executing a request</a> <a href="#ref-for-request-error-8">(2)</a>
    <li><a href="#ref-for-request-error-9">5.10. Firing an error event</a> <a href="#ref-for-request-error-10">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-transaction">
   <b><a href="#request-transaction">#request-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-transaction-1">2.8. Requests</a>
    <li><a href="#ref-for-request-transaction-2">2.8.1. Open Requests</a>
    <li><a href="#ref-for-request-transaction-3">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-request-transaction-4">5.7. Running an upgrade transaction</a> <a href="#ref-for-request-transaction-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-placed">
   <b><a href="#request-placed">#request-placed</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-placed-1">2.7.1. Transaction Lifetime</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-open-request">
   <b><a href="#request-open-request">#request-open-request</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-open-request-1">2.7.2. Upgrade Transactions</a>
    <li><a href="#ref-for-request-open-request-2">2.8. Requests</a>
    <li><a href="#ref-for-request-open-request-3">2.8.1. Open Requests</a> <a href="#ref-for-request-open-request-4">(2)</a> <a href="#ref-for-request-open-request-5">(3)</a> <a href="#ref-for-request-open-request-6">(4)</a> <a href="#ref-for-request-open-request-7">(5)</a> <a href="#ref-for-request-open-request-8">(6)</a> <a href="#ref-for-request-open-request-9">(7)</a>
    <li><a href="#ref-for-request-open-request-10">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-request-open-request-11">4.3. The IDBFactory interface</a> <a href="#ref-for-request-open-request-12">(2)</a>
    <li><a href="#ref-for-request-open-request-13">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-blocked">
   <b><a href="#request-blocked">#request-blocked</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-blocked-1">4.1. The IDBRequest interface</a> <a href="#ref-for-request-blocked-2">(2)</a>
    <li><a href="#ref-for-request-blocked-3">5.1. Opening a database</a>
    <li><a href="#ref-for-request-blocked-4">5.3. Deleting a database</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-upgradeneeded">
   <b><a href="#request-upgradeneeded">#request-upgradeneeded</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-upgradeneeded-1">2.2. Object Store</a>
    <li><a href="#ref-for-request-upgradeneeded-2">2.7. Transactions</a>
    <li><a href="#ref-for-request-upgradeneeded-3">2.7.2. Upgrade Transactions</a> <a href="#ref-for-request-upgradeneeded-4">(2)</a> <a href="#ref-for-request-upgradeneeded-5">(3)</a>
    <li><a href="#ref-for-request-upgradeneeded-6">2.8. Requests</a>
    <li><a href="#ref-for-request-upgradeneeded-7">2.8.1. Open Requests</a>
    <li><a href="#ref-for-request-upgradeneeded-8">4.1. The IDBRequest interface</a> <a href="#ref-for-request-upgradeneeded-9">(2)</a>
    <li><a href="#ref-for-request-upgradeneeded-10">5.7. Running an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-connection-queue">
   <b><a href="#request-connection-queue">#request-connection-queue</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-connection-queue-1">2.8.1. Open Requests</a> <a href="#ref-for-request-connection-queue-2">(2)</a>
    <li><a href="#ref-for-request-connection-queue-3">5.1. Opening a database</a>
    <li><a href="#ref-for-request-connection-queue-4">5.3. Deleting a database</a>
    <li><a href="#ref-for-request-connection-queue-5">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-key-range">
   <b><a href="#request-key-range">#request-key-range</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-key-range-1">2.9. Key Range</a> <a href="#ref-for-request-key-range-2">(2)</a> <a href="#ref-for-request-key-range-3">(3)</a> <a href="#ref-for-request-key-range-4">(4)</a> <a href="#ref-for-request-key-range-5">(5)</a> <a href="#ref-for-request-key-range-6">(6)</a> <a href="#ref-for-request-key-range-7">(7)</a> <a href="#ref-for-request-key-range-8">(8)</a> <a href="#ref-for-request-key-range-9">(9)</a> <a href="#ref-for-request-key-range-10">(10)</a> <a href="#ref-for-request-key-range-11">(11)</a> <a href="#ref-for-request-key-range-12">(12)</a> <a href="#ref-for-request-key-range-13">(13)</a> <a href="#ref-for-request-key-range-14">(14)</a> <a href="#ref-for-request-key-range-15">(15)</a> <a href="#ref-for-request-key-range-16">(16)</a> <a href="#ref-for-request-key-range-17">(17)</a> <a href="#ref-for-request-key-range-18">(18)</a> <a href="#ref-for-request-key-range-19">(19)</a>
    <li><a href="#ref-for-request-key-range-20">4.7. The IDBKeyRange interface</a> <a href="#ref-for-request-key-range-21">(2)</a> <a href="#ref-for-request-key-range-22">(3)</a> <a href="#ref-for-request-key-range-23">(4)</a> <a href="#ref-for-request-key-range-24">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-lower-bound">
   <b><a href="#request-lower-bound">#request-lower-bound</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-lower-bound-1">2.9. Key Range</a> <a href="#ref-for-request-lower-bound-2">(2)</a> <a href="#ref-for-request-lower-bound-3">(3)</a> <a href="#ref-for-request-lower-bound-4">(4)</a> <a href="#ref-for-request-lower-bound-5">(5)</a> <a href="#ref-for-request-lower-bound-6">(6)</a> <a href="#ref-for-request-lower-bound-7">(7)</a>
    <li><a href="#ref-for-request-lower-bound-8">4.7. The IDBKeyRange interface</a> <a href="#ref-for-request-lower-bound-9">(2)</a> <a href="#ref-for-request-lower-bound-10">(3)</a> <a href="#ref-for-request-lower-bound-11">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-upper-bound">
   <b><a href="#request-upper-bound">#request-upper-bound</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-upper-bound-1">2.9. Key Range</a> <a href="#ref-for-request-upper-bound-2">(2)</a> <a href="#ref-for-request-upper-bound-3">(3)</a> <a href="#ref-for-request-upper-bound-4">(4)</a> <a href="#ref-for-request-upper-bound-5">(5)</a> <a href="#ref-for-request-upper-bound-6">(6)</a> <a href="#ref-for-request-upper-bound-7">(7)</a>
    <li><a href="#ref-for-request-upper-bound-8">4.7. The IDBKeyRange interface</a> <a href="#ref-for-request-upper-bound-9">(2)</a> <a href="#ref-for-request-upper-bound-10">(3)</a> <a href="#ref-for-request-upper-bound-11">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-lower-open-flag">
   <b><a href="#request-lower-open-flag">#request-lower-open-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-lower-open-flag-1">2.9. Key Range</a> <a href="#ref-for-request-lower-open-flag-2">(2)</a> <a href="#ref-for-request-lower-open-flag-3">(3)</a>
    <li><a href="#ref-for-request-lower-open-flag-4">4.7. The IDBKeyRange interface</a> <a href="#ref-for-request-lower-open-flag-5">(2)</a> <a href="#ref-for-request-lower-open-flag-6">(3)</a> <a href="#ref-for-request-lower-open-flag-7">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-upper-open-flag">
   <b><a href="#request-upper-open-flag">#request-upper-open-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-upper-open-flag-1">2.9. Key Range</a> <a href="#ref-for-request-upper-open-flag-2">(2)</a> <a href="#ref-for-request-upper-open-flag-3">(3)</a>
    <li><a href="#ref-for-request-upper-open-flag-4">4.7. The IDBKeyRange interface</a> <a href="#ref-for-request-upper-open-flag-5">(2)</a> <a href="#ref-for-request-upper-open-flag-6">(3)</a> <a href="#ref-for-request-upper-open-flag-7">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-containing-only">
   <b><a href="#request-containing-only">#request-containing-only</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-containing-only-1">2.9. Key Range</a>
    <li><a href="#ref-for-request-containing-only-2">4.7. The IDBKeyRange interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-in">
   <b><a href="#request-in">#request-in</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-in-1">2.9. Key Range</a>
    <li><a href="#ref-for-request-in-2">4.7. The IDBKeyRange interface</a>
    <li><a href="#ref-for-request-in-3">6.2. Object Store Retrieval Operations</a> <a href="#ref-for-request-in-4">(2)</a> <a href="#ref-for-request-in-5">(3)</a> <a href="#ref-for-request-in-6">(4)</a>
    <li><a href="#ref-for-request-in-7">6.3. Index Retrieval Operations</a> <a href="#ref-for-request-in-8">(2)</a> <a href="#ref-for-request-in-9">(3)</a> <a href="#ref-for-request-in-10">(4)</a>
    <li><a href="#ref-for-request-in-11">6.4. Object Store Deletion Operation</a> <a href="#ref-for-request-in-12">(2)</a>
    <li><a href="#ref-for-request-in-13">6.5. Record Counting Operation</a>
    <li><a href="#ref-for-request-in-14">6.7. Cursor Iteration Operation</a> <a href="#ref-for-request-in-15">(2)</a> <a href="#ref-for-request-in-16">(3)</a> <a href="#ref-for-request-in-17">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-unbounded-key-range">
   <b><a href="#request-unbounded-key-range">#request-unbounded-key-range</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-unbounded-key-range-1">2.9. Key Range</a> <a href="#ref-for-request-unbounded-key-range-2">(2)</a>
    <li><a href="#ref-for-request-unbounded-key-range-3">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-unbounded-key-range-4">(2)</a> <a href="#ref-for-request-unbounded-key-range-5">(3)</a> <a href="#ref-for-request-unbounded-key-range-6">(4)</a> <a href="#ref-for-request-unbounded-key-range-7">(5)</a>
    <li><a href="#ref-for-request-unbounded-key-range-8">4.6. The IDBIndex interface</a> <a href="#ref-for-request-unbounded-key-range-9">(2)</a> <a href="#ref-for-request-unbounded-key-range-10">(3)</a> <a href="#ref-for-request-unbounded-key-range-11">(4)</a> <a href="#ref-for-request-unbounded-key-range-12">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-convert-a-value-to-a-key-range">
   <b><a href="#request-convert-a-value-to-a-key-range">#request-convert-a-value-to-a-key-range</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-range-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-2">(2)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-3">(3)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-4">(4)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-5">(5)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-6">(6)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-7">(7)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-8">(8)</a>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-range-9">4.6. The IDBIndex interface</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-10">(2)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-11">(3)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-12">(4)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-13">(5)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-14">(6)</a> <a href="#ref-for-request-convert-a-value-to-a-key-range-15">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-cursor">
   <b><a href="#request-cursor">#request-cursor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-cursor-1">2.8. Requests</a>
    <li><a href="#ref-for-request-cursor-2">2.10. Cursor</a> <a href="#ref-for-request-cursor-3">(2)</a> <a href="#ref-for-request-cursor-4">(3)</a> <a href="#ref-for-request-cursor-5">(4)</a> <a href="#ref-for-request-cursor-6">(5)</a> <a href="#ref-for-request-cursor-7">(6)</a> <a href="#ref-for-request-cursor-8">(7)</a> <a href="#ref-for-request-cursor-9">(8)</a> <a href="#ref-for-request-cursor-10">(9)</a> <a href="#ref-for-request-cursor-11">(10)</a> <a href="#ref-for-request-cursor-12">(11)</a> <a href="#ref-for-request-cursor-13">(12)</a> <a href="#ref-for-request-cursor-14">(13)</a> <a href="#ref-for-request-cursor-15">(14)</a>
    <li><a href="#ref-for-request-cursor-16">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-cursor-17">(2)</a> <a href="#ref-for-request-cursor-18">(3)</a> <a href="#ref-for-request-cursor-19">(4)</a>
    <li><a href="#ref-for-request-cursor-20">4.6. The IDBIndex interface</a> <a href="#ref-for-request-cursor-21">(2)</a> <a href="#ref-for-request-cursor-22">(3)</a> <a href="#ref-for-request-cursor-23">(4)</a>
    <li><a href="#ref-for-request-cursor-24">4.8. The IDBCursor interface</a> <a href="#ref-for-request-cursor-25">(2)</a> <a href="#ref-for-request-cursor-26">(3)</a> <a href="#ref-for-request-cursor-27">(4)</a> <a href="#ref-for-request-cursor-28">(5)</a> <a href="#ref-for-request-cursor-29">(6)</a> <a href="#ref-for-request-cursor-30">(7)</a> <a href="#ref-for-request-cursor-31">(8)</a> <a href="#ref-for-request-cursor-32">(9)</a> <a href="#ref-for-request-cursor-33">(10)</a> <a href="#ref-for-request-cursor-34">(11)</a> <a href="#ref-for-request-cursor-35">(12)</a> <a href="#ref-for-request-cursor-36">(13)</a> <a href="#ref-for-request-cursor-37">(14)</a> <a href="#ref-for-request-cursor-38">(15)</a> <a href="#ref-for-request-cursor-39">(16)</a> <a href="#ref-for-request-cursor-40">(17)</a> <a href="#ref-for-request-cursor-41">(18)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-transaction">
   <b><a href="#cursor-transaction">#cursor-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-transaction-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-cursor-transaction-2">(2)</a>
    <li><a href="#ref-for-cursor-transaction-3">4.6. The IDBIndex interface</a> <a href="#ref-for-cursor-transaction-4">(2)</a>
    <li><a href="#ref-for-cursor-transaction-5">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-transaction-6">(2)</a> <a href="#ref-for-cursor-transaction-7">(3)</a> <a href="#ref-for-cursor-transaction-8">(4)</a> <a href="#ref-for-cursor-transaction-9">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-range">
   <b><a href="#cursor-range">#cursor-range</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-range-1">2.10. Cursor</a> <a href="#ref-for-cursor-range-2">(2)</a>
    <li><a href="#ref-for-cursor-range-3">4.5. The IDBObjectStore interface</a> <a href="#ref-for-cursor-range-4">(2)</a> <a href="#ref-for-cursor-range-5">(3)</a> <a href="#ref-for-cursor-range-6">(4)</a>
    <li><a href="#ref-for-cursor-range-7">4.6. The IDBIndex interface</a> <a href="#ref-for-cursor-range-8">(2)</a> <a href="#ref-for-cursor-range-9">(3)</a> <a href="#ref-for-cursor-range-10">(4)</a>
    <li><a href="#ref-for-cursor-range-11">6.7. Cursor Iteration Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-source">
   <b><a href="#cursor-source">#cursor-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-source-1">2.10. Cursor</a> <a href="#ref-for-cursor-source-2">(2)</a> <a href="#ref-for-cursor-source-3">(3)</a> <a href="#ref-for-cursor-source-4">(4)</a> <a href="#ref-for-cursor-source-5">(5)</a> <a href="#ref-for-cursor-source-6">(6)</a> <a href="#ref-for-cursor-source-7">(7)</a> <a href="#ref-for-cursor-source-8">(8)</a> <a href="#ref-for-cursor-source-9">(9)</a>
    <li><a href="#ref-for-cursor-source-10">4.5. The IDBObjectStore interface</a> <a href="#ref-for-cursor-source-11">(2)</a>
    <li><a href="#ref-for-cursor-source-12">4.6. The IDBIndex interface</a> <a href="#ref-for-cursor-source-13">(2)</a>
    <li><a href="#ref-for-cursor-source-14">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-source-15">(2)</a> <a href="#ref-for-cursor-source-16">(3)</a> <a href="#ref-for-cursor-source-17">(4)</a> <a href="#ref-for-cursor-source-18">(5)</a> <a href="#ref-for-cursor-source-19">(6)</a> <a href="#ref-for-cursor-source-20">(7)</a> <a href="#ref-for-cursor-source-21">(8)</a> <a href="#ref-for-cursor-source-22">(9)</a> <a href="#ref-for-cursor-source-23">(10)</a>
    <li><a href="#ref-for-cursor-source-24">6.7. Cursor Iteration Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-direction">
   <b><a href="#cursor-direction">#cursor-direction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-direction-1">2.10. Cursor</a>
    <li><a href="#ref-for-cursor-direction-2">4.5. The IDBObjectStore interface</a> <a href="#ref-for-cursor-direction-3">(2)</a>
    <li><a href="#ref-for-cursor-direction-4">4.6. The IDBIndex interface</a> <a href="#ref-for-cursor-direction-5">(2)</a>
    <li><a href="#ref-for-cursor-direction-6">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-direction-7">(2)</a> <a href="#ref-for-cursor-direction-8">(3)</a> <a href="#ref-for-cursor-direction-9">(4)</a> <a href="#ref-for-cursor-direction-10">(5)</a> <a href="#ref-for-cursor-direction-11">(6)</a> <a href="#ref-for-cursor-direction-12">(7)</a> <a href="#ref-for-cursor-direction-13">(8)</a>
    <li><a href="#ref-for-cursor-direction-14">6.7. Cursor Iteration Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-position">
   <b><a href="#cursor-position">#cursor-position</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-position-1">2.10. Cursor</a> <a href="#ref-for-cursor-position-2">(2)</a> <a href="#ref-for-cursor-position-3">(3)</a>
    <li><a href="#ref-for-cursor-position-4">4.5. The IDBObjectStore interface</a> <a href="#ref-for-cursor-position-5">(2)</a>
    <li><a href="#ref-for-cursor-position-6">4.6. The IDBIndex interface</a> <a href="#ref-for-cursor-position-7">(2)</a>
    <li><a href="#ref-for-cursor-position-8">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-position-9">(2)</a> <a href="#ref-for-cursor-position-10">(3)</a> <a href="#ref-for-cursor-position-11">(4)</a> <a href="#ref-for-cursor-position-12">(5)</a> <a href="#ref-for-cursor-position-13">(6)</a>
    <li><a href="#ref-for-cursor-position-14">6.7. Cursor Iteration Operation</a> <a href="#ref-for-cursor-position-15">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-object-store-position">
   <b><a href="#cursor-object-store-position">#cursor-object-store-position</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-object-store-position-1">2.10. Cursor</a> <a href="#ref-for-cursor-object-store-position-2">(2)</a>
    <li><a href="#ref-for-cursor-object-store-position-3">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-object-store-position-4">(2)</a>
    <li><a href="#ref-for-cursor-object-store-position-5">6.7. Cursor Iteration Operation</a> <a href="#ref-for-cursor-object-store-position-6">(2)</a> <a href="#ref-for-cursor-object-store-position-7">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-key">
   <b><a href="#cursor-key">#cursor-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-key-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-cursor-key-2">(2)</a>
    <li><a href="#ref-for-cursor-key-3">4.6. The IDBIndex interface</a> <a href="#ref-for-cursor-key-4">(2)</a>
    <li><a href="#ref-for-cursor-key-5">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-key-6">(2)</a>
    <li><a href="#ref-for-cursor-key-7">6.7. Cursor Iteration Operation</a> <a href="#ref-for-cursor-key-8">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-value">
   <b><a href="#cursor-value">#cursor-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-value-1">2.10. Cursor</a>
    <li><a href="#ref-for-cursor-value-2">4.5. The IDBObjectStore interface</a> <a href="#ref-for-cursor-value-3">(2)</a>
    <li><a href="#ref-for-cursor-value-4">4.6. The IDBIndex interface</a> <a href="#ref-for-cursor-value-5">(2)</a>
    <li><a href="#ref-for-cursor-value-6">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-value-7">(2)</a>
    <li><a href="#ref-for-cursor-value-8">6.7. Cursor Iteration Operation</a> <a href="#ref-for-cursor-value-9">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-got-value-flag">
   <b><a href="#cursor-got-value-flag">#cursor-got-value-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-got-value-flag-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-cursor-got-value-flag-2">(2)</a>
    <li><a href="#ref-for-cursor-got-value-flag-3">4.6. The IDBIndex interface</a> <a href="#ref-for-cursor-got-value-flag-4">(2)</a>
    <li><a href="#ref-for-cursor-got-value-flag-5">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-got-value-flag-6">(2)</a> <a href="#ref-for-cursor-got-value-flag-7">(3)</a> <a href="#ref-for-cursor-got-value-flag-8">(4)</a> <a href="#ref-for-cursor-got-value-flag-9">(5)</a> <a href="#ref-for-cursor-got-value-flag-10">(6)</a> <a href="#ref-for-cursor-got-value-flag-11">(7)</a> <a href="#ref-for-cursor-got-value-flag-12">(8)</a> <a href="#ref-for-cursor-got-value-flag-13">(9)</a> <a href="#ref-for-cursor-got-value-flag-14">(10)</a> <a href="#ref-for-cursor-got-value-flag-15">(11)</a>
    <li><a href="#ref-for-cursor-got-value-flag-16">6.7. Cursor Iteration Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-effective-object-store">
   <b><a href="#cursor-effective-object-store">#cursor-effective-object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-effective-object-store-1">2.10. Cursor</a>
    <li><a href="#ref-for-cursor-effective-object-store-2">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-effective-object-store-3">(2)</a> <a href="#ref-for-cursor-effective-object-store-4">(3)</a> <a href="#ref-for-cursor-effective-object-store-5">(4)</a> <a href="#ref-for-cursor-effective-object-store-6">(5)</a> <a href="#ref-for-cursor-effective-object-store-7">(6)</a> <a href="#ref-for-cursor-effective-object-store-8">(7)</a> <a href="#ref-for-cursor-effective-object-store-9">(8)</a> <a href="#ref-for-cursor-effective-object-store-10">(9)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-effective-key">
   <b><a href="#cursor-effective-key">#cursor-effective-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-effective-key-1">2.10. Cursor</a>
    <li><a href="#ref-for-cursor-effective-key-2">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-effective-key-3">(2)</a> <a href="#ref-for-cursor-effective-key-4">(3)</a> <a href="#ref-for-cursor-effective-key-5">(4)</a> <a href="#ref-for-cursor-effective-key-6">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cursor-key-only-flag">
   <b><a href="#cursor-key-only-flag">#cursor-key-only-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cursor-key-only-flag-1">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-cursor-key-only-flag-2">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-cursor-key-only-flag-3">4.8. The IDBCursor interface</a> <a href="#ref-for-cursor-key-only-flag-4">(2)</a> <a href="#ref-for-cursor-key-only-flag-5">(3)</a>
    <li><a href="#ref-for-cursor-key-only-flag-6">6.7. Cursor Iteration Operation</a> <a href="#ref-for-cursor-key-only-flag-7">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-key-generator">
   <b><a href="#request-key-generator">#request-key-generator</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-key-generator-1">2.2. Object Store</a> <a href="#ref-for-request-key-generator-2">(2)</a>
    <li><a href="#ref-for-request-key-generator-3">2.11. Key Generators</a> <a href="#ref-for-request-key-generator-4">(2)</a> <a href="#ref-for-request-key-generator-5">(3)</a> <a href="#ref-for-request-key-generator-6">(4)</a> <a href="#ref-for-request-key-generator-7">(5)</a> <a href="#ref-for-request-key-generator-8">(6)</a> <a href="#ref-for-request-key-generator-9">(7)</a> <a href="#ref-for-request-key-generator-10">(8)</a> <a href="#ref-for-request-key-generator-11">(9)</a>
    <li><a href="#ref-for-request-key-generator-12">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-request-key-generator-13">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-key-generator-14">(2)</a> <a href="#ref-for-request-key-generator-15">(3)</a> <a href="#ref-for-request-key-generator-16">(4)</a> <a href="#ref-for-request-key-generator-17">(5)</a>
    <li><a href="#ref-for-request-key-generator-18">6.1. Object Store Storage Operation</a> <a href="#ref-for-request-key-generator-19">(2)</a> <a href="#ref-for-request-key-generator-20">(3)</a> <a href="#ref-for-request-key-generator-21">(4)</a> <a href="#ref-for-request-key-generator-22">(5)</a>
    <li><a href="#ref-for-request-key-generator-23">7.2. Inject a key into a value</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-current-number">
   <b><a href="#request-current-number">#request-current-number</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-current-number-1">2.11. Key Generators</a> <a href="#ref-for-request-current-number-2">(2)</a> <a href="#ref-for-request-current-number-3">(3)</a> <a href="#ref-for-request-current-number-4">(4)</a> <a href="#ref-for-request-current-number-5">(5)</a> <a href="#ref-for-request-current-number-6">(6)</a> <a href="#ref-for-request-current-number-7">(7)</a> <a href="#ref-for-request-current-number-8">(8)</a> <a href="#ref-for-request-current-number-9">(9)</a> <a href="#ref-for-request-current-number-10">(10)</a> <a href="#ref-for-request-current-number-11">(11)</a> <a href="#ref-for-request-current-number-12">(12)</a> <a href="#ref-for-request-current-number-13">(13)</a> <a href="#ref-for-request-current-number-14">(14)</a> <a href="#ref-for-request-current-number-15">(15)</a> <a href="#ref-for-request-current-number-16">(16)</a> <a href="#ref-for-request-current-number-17">(17)</a> <a href="#ref-for-request-current-number-18">(18)</a>
    <li><a href="#ref-for-request-current-number-19">6.1. Object Store Storage Operation</a> <a href="#ref-for-request-current-number-20">(2)</a> <a href="#ref-for-request-current-number-21">(3)</a> <a href="#ref-for-request-current-number-22">(4)</a> <a href="#ref-for-request-current-number-23">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-aborterror">
   <b><a href="#exceptiondef-request-aborterror">#exceptiondef-request-aborterror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-aborterror-1">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-exceptiondef-request-aborterror-2">5.1. Opening a database</a> <a href="#ref-for-exceptiondef-request-aborterror-3">(2)</a>
    <li><a href="#ref-for-exceptiondef-request-aborterror-4">5.2. Closing a database</a>
    <li><a href="#ref-for-exceptiondef-request-aborterror-5">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-exceptiondef-request-aborterror-6">5.7. Running an upgrade transaction</a>
    <li><a href="#ref-for-exceptiondef-request-aborterror-7">5.9. Firing a success event</a>
    <li><a href="#ref-for-exceptiondef-request-aborterror-8">5.10. Firing an error event</a> <a href="#ref-for-exceptiondef-request-aborterror-9">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-constrainterror">
   <b><a href="#exceptiondef-request-constrainterror">#exceptiondef-request-constrainterror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-constrainterror-1">2.11. Key Generators</a>
    <li><a href="#ref-for-exceptiondef-request-constrainterror-2">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-exceptiondef-request-constrainterror-3">4.5. The IDBObjectStore interface</a> <a href="#ref-for-exceptiondef-request-constrainterror-4">(2)</a> <a href="#ref-for-exceptiondef-request-constrainterror-5">(3)</a>
    <li><a href="#ref-for-exceptiondef-request-constrainterror-6">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-exceptiondef-request-constrainterror-7">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-exceptiondef-request-constrainterror-8">6.1. Object Store Storage Operation</a> <a href="#ref-for-exceptiondef-request-constrainterror-9">(2)</a> <a href="#ref-for-exceptiondef-request-constrainterror-10">(3)</a> <a href="#ref-for-exceptiondef-request-constrainterror-11">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-dataerror">
   <b><a href="#exceptiondef-request-dataerror">#exceptiondef-request-dataerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-dataerror-1">2.9. Key Range</a> <a href="#ref-for-exceptiondef-request-dataerror-2">(2)</a>
    <li><a href="#ref-for-exceptiondef-request-dataerror-3">4.3. The IDBFactory interface</a> <a href="#ref-for-exceptiondef-request-dataerror-4">(2)</a>
    <li><a href="#ref-for-exceptiondef-request-dataerror-5">4.5. The IDBObjectStore interface</a> <a href="#ref-for-exceptiondef-request-dataerror-6">(2)</a> <a href="#ref-for-exceptiondef-request-dataerror-7">(3)</a> <a href="#ref-for-exceptiondef-request-dataerror-8">(4)</a> <a href="#ref-for-exceptiondef-request-dataerror-9">(5)</a> <a href="#ref-for-exceptiondef-request-dataerror-10">(6)</a> <a href="#ref-for-exceptiondef-request-dataerror-11">(7)</a> <a href="#ref-for-exceptiondef-request-dataerror-12">(8)</a> <a href="#ref-for-exceptiondef-request-dataerror-13">(9)</a> <a href="#ref-for-exceptiondef-request-dataerror-14">(10)</a>
    <li><a href="#ref-for-exceptiondef-request-dataerror-15">4.7. The IDBKeyRange interface</a> <a href="#ref-for-exceptiondef-request-dataerror-16">(2)</a> <a href="#ref-for-exceptiondef-request-dataerror-17">(3)</a> <a href="#ref-for-exceptiondef-request-dataerror-18">(4)</a> <a href="#ref-for-exceptiondef-request-dataerror-19">(5)</a> <a href="#ref-for-exceptiondef-request-dataerror-20">(6)</a> <a href="#ref-for-exceptiondef-request-dataerror-21">(7)</a>
    <li><a href="#ref-for-exceptiondef-request-dataerror-22">4.8. The IDBCursor interface</a> <a href="#ref-for-exceptiondef-request-dataerror-23">(2)</a> <a href="#ref-for-exceptiondef-request-dataerror-24">(3)</a> <a href="#ref-for-exceptiondef-request-dataerror-25">(4)</a> <a href="#ref-for-exceptiondef-request-dataerror-26">(5)</a> <a href="#ref-for-exceptiondef-request-dataerror-27">(6)</a> <a href="#ref-for-exceptiondef-request-dataerror-28">(7)</a> <a href="#ref-for-exceptiondef-request-dataerror-29">(8)</a> <a href="#ref-for-exceptiondef-request-dataerror-30">(9)</a> <a href="#ref-for-exceptiondef-request-dataerror-31">(10)</a>
    <li><a href="#ref-for-exceptiondef-request-dataerror-32">7.2. Inject a key into a value</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-invalidaccesserror">
   <b><a href="#exceptiondef-request-invalidaccesserror">#exceptiondef-request-invalidaccesserror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-invalidaccesserror-1">4.4. The IDBDatabase interface</a> <a href="#ref-for-exceptiondef-request-invalidaccesserror-2">(2)</a>
    <li><a href="#ref-for-exceptiondef-request-invalidaccesserror-3">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-exceptiondef-request-invalidaccesserror-4">4.8. The IDBCursor interface</a> <a href="#ref-for-exceptiondef-request-invalidaccesserror-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-invalidstateerror">
   <b><a href="#exceptiondef-request-invalidstateerror">#exceptiondef-request-invalidstateerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-invalidstateerror-1">4.1. The IDBRequest interface</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-2">(2)</a>
    <li><a href="#ref-for-exceptiondef-request-invalidstateerror-3">4.4. The IDBDatabase interface</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-4">(2)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-5">(3)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-6">(4)</a>
    <li><a href="#ref-for-exceptiondef-request-invalidstateerror-7">4.5. The IDBObjectStore interface</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-8">(2)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-9">(3)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-10">(4)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-11">(5)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-12">(6)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-13">(7)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-14">(8)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-15">(9)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-16">(10)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-17">(11)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-18">(12)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-19">(13)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-20">(14)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-21">(15)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-22">(16)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-23">(17)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-24">(18)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-25">(19)</a>
    <li><a href="#ref-for-exceptiondef-request-invalidstateerror-26">4.6. The IDBIndex interface</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-27">(2)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-28">(3)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-29">(4)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-30">(5)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-31">(6)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-32">(7)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-33">(8)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-34">(9)</a>
    <li><a href="#ref-for-exceptiondef-request-invalidstateerror-35">4.8. The IDBCursor interface</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-36">(2)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-37">(3)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-38">(4)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-39">(5)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-40">(6)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-41">(7)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-42">(8)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-43">(9)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-44">(10)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-45">(11)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-46">(12)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-47">(13)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-48">(14)</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-49">(15)</a>
    <li><a href="#ref-for-exceptiondef-request-invalidstateerror-50">4.9. The IDBTransaction interface</a> <a href="#ref-for-exceptiondef-request-invalidstateerror-51">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-notfounderror">
   <b><a href="#exceptiondef-request-notfounderror">#exceptiondef-request-notfounderror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-notfounderror-1">4.4. The IDBDatabase interface</a> <a href="#ref-for-exceptiondef-request-notfounderror-2">(2)</a>
    <li><a href="#ref-for-exceptiondef-request-notfounderror-3">4.5. The IDBObjectStore interface</a> <a href="#ref-for-exceptiondef-request-notfounderror-4">(2)</a>
    <li><a href="#ref-for-exceptiondef-request-notfounderror-5">4.9. The IDBTransaction interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-quotaexceedederror">
   <b><a href="#exceptiondef-request-quotaexceedederror">#exceptiondef-request-quotaexceedederror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-quotaexceedederror-1">2.7.1. Transaction Lifetime</a>
    <li><a href="#ref-for-exceptiondef-request-quotaexceedederror-2">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-exceptiondef-request-quotaexceedederror-3">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-exceptiondef-request-quotaexceedederror-4">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-exceptiondef-request-quotaexceedederror-5">5.1. Opening a database</a>
    <li><a href="#ref-for-exceptiondef-request-quotaexceedederror-6">5.3. Deleting a database</a>
    <li><a href="#ref-for-exceptiondef-request-quotaexceedederror-7">5.4. Committing a transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-syntaxerror">
   <b><a href="#exceptiondef-request-syntaxerror">#exceptiondef-request-syntaxerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-syntaxerror-1">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-exceptiondef-request-syntaxerror-2">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-readonlyerror">
   <b><a href="#exceptiondef-request-readonlyerror">#exceptiondef-request-readonlyerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-readonlyerror-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-exceptiondef-request-readonlyerror-2">(2)</a> <a href="#ref-for-exceptiondef-request-readonlyerror-3">(3)</a> <a href="#ref-for-exceptiondef-request-readonlyerror-4">(4)</a>
    <li><a href="#ref-for-exceptiondef-request-readonlyerror-5">4.8. The IDBCursor interface</a> <a href="#ref-for-exceptiondef-request-readonlyerror-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-transactioninactiveerror">
   <b><a href="#exceptiondef-request-transactioninactiveerror">#exceptiondef-request-transactioninactiveerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-transactioninactiveerror-1">2.7.1. Transaction Lifetime</a>
    <li><a href="#ref-for-exceptiondef-request-transactioninactiveerror-2">4.4. The IDBDatabase interface</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-3">(2)</a>
    <li><a href="#ref-for-exceptiondef-request-transactioninactiveerror-4">4.5. The IDBObjectStore interface</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-5">(2)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-6">(3)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-7">(4)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-8">(5)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-9">(6)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-10">(7)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-11">(8)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-12">(9)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-13">(10)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-14">(11)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-15">(12)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-16">(13)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-17">(14)</a>
    <li><a href="#ref-for-exceptiondef-request-transactioninactiveerror-18">4.6. The IDBIndex interface</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-19">(2)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-20">(3)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-21">(4)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-22">(5)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-23">(6)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-24">(7)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-25">(8)</a>
    <li><a href="#ref-for-exceptiondef-request-transactioninactiveerror-26">4.8. The IDBCursor interface</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-27">(2)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-28">(3)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-29">(4)</a> <a href="#ref-for-exceptiondef-request-transactioninactiveerror-30">(5)</a>
    <li><a href="#ref-for-exceptiondef-request-transactioninactiveerror-31">5.6. Asynchronously executing a request</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-unknownerror">
   <b><a href="#exceptiondef-request-unknownerror">#exceptiondef-request-unknownerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-unknownerror-1">2.7.1. Transaction Lifetime</a>
    <li><a href="#ref-for-exceptiondef-request-unknownerror-2">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-exceptiondef-request-unknownerror-3">5.1. Opening a database</a>
    <li><a href="#ref-for-exceptiondef-request-unknownerror-4">5.3. Deleting a database</a>
    <li><a href="#ref-for-exceptiondef-request-unknownerror-5">5.4. Committing a transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="exceptiondef-request-versionerror">
   <b><a href="#exceptiondef-request-versionerror">#exceptiondef-request-versionerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-request-versionerror-1">5.1. Opening a database</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbrequest">
   <b><a href="#request-idbrequest">#request-idbrequest</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbrequest-1">4. API</a> <a href="#ref-for-request-idbrequest-2">(2)</a>
    <li><a href="#ref-for-request-idbrequest-3">4.1. The IDBRequest interface</a> <a href="#ref-for-request-idbrequest-4">(2)</a> <a href="#ref-for-request-idbrequest-5">(3)</a> <a href="#ref-for-request-idbrequest-6">(4)</a>
    <li><a href="#ref-for-request-idbrequest-7">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-idbrequest-8">(2)</a> <a href="#ref-for-request-idbrequest-9">(3)</a> <a href="#ref-for-request-idbrequest-10">(4)</a> <a href="#ref-for-request-idbrequest-11">(5)</a> <a href="#ref-for-request-idbrequest-12">(6)</a> <a href="#ref-for-request-idbrequest-13">(7)</a> <a href="#ref-for-request-idbrequest-14">(8)</a> <a href="#ref-for-request-idbrequest-15">(9)</a> <a href="#ref-for-request-idbrequest-16">(10)</a> <a href="#ref-for-request-idbrequest-17">(11)</a> <a href="#ref-for-request-idbrequest-18">(12)</a> <a href="#ref-for-request-idbrequest-19">(13)</a> <a href="#ref-for-request-idbrequest-20">(14)</a> <a href="#ref-for-request-idbrequest-21">(15)</a> <a href="#ref-for-request-idbrequest-22">(16)</a> <a href="#ref-for-request-idbrequest-23">(17)</a> <a href="#ref-for-request-idbrequest-24">(18)</a> <a href="#ref-for-request-idbrequest-25">(19)</a> <a href="#ref-for-request-idbrequest-26">(20)</a> <a href="#ref-for-request-idbrequest-27">(21)</a> <a href="#ref-for-request-idbrequest-28">(22)</a> <a href="#ref-for-request-idbrequest-29">(23)</a> <a href="#ref-for-request-idbrequest-30">(24)</a>
    <li><a href="#ref-for-request-idbrequest-31">4.6. The IDBIndex interface</a> <a href="#ref-for-request-idbrequest-32">(2)</a> <a href="#ref-for-request-idbrequest-33">(3)</a> <a href="#ref-for-request-idbrequest-34">(4)</a> <a href="#ref-for-request-idbrequest-35">(5)</a> <a href="#ref-for-request-idbrequest-36">(6)</a> <a href="#ref-for-request-idbrequest-37">(7)</a> <a href="#ref-for-request-idbrequest-38">(8)</a> <a href="#ref-for-request-idbrequest-39">(9)</a> <a href="#ref-for-request-idbrequest-40">(10)</a> <a href="#ref-for-request-idbrequest-41">(11)</a> <a href="#ref-for-request-idbrequest-42">(12)</a> <a href="#ref-for-request-idbrequest-43">(13)</a> <a href="#ref-for-request-idbrequest-44">(14)</a>
    <li><a href="#ref-for-request-idbrequest-45">4.8. The IDBCursor interface</a> <a href="#ref-for-request-idbrequest-46">(2)</a> <a href="#ref-for-request-idbrequest-47">(3)</a> <a href="#ref-for-request-idbrequest-48">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-request-idbrequestreadystate">
   <b><a href="#enumdef-request-idbrequestreadystate">#enumdef-request-idbrequestreadystate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-request-idbrequestreadystate-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbrequestreadystate-pending">
   <b><a href="#dom-idbrequestreadystate-pending">#dom-idbrequestreadystate-pending</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbrequestreadystate-pending-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbrequestreadystate-done">
   <b><a href="#dom-idbrequestreadystate-done">#dom-idbrequestreadystate-done</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbrequestreadystate-done-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbrequest-result">
   <b><a href="#dom-idbrequest-result">#dom-idbrequest-result</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbrequest-result-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbrequest-error">
   <b><a href="#dom-idbrequest-error">#dom-idbrequest-error</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbrequest-error-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbrequest-source">
   <b><a href="#dom-idbrequest-source">#dom-idbrequest-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbrequest-source-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbrequest-transaction">
   <b><a href="#dom-idbrequest-transaction">#dom-idbrequest-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbrequest-transaction-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbrequest-readystate">
   <b><a href="#dom-idbrequest-readystate">#dom-idbrequest-readystate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbrequest-readystate-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbrequest-onsuccess">
   <b><a href="#dom-idbrequest-onsuccess">#dom-idbrequest-onsuccess</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbrequest-onsuccess-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbrequest-onerror">
   <b><a href="#dom-idbrequest-onerror">#dom-idbrequest-onerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbrequest-onerror-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbopendbrequest">
   <b><a href="#request-idbopendbrequest">#request-idbopendbrequest</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbopendbrequest-1">4.3. The IDBFactory interface</a> <a href="#ref-for-request-idbopendbrequest-2">(2)</a> <a href="#ref-for-request-idbopendbrequest-3">(3)</a> <a href="#ref-for-request-idbopendbrequest-4">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbopendbrequest-onblocked">
   <b><a href="#dom-idbopendbrequest-onblocked">#dom-idbopendbrequest-onblocked</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbopendbrequest-onblocked-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbopendbrequest-onupgradeneeded">
   <b><a href="#dom-idbopendbrequest-onupgradeneeded">#dom-idbopendbrequest-onupgradeneeded</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbopendbrequest-onupgradeneeded-1">4.1. The IDBRequest interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbversionchangeevent">
   <b><a href="#request-idbversionchangeevent">#request-idbversionchangeevent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbversionchangeevent-1">4.2. Event interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-request-idbversionchangeeventinit">
   <b><a href="#dictdef-request-idbversionchangeeventinit">#dictdef-request-idbversionchangeeventinit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-request-idbversionchangeeventinit-1">4.2. Event interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbversionchangeevent-oldversion">
   <b><a href="#dom-idbversionchangeevent-oldversion">#dom-idbversionchangeevent-oldversion</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbversionchangeevent-oldversion-1">4.2. Event interfaces</a> <a href="#ref-for-dom-idbversionchangeevent-oldversion-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbversionchangeevent-newversion">
   <b><a href="#dom-idbversionchangeevent-newversion">#dom-idbversionchangeevent-newversion</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbversionchangeevent-newversion-1">4.2. Event interfaces</a> <a href="#ref-for-dom-idbversionchangeevent-newversion-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-fire-a-version-change-event">
   <b><a href="#request-fire-a-version-change-event">#request-fire-a-version-change-event</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-fire-a-version-change-event-1">4.3. The IDBFactory interface</a>
    <li><a href="#ref-for-request-fire-a-version-change-event-2">5.1. Opening a database</a> <a href="#ref-for-request-fire-a-version-change-event-3">(2)</a>
    <li><a href="#ref-for-request-fire-a-version-change-event-4">5.3. Deleting a database</a> <a href="#ref-for-request-fire-a-version-change-event-5">(2)</a>
    <li><a href="#ref-for-request-fire-a-version-change-event-6">5.7. Running an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-windoworworkerglobalscope-indexeddb">
   <b><a href="#dom-windoworworkerglobalscope-indexeddb">#dom-windoworworkerglobalscope-indexeddb</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-windoworworkerglobalscope-indexeddb-1">4.3. The IDBFactory interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbfactory">
   <b><a href="#request-idbfactory">#request-idbfactory</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbfactory-1">4.3. The IDBFactory interface</a> <a href="#ref-for-request-idbfactory-2">(2)</a> <a href="#ref-for-request-idbfactory-3">(3)</a> <a href="#ref-for-request-idbfactory-4">(4)</a> <a href="#ref-for-request-idbfactory-5">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbfactory-open">
   <b><a href="#dom-idbfactory-open">#dom-idbfactory-open</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbfactory-open-1">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-dom-idbfactory-open-2">4.3. The IDBFactory interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbfactory-deletedatabase">
   <b><a href="#dom-idbfactory-deletedatabase">#dom-idbfactory-deletedatabase</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbfactory-deletedatabase-1">4.3. The IDBFactory interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbfactory-cmp">
   <b><a href="#dom-idbfactory-cmp">#dom-idbfactory-cmp</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbfactory-cmp-1">4.3. The IDBFactory interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbdatabase">
   <b><a href="#request-idbdatabase">#request-idbdatabase</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbdatabase-1">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-request-idbdatabase-2">4.4. The IDBDatabase interface</a> <a href="#ref-for-request-idbdatabase-3">(2)</a> <a href="#ref-for-request-idbdatabase-4">(3)</a> <a href="#ref-for-request-idbdatabase-5">(4)</a> <a href="#ref-for-request-idbdatabase-6">(5)</a> <a href="#ref-for-request-idbdatabase-7">(6)</a> <a href="#ref-for-request-idbdatabase-8">(7)</a> <a href="#ref-for-request-idbdatabase-9">(8)</a> <a href="#ref-for-request-idbdatabase-10">(9)</a>
    <li><a href="#ref-for-request-idbdatabase-11">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-request-idbdatabase-12">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-request-idbdatabase-13">(2)</a> <a href="#ref-for-request-idbdatabase-14">(3)</a>
    <li><a href="#ref-for-request-idbdatabase-15">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-request-idbobjectstoreparameters">
   <b><a href="#dictdef-request-idbobjectstoreparameters">#dictdef-request-idbobjectstoreparameters</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-request-idbobjectstoreparameters-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstoreparameters-keypath">
   <b><a href="#dom-idbobjectstoreparameters-keypath">#dom-idbobjectstoreparameters-keypath</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstoreparameters-keypath-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstoreparameters-autoincrement">
   <b><a href="#dom-idbobjectstoreparameters-autoincrement">#dom-idbobjectstoreparameters-autoincrement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstoreparameters-autoincrement-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-name">
   <b><a href="#dom-idbdatabase-name">#dom-idbdatabase-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-name-1">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-dom-idbdatabase-name-2">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-version">
   <b><a href="#dom-idbdatabase-version">#dom-idbdatabase-version</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-version-1">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-dom-idbdatabase-version-2">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-objectstorenames">
   <b><a href="#dom-idbdatabase-objectstorenames">#dom-idbdatabase-objectstorenames</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-objectstorenames-1">4.4. The IDBDatabase interface</a> <a href="#ref-for-dom-idbdatabase-objectstorenames-2">(2)</a> <a href="#ref-for-dom-idbdatabase-objectstorenames-3">(3)</a>
    <li><a href="#ref-for-dom-idbdatabase-objectstorenames-4">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-createobjectstore">
   <b><a href="#dom-idbdatabase-createobjectstore">#dom-idbdatabase-createobjectstore</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-createobjectstore-1">4.4. The IDBDatabase interface</a> <a href="#ref-for-dom-idbdatabase-createobjectstore-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-deleteobjectstore">
   <b><a href="#dom-idbdatabase-deleteobjectstore">#dom-idbdatabase-deleteobjectstore</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-deleteobjectstore-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-transaction">
   <b><a href="#dom-idbdatabase-transaction">#dom-idbdatabase-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-transaction-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-close">
   <b><a href="#dom-idbdatabase-close">#dom-idbdatabase-close</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-close-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-onabort">
   <b><a href="#dom-idbdatabase-onabort">#dom-idbdatabase-onabort</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-onabort-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-onclose">
   <b><a href="#dom-idbdatabase-onclose">#dom-idbdatabase-onclose</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-onclose-1">4.4. The IDBDatabase interface</a> <a href="#ref-for-dom-idbdatabase-onclose-2">(2)</a>
    <li><a href="#ref-for-dom-idbdatabase-onclose-3">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-onerror">
   <b><a href="#dom-idbdatabase-onerror">#dom-idbdatabase-onerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-onerror-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbdatabase-onversionchange">
   <b><a href="#dom-idbdatabase-onversionchange">#dom-idbdatabase-onversionchange</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbdatabase-onversionchange-1">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbobjectstore">
   <b><a href="#request-idbobjectstore">#request-idbobjectstore</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbobjectstore-1">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-request-idbobjectstore-2">4.4. The IDBDatabase interface</a> <a href="#ref-for-request-idbobjectstore-3">(2)</a>
    <li><a href="#ref-for-request-idbobjectstore-4">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-idbobjectstore-5">(2)</a> <a href="#ref-for-request-idbobjectstore-6">(3)</a> <a href="#ref-for-request-idbobjectstore-7">(4)</a> <a href="#ref-for-request-idbobjectstore-8">(5)</a> <a href="#ref-for-request-idbobjectstore-9">(6)</a> <a href="#ref-for-request-idbobjectstore-10">(7)</a> <a href="#ref-for-request-idbobjectstore-11">(8)</a>
    <li><a href="#ref-for-request-idbobjectstore-12">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-request-idbobjectstore-13">4.8. The IDBCursor interface</a>
    <li><a href="#ref-for-request-idbobjectstore-14">4.9. The IDBTransaction interface</a> <a href="#ref-for-request-idbobjectstore-15">(2)</a> <a href="#ref-for-request-idbobjectstore-16">(3)</a> <a href="#ref-for-request-idbobjectstore-17">(4)</a>
    <li><a href="#ref-for-request-idbobjectstore-18">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-request-idbobjectstore-19">(2)</a> <a href="#ref-for-request-idbobjectstore-20">(3)</a>
    <li><a href="#ref-for-request-idbobjectstore-21">10. Revision History</a> <a href="#ref-for-request-idbobjectstore-22">(2)</a> <a href="#ref-for-request-idbobjectstore-23">(3)</a> <a href="#ref-for-request-idbobjectstore-24">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-request-idbindexparameters">
   <b><a href="#dictdef-request-idbindexparameters">#dictdef-request-idbindexparameters</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-request-idbindexparameters-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindexparameters-unique">
   <b><a href="#dom-idbindexparameters-unique">#dom-idbindexparameters-unique</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindexparameters-unique-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindexparameters-multientry">
   <b><a href="#dom-idbindexparameters-multientry">#dom-idbindexparameters-multientry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindexparameters-multientry-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-name">
   <b><a href="#dom-idbobjectstore-name">#dom-idbobjectstore-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-name-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-dom-idbobjectstore-name-2">(2)</a> <a href="#ref-for-dom-idbobjectstore-name-3">(3)</a>
    <li><a href="#ref-for-dom-idbobjectstore-name-4">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-dom-idbobjectstore-name-5">(2)</a>
    <li><a href="#ref-for-dom-idbobjectstore-name-6">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-keypath">
   <b><a href="#dom-idbobjectstore-keypath">#dom-idbobjectstore-keypath</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-keypath-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-indexnames">
   <b><a href="#dom-idbobjectstore-indexnames">#dom-idbobjectstore-indexnames</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-indexnames-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-dom-idbobjectstore-indexnames-2">(2)</a> <a href="#ref-for-dom-idbobjectstore-indexnames-3">(3)</a>
    <li><a href="#ref-for-dom-idbobjectstore-indexnames-4">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-dom-idbobjectstore-indexnames-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-transaction">
   <b><a href="#dom-idbobjectstore-transaction">#dom-idbobjectstore-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-transaction-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-autoincrement">
   <b><a href="#dom-idbobjectstore-autoincrement">#dom-idbobjectstore-autoincrement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-autoincrement-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-put">
   <b><a href="#dom-idbobjectstore-put">#dom-idbobjectstore-put</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-put-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-add">
   <b><a href="#dom-idbobjectstore-add">#dom-idbobjectstore-add</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-add-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-delete">
   <b><a href="#dom-idbobjectstore-delete">#dom-idbobjectstore-delete</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-delete-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-clear">
   <b><a href="#dom-idbobjectstore-clear">#dom-idbobjectstore-clear</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-clear-1">2.11. Key Generators</a> <a href="#ref-for-dom-idbobjectstore-clear-2">(2)</a>
    <li><a href="#ref-for-dom-idbobjectstore-clear-3">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-get">
   <b><a href="#dom-idbobjectstore-get">#dom-idbobjectstore-get</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-get-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-getkey">
   <b><a href="#dom-idbobjectstore-getkey">#dom-idbobjectstore-getkey</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-getkey-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-dom-idbobjectstore-getkey-2">(2)</a>
    <li><a href="#ref-for-dom-idbobjectstore-getkey-3">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-getall">
   <b><a href="#dom-idbobjectstore-getall">#dom-idbobjectstore-getall</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-getall-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-dom-idbobjectstore-getall-2">(2)</a>
    <li><a href="#ref-for-dom-idbobjectstore-getall-3">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-getallkeys">
   <b><a href="#dom-idbobjectstore-getallkeys">#dom-idbobjectstore-getallkeys</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-getallkeys-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-dom-idbobjectstore-getallkeys-2">(2)</a>
    <li><a href="#ref-for-dom-idbobjectstore-getallkeys-3">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-count">
   <b><a href="#dom-idbobjectstore-count">#dom-idbobjectstore-count</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-count-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-opencursor">
   <b><a href="#dom-idbobjectstore-opencursor">#dom-idbobjectstore-opencursor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-opencursor-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-dom-idbobjectstore-opencursor-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-openkeycursor">
   <b><a href="#dom-idbobjectstore-openkeycursor">#dom-idbobjectstore-openkeycursor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-openkeycursor-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-dom-idbobjectstore-openkeycursor-2">(2)</a>
    <li><a href="#ref-for-dom-idbobjectstore-openkeycursor-3">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-createindex">
   <b><a href="#dom-idbobjectstore-createindex">#dom-idbobjectstore-createindex</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-createindex-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-dom-idbobjectstore-createindex-2">(2)</a> <a href="#ref-for-dom-idbobjectstore-createindex-3">(3)</a> <a href="#ref-for-dom-idbobjectstore-createindex-4">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-index">
   <b><a href="#dom-idbobjectstore-index">#dom-idbobjectstore-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-index-1">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-dom-idbobjectstore-index-2">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbobjectstore-deleteindex">
   <b><a href="#dom-idbobjectstore-deleteindex">#dom-idbobjectstore-deleteindex</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbobjectstore-deleteindex-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbindex">
   <b><a href="#request-idbindex">#request-idbindex</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbindex-1">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-request-idbindex-2">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-idbindex-3">(2)</a> <a href="#ref-for-request-idbindex-4">(3)</a> <a href="#ref-for-request-idbindex-5">(4)</a> <a href="#ref-for-request-idbindex-6">(5)</a> <a href="#ref-for-request-idbindex-7">(6)</a> <a href="#ref-for-request-idbindex-8">(7)</a>
    <li><a href="#ref-for-request-idbindex-9">4.6. The IDBIndex interface</a> <a href="#ref-for-request-idbindex-10">(2)</a>
    <li><a href="#ref-for-request-idbindex-11">4.8. The IDBCursor interface</a>
    <li><a href="#ref-for-request-idbindex-12">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-request-idbindex-13">(2)</a>
    <li><a href="#ref-for-request-idbindex-14">10. Revision History</a> <a href="#ref-for-request-idbindex-15">(2)</a> <a href="#ref-for-request-idbindex-16">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-name">
   <b><a href="#dom-idbindex-name">#dom-idbindex-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-name-1">4.6. The IDBIndex interface</a> <a href="#ref-for-dom-idbindex-name-2">(2)</a> <a href="#ref-for-dom-idbindex-name-3">(3)</a>
    <li><a href="#ref-for-dom-idbindex-name-4">5.8. Aborting an upgrade transaction</a> <a href="#ref-for-dom-idbindex-name-5">(2)</a>
    <li><a href="#ref-for-dom-idbindex-name-6">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-objectstore">
   <b><a href="#dom-idbindex-objectstore">#dom-idbindex-objectstore</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-objectstore-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-keypath">
   <b><a href="#dom-idbindex-keypath">#dom-idbindex-keypath</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-keypath-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-multientry">
   <b><a href="#dom-idbindex-multientry">#dom-idbindex-multientry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-multientry-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-unique">
   <b><a href="#dom-idbindex-unique">#dom-idbindex-unique</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-unique-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-get">
   <b><a href="#dom-idbindex-get">#dom-idbindex-get</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-get-1">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-dom-idbindex-get-2">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-getkey">
   <b><a href="#dom-idbindex-getkey">#dom-idbindex-getkey</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-getkey-1">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-dom-idbindex-getkey-2">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-getall">
   <b><a href="#dom-idbindex-getall">#dom-idbindex-getall</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-getall-1">4.6. The IDBIndex interface</a> <a href="#ref-for-dom-idbindex-getall-2">(2)</a>
    <li><a href="#ref-for-dom-idbindex-getall-3">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-getallkeys">
   <b><a href="#dom-idbindex-getallkeys">#dom-idbindex-getallkeys</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-getallkeys-1">4.6. The IDBIndex interface</a> <a href="#ref-for-dom-idbindex-getallkeys-2">(2)</a>
    <li><a href="#ref-for-dom-idbindex-getallkeys-3">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-count">
   <b><a href="#dom-idbindex-count">#dom-idbindex-count</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-count-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-opencursor">
   <b><a href="#dom-idbindex-opencursor">#dom-idbindex-opencursor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-opencursor-1">4.6. The IDBIndex interface</a> <a href="#ref-for-dom-idbindex-opencursor-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbindex-openkeycursor">
   <b><a href="#dom-idbindex-openkeycursor">#dom-idbindex-openkeycursor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbindex-openkeycursor-1">4.6. The IDBIndex interface</a>
    <li><a href="#ref-for-dom-idbindex-openkeycursor-2">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbkeyrange">
   <b><a href="#request-idbkeyrange">#request-idbkeyrange</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbkeyrange-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-idbkeyrange-2">(2)</a> <a href="#ref-for-request-idbkeyrange-3">(3)</a> <a href="#ref-for-request-idbkeyrange-4">(4)</a> <a href="#ref-for-request-idbkeyrange-5">(5)</a> <a href="#ref-for-request-idbkeyrange-6">(6)</a> <a href="#ref-for-request-idbkeyrange-7">(7)</a> <a href="#ref-for-request-idbkeyrange-8">(8)</a>
    <li><a href="#ref-for-request-idbkeyrange-9">4.6. The IDBIndex interface</a> <a href="#ref-for-request-idbkeyrange-10">(2)</a> <a href="#ref-for-request-idbkeyrange-11">(3)</a> <a href="#ref-for-request-idbkeyrange-12">(4)</a> <a href="#ref-for-request-idbkeyrange-13">(5)</a> <a href="#ref-for-request-idbkeyrange-14">(6)</a> <a href="#ref-for-request-idbkeyrange-15">(7)</a>
    <li><a href="#ref-for-request-idbkeyrange-16">4.7. The IDBKeyRange interface</a> <a href="#ref-for-request-idbkeyrange-17">(2)</a> <a href="#ref-for-request-idbkeyrange-18">(3)</a> <a href="#ref-for-request-idbkeyrange-19">(4)</a> <a href="#ref-for-request-idbkeyrange-20">(5)</a> <a href="#ref-for-request-idbkeyrange-21">(6)</a>
    <li><a href="#ref-for-request-idbkeyrange-22">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbkeyrange-lower">
   <b><a href="#dom-idbkeyrange-lower">#dom-idbkeyrange-lower</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbkeyrange-lower-1">4.7. The IDBKeyRange interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbkeyrange-upper">
   <b><a href="#dom-idbkeyrange-upper">#dom-idbkeyrange-upper</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbkeyrange-upper-1">4.7. The IDBKeyRange interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbkeyrange-loweropen">
   <b><a href="#dom-idbkeyrange-loweropen">#dom-idbkeyrange-loweropen</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbkeyrange-loweropen-1">4.7. The IDBKeyRange interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbkeyrange-upperopen">
   <b><a href="#dom-idbkeyrange-upperopen">#dom-idbkeyrange-upperopen</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbkeyrange-upperopen-1">4.7. The IDBKeyRange interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbkeyrange-only">
   <b><a href="#dom-idbkeyrange-only">#dom-idbkeyrange-only</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbkeyrange-only-1">4.7. The IDBKeyRange interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbkeyrange-lowerbound">
   <b><a href="#dom-idbkeyrange-lowerbound">#dom-idbkeyrange-lowerbound</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbkeyrange-lowerbound-1">4.7. The IDBKeyRange interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbkeyrange-upperbound">
   <b><a href="#dom-idbkeyrange-upperbound">#dom-idbkeyrange-upperbound</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbkeyrange-upperbound-1">4.7. The IDBKeyRange interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbkeyrange-bound">
   <b><a href="#dom-idbkeyrange-bound">#dom-idbkeyrange-bound</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbkeyrange-bound-1">4.7. The IDBKeyRange interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbkeyrange-includes">
   <b><a href="#dom-idbkeyrange-includes">#dom-idbkeyrange-includes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbkeyrange-includes-1">4.7. The IDBKeyRange interface</a> <a href="#ref-for-dom-idbkeyrange-includes-2">(2)</a>
    <li><a href="#ref-for-dom-idbkeyrange-includes-3">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbcursor">
   <b><a href="#request-idbcursor">#request-idbcursor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbcursor-1">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-request-idbcursor-2">4.8. The IDBCursor interface</a> <a href="#ref-for-request-idbcursor-3">(2)</a> <a href="#ref-for-request-idbcursor-4">(3)</a> <a href="#ref-for-request-idbcursor-5">(4)</a>
    <li><a href="#ref-for-request-idbcursor-6">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-request-idbcursordirection">
   <b><a href="#enumdef-request-idbcursordirection">#enumdef-request-idbcursordirection</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-request-idbcursordirection-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-enumdef-request-idbcursordirection-2">(2)</a>
    <li><a href="#ref-for-enumdef-request-idbcursordirection-3">4.6. The IDBIndex interface</a> <a href="#ref-for-enumdef-request-idbcursordirection-4">(2)</a>
    <li><a href="#ref-for-enumdef-request-idbcursordirection-5">4.8. The IDBCursor interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursordirection-next">
   <b><a href="#dom-idbcursordirection-next">#dom-idbcursordirection-next</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursordirection-next-1">2.10. Cursor</a> <a href="#ref-for-dom-idbcursordirection-next-2">(2)</a>
    <li><a href="#ref-for-dom-idbcursordirection-next-3">4.8. The IDBCursor interface</a> <a href="#ref-for-dom-idbcursordirection-next-4">(2)</a> <a href="#ref-for-dom-idbcursordirection-next-5">(3)</a> <a href="#ref-for-dom-idbcursordirection-next-6">(4)</a>
    <li><a href="#ref-for-dom-idbcursordirection-next-7">6.7. Cursor Iteration Operation</a> <a href="#ref-for-dom-idbcursordirection-next-8">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursordirection-nextunique">
   <b><a href="#dom-idbcursordirection-nextunique">#dom-idbcursordirection-nextunique</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursordirection-nextunique-1">2.10. Cursor</a>
    <li><a href="#ref-for-dom-idbcursordirection-nextunique-2">4.8. The IDBCursor interface</a> <a href="#ref-for-dom-idbcursordirection-nextunique-3">(2)</a> <a href="#ref-for-dom-idbcursordirection-nextunique-4">(3)</a>
    <li><a href="#ref-for-dom-idbcursordirection-nextunique-5">6.7. Cursor Iteration Operation</a> <a href="#ref-for-dom-idbcursordirection-nextunique-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursordirection-prev">
   <b><a href="#dom-idbcursordirection-prev">#dom-idbcursordirection-prev</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursordirection-prev-1">2.10. Cursor</a> <a href="#ref-for-dom-idbcursordirection-prev-2">(2)</a>
    <li><a href="#ref-for-dom-idbcursordirection-prev-3">4.8. The IDBCursor interface</a> <a href="#ref-for-dom-idbcursordirection-prev-4">(2)</a> <a href="#ref-for-dom-idbcursordirection-prev-5">(3)</a> <a href="#ref-for-dom-idbcursordirection-prev-6">(4)</a>
    <li><a href="#ref-for-dom-idbcursordirection-prev-7">6.7. Cursor Iteration Operation</a> <a href="#ref-for-dom-idbcursordirection-prev-8">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursordirection-prevunique">
   <b><a href="#dom-idbcursordirection-prevunique">#dom-idbcursordirection-prevunique</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursordirection-prevunique-1">2.10. Cursor</a>
    <li><a href="#ref-for-dom-idbcursordirection-prevunique-2">4.8. The IDBCursor interface</a> <a href="#ref-for-dom-idbcursordirection-prevunique-3">(2)</a> <a href="#ref-for-dom-idbcursordirection-prevunique-4">(3)</a>
    <li><a href="#ref-for-dom-idbcursordirection-prevunique-5">6.7. Cursor Iteration Operation</a> <a href="#ref-for-dom-idbcursordirection-prevunique-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursor-source">
   <b><a href="#dom-idbcursor-source">#dom-idbcursor-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursor-source-1">4.8. The IDBCursor interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursor-direction">
   <b><a href="#dom-idbcursor-direction">#dom-idbcursor-direction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursor-direction-1">4.8. The IDBCursor interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursor-key">
   <b><a href="#dom-idbcursor-key">#dom-idbcursor-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursor-key-1">4.8. The IDBCursor interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursor-primarykey">
   <b><a href="#dom-idbcursor-primarykey">#dom-idbcursor-primarykey</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursor-primarykey-1">4.8. The IDBCursor interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursor-update">
   <b><a href="#dom-idbcursor-update">#dom-idbcursor-update</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursor-update-1">4.8. The IDBCursor interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursor-advance">
   <b><a href="#dom-idbcursor-advance">#dom-idbcursor-advance</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursor-advance-1">4.8. The IDBCursor interface</a> <a href="#ref-for-dom-idbcursor-advance-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursor-continue">
   <b><a href="#dom-idbcursor-continue">#dom-idbcursor-continue</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursor-continue-1">4.8. The IDBCursor interface</a> <a href="#ref-for-dom-idbcursor-continue-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursor-continueprimarykey">
   <b><a href="#dom-idbcursor-continueprimarykey">#dom-idbcursor-continueprimarykey</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursor-continueprimarykey-1">4.8. The IDBCursor interface</a> <a href="#ref-for-dom-idbcursor-continueprimarykey-2">(2)</a> <a href="#ref-for-dom-idbcursor-continueprimarykey-3">(3)</a>
    <li><a href="#ref-for-dom-idbcursor-continueprimarykey-4">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursor-delete">
   <b><a href="#dom-idbcursor-delete">#dom-idbcursor-delete</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursor-delete-1">4.8. The IDBCursor interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbcursorwithvalue">
   <b><a href="#request-idbcursorwithvalue">#request-idbcursorwithvalue</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbcursorwithvalue-1">4.8. The IDBCursor interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbcursorwithvalue-value">
   <b><a href="#dom-idbcursorwithvalue-value">#dom-idbcursorwithvalue-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbcursorwithvalue-value-1">4.8. The IDBCursor interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-idbtransaction">
   <b><a href="#request-idbtransaction">#request-idbtransaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-idbtransaction-1">4.1. The IDBRequest interface</a>
    <li><a href="#ref-for-request-idbtransaction-2">4.4. The IDBDatabase interface</a> <a href="#ref-for-request-idbtransaction-3">(2)</a>
    <li><a href="#ref-for-request-idbtransaction-4">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-request-idbtransaction-5">4.9. The IDBTransaction interface</a> <a href="#ref-for-request-idbtransaction-6">(2)</a> <a href="#ref-for-request-idbtransaction-7">(3)</a> <a href="#ref-for-request-idbtransaction-8">(4)</a>
    <li><a href="#ref-for-request-idbtransaction-9">5.8. Aborting an upgrade transaction</a>
    <li><a href="#ref-for-request-idbtransaction-10">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-request-idbtransactionmode">
   <b><a href="#enumdef-request-idbtransactionmode">#enumdef-request-idbtransactionmode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-request-idbtransactionmode-1">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-enumdef-request-idbtransactionmode-2">4.9. The IDBTransaction interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransactionmode-readonly">
   <b><a href="#dom-idbtransactionmode-readonly">#dom-idbtransactionmode-readonly</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransactionmode-readonly-1">2.7. Transactions</a> <a href="#ref-for-dom-idbtransactionmode-readonly-2">(2)</a>
    <li><a href="#ref-for-dom-idbtransactionmode-readonly-3">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransactionmode-readwrite">
   <b><a href="#dom-idbtransactionmode-readwrite">#dom-idbtransactionmode-readwrite</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransactionmode-readwrite-1">2.7. Transactions</a> <a href="#ref-for-dom-idbtransactionmode-readwrite-2">(2)</a> <a href="#ref-for-dom-idbtransactionmode-readwrite-3">(3)</a>
    <li><a href="#ref-for-dom-idbtransactionmode-readwrite-4">4.4. The IDBDatabase interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransactionmode-versionchange">
   <b><a href="#dom-idbtransactionmode-versionchange">#dom-idbtransactionmode-versionchange</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransactionmode-versionchange-1">2.7. Transactions</a>
    <li><a href="#ref-for-dom-idbtransactionmode-versionchange-2">2.7.2. Upgrade Transactions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransaction-objectstorenames">
   <b><a href="#dom-idbtransaction-objectstorenames">#dom-idbtransaction-objectstorenames</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransaction-objectstorenames-1">4.9. The IDBTransaction interface</a> <a href="#ref-for-dom-idbtransaction-objectstorenames-2">(2)</a>
    <li><a href="#ref-for-dom-idbtransaction-objectstorenames-3">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransaction-mode">
   <b><a href="#dom-idbtransaction-mode">#dom-idbtransaction-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransaction-mode-1">4.9. The IDBTransaction interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransaction-db">
   <b><a href="#dom-idbtransaction-db">#dom-idbtransaction-db</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransaction-db-1">4.9. The IDBTransaction interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransaction-error">
   <b><a href="#dom-idbtransaction-error">#dom-idbtransaction-error</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransaction-error-1">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-dom-idbtransaction-error-2">5.10. Firing an error event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransaction-objectstore">
   <b><a href="#dom-idbtransaction-objectstore">#dom-idbtransaction-objectstore</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransaction-objectstore-1">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-dom-idbtransaction-objectstore-2">5.8. Aborting an upgrade transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransaction-abort">
   <b><a href="#dom-idbtransaction-abort">#dom-idbtransaction-abort</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransaction-abort-1">4.9. The IDBTransaction interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransaction-onabort">
   <b><a href="#dom-idbtransaction-onabort">#dom-idbtransaction-onabort</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransaction-onabort-1">4.9. The IDBTransaction interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransaction-oncomplete">
   <b><a href="#dom-idbtransaction-oncomplete">#dom-idbtransaction-oncomplete</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransaction-oncomplete-1">4.9. The IDBTransaction interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-idbtransaction-onerror">
   <b><a href="#dom-idbtransaction-onerror">#dom-idbtransaction-onerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransaction-onerror-1">4.9. The IDBTransaction interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-domstringlist">
   <b><a href="#request-domstringlist">#request-domstringlist</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-domstringlist-1">2. Constructs</a>
    <li><a href="#ref-for-request-domstringlist-2">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-request-domstringlist-3">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-request-domstringlist-4">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-request-domstringlist-5">4.10. The DOMStringList interface</a> <a href="#ref-for-request-domstringlist-6">(2)</a> <a href="#ref-for-request-domstringlist-7">(3)</a> <a href="#ref-for-request-domstringlist-8">(4)</a> <a href="#ref-for-request-domstringlist-9">(5)</a> <a href="#ref-for-request-domstringlist-10">(6)</a>
    <li><a href="#ref-for-request-domstringlist-11">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-domstringlist-length">
   <b><a href="#dom-domstringlist-length">#dom-domstringlist-length</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domstringlist-length-1">4.10. The DOMStringList interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-domstringlist-item">
   <b><a href="#dom-domstringlist-item">#dom-domstringlist-item</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domstringlist-item-1">4.10. The DOMStringList interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-domstringlist-contains">
   <b><a href="#dom-domstringlist-contains">#dom-domstringlist-contains</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domstringlist-contains-1">4.10. The DOMStringList interface</a> <a href="#ref-for-dom-domstringlist-contains-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-opening-a-database">
   <b><a href="#request-steps-for-opening-a-database">#request-steps-for-opening-a-database</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-opening-a-database-1">4.3. The IDBFactory interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-closing-a-database-connection">
   <b><a href="#request-steps-for-closing-a-database-connection">#request-steps-for-closing-a-database-connection</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-closing-a-database-connection-1">2.1.1. Database Connection</a> <a href="#ref-for-request-steps-for-closing-a-database-connection-2">(2)</a>
    <li><a href="#ref-for-request-steps-for-closing-a-database-connection-3">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-request-steps-for-closing-a-database-connection-4">5.1. Opening a database</a>
    <li><a href="#ref-for-request-steps-for-closing-a-database-connection-5">10. Revision History</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-deleting-a-database">
   <b><a href="#request-steps-for-deleting-a-database">#request-steps-for-deleting-a-database</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-deleting-a-database-1">4.3. The IDBFactory interface</a>
    <li><a href="#ref-for-request-steps-for-deleting-a-database-2">5.2. Closing a database</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-committing-a-transaction">
   <b><a href="#request-steps-for-committing-a-transaction">#request-steps-for-committing-a-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-committing-a-transaction-1">2.7.1. Transaction Lifetime</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-aborting-a-transaction">
   <b><a href="#request-steps-for-aborting-a-transaction">#request-steps-for-aborting-a-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-1">2.7.1. Transaction Lifetime</a> <a href="#ref-for-request-steps-for-aborting-a-transaction-2">(2)</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-3">4.4. The IDBDatabase interface</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-4">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-5">4.9. The IDBTransaction interface</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-6">5.2. Closing a database</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-7">5.4. Committing a transaction</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-8">5.6. Asynchronously executing a request</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-9">5.7. Running an upgrade transaction</a> <a href="#ref-for-request-steps-for-aborting-a-transaction-10">(2)</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-11">5.8. Aborting an upgrade transaction</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-12">5.9. Firing a success event</a>
    <li><a href="#ref-for-request-steps-for-aborting-a-transaction-13">5.10. Firing an error event</a> <a href="#ref-for-request-steps-for-aborting-a-transaction-14">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-asynchronously-executing-a-request">
   <b><a href="#request-steps-for-asynchronously-executing-a-request">#request-steps-for-asynchronously-executing-a-request</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-asynchronously-executing-a-request-1">2.8. Requests</a>
    <li><a href="#ref-for-request-steps-for-asynchronously-executing-a-request-2">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-3">(2)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-4">(3)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-5">(4)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-6">(5)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-7">(6)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-8">(7)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-9">(8)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-10">(9)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-11">(10)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-12">(11)</a>
    <li><a href="#ref-for-request-steps-for-asynchronously-executing-a-request-13">4.6. The IDBIndex interface</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-14">(2)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-15">(3)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-16">(4)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-17">(5)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-18">(6)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-19">(7)</a>
    <li><a href="#ref-for-request-steps-for-asynchronously-executing-a-request-20">4.8. The IDBCursor interface</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-21">(2)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-22">(3)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-23">(4)</a> <a href="#ref-for-request-steps-for-asynchronously-executing-a-request-24">(5)</a>
    <li><a href="#ref-for-request-steps-for-asynchronously-executing-a-request-25">5.5. Aborting a transaction</a>
    <li><a href="#ref-for-request-steps-for-asynchronously-executing-a-request-26">6. Database operations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-running-an-upgrade-transaction">
   <b><a href="#request-steps-for-running-an-upgrade-transaction">#request-steps-for-running-an-upgrade-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-running-an-upgrade-transaction-1">2.7.2. Upgrade Transactions</a>
    <li><a href="#ref-for-request-steps-for-running-an-upgrade-transaction-2">4.2. Event interfaces</a>
    <li><a href="#ref-for-request-steps-for-running-an-upgrade-transaction-3">5.1. Opening a database</a>
    <li><a href="#ref-for-request-steps-for-running-an-upgrade-transaction-4">5.2. Closing a database</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-aborting-an-upgrade-transaction">
   <b><a href="#request-steps-for-aborting-an-upgrade-transaction">#request-steps-for-aborting-an-upgrade-transaction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-aborting-an-upgrade-transaction-1">2.1.1. Database Connection</a>
    <li><a href="#ref-for-request-steps-for-aborting-an-upgrade-transaction-2">5.5. Aborting a transaction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-fire-a-success-event">
   <b><a href="#request-fire-a-success-event">#request-fire-a-success-event</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-fire-a-success-event-1">4.3. The IDBFactory interface</a> <a href="#ref-for-request-fire-a-success-event-2">(2)</a>
    <li><a href="#ref-for-request-fire-a-success-event-3">5.6. Asynchronously executing a request</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-fire-an-error-event">
   <b><a href="#request-fire-an-error-event">#request-fire-an-error-event</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-fire-an-error-event-1">4.3. The IDBFactory interface</a> <a href="#ref-for-request-fire-an-error-event-2">(2)</a>
    <li><a href="#ref-for-request-fire-an-error-event-3">5.6. Asynchronously executing a request</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-storing-a-record-into-an-object-store">
   <b><a href="#request-steps-for-storing-a-record-into-an-object-store">#request-steps-for-storing-a-record-into-an-object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-storing-a-record-into-an-object-store-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-steps-for-storing-a-record-into-an-object-store-2">(2)</a>
    <li><a href="#ref-for-request-steps-for-storing-a-record-into-an-object-store-3">4.8. The IDBCursor interface</a> <a href="#ref-for-request-steps-for-storing-a-record-into-an-object-store-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-retrieving-a-value-from-an-object-store">
   <b><a href="#request-steps-for-retrieving-a-value-from-an-object-store">#request-steps-for-retrieving-a-value-from-an-object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-retrieving-a-value-from-an-object-store-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-retrieving-multiple-values-from-an-object-store">
   <b><a href="#request-steps-for-retrieving-multiple-values-from-an-object-store">#request-steps-for-retrieving-multiple-values-from-an-object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-retrieving-multiple-values-from-an-object-store-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-retrieving-a-key-from-an-object-store">
   <b><a href="#request-steps-for-retrieving-a-key-from-an-object-store">#request-steps-for-retrieving-a-key-from-an-object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-retrieving-a-key-from-an-object-store-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-retrieving-multiple-keys-from-an-object-store">
   <b><a href="#request-steps-for-retrieving-multiple-keys-from-an-object-store">#request-steps-for-retrieving-multiple-keys-from-an-object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-retrieving-multiple-keys-from-an-object-store-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-retrieving-a-referenced-value-from-an-index">
   <b><a href="#request-steps-for-retrieving-a-referenced-value-from-an-index">#request-steps-for-retrieving-a-referenced-value-from-an-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-retrieving-a-referenced-value-from-an-index-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-retrieving-multiple-referenced-values-from-an-index">
   <b><a href="#request-steps-for-retrieving-multiple-referenced-values-from-an-index">#request-steps-for-retrieving-multiple-referenced-values-from-an-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-retrieving-multiple-referenced-values-from-an-index-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-retrieving-a-value-from-an-index">
   <b><a href="#request-steps-for-retrieving-a-value-from-an-index">#request-steps-for-retrieving-a-value-from-an-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-retrieving-a-value-from-an-index-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-retrieving-multiple-values-from-an-index">
   <b><a href="#request-steps-for-retrieving-multiple-values-from-an-index">#request-steps-for-retrieving-multiple-values-from-an-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-retrieving-multiple-values-from-an-index-1">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-deleting-records-from-an-object-store">
   <b><a href="#request-steps-for-deleting-records-from-an-object-store">#request-steps-for-deleting-records-from-an-object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-deleting-records-from-an-object-store-1">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-request-steps-for-deleting-records-from-an-object-store-2">4.8. The IDBCursor interface</a>
    <li><a href="#ref-for-request-steps-for-deleting-records-from-an-object-store-3">6.1. Object Store Storage Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-to-count-the-records-in-a-range">
   <b><a href="#request-steps-to-count-the-records-in-a-range">#request-steps-to-count-the-records-in-a-range</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-to-count-the-records-in-a-range-1">4.5. The IDBObjectStore interface</a>
    <li><a href="#ref-for-request-steps-to-count-the-records-in-a-range-2">4.6. The IDBIndex interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-clearing-an-object-store">
   <b><a href="#request-steps-for-clearing-an-object-store">#request-steps-for-clearing-an-object-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-clearing-an-object-store-1">4.5. The IDBObjectStore interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-steps-for-iterating-a-cursor">
   <b><a href="#request-steps-for-iterating-a-cursor">#request-steps-for-iterating-a-cursor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-steps-for-iterating-a-cursor-1">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-steps-for-iterating-a-cursor-2">(2)</a>
    <li><a href="#ref-for-request-steps-for-iterating-a-cursor-3">4.6. The IDBIndex interface</a> <a href="#ref-for-request-steps-for-iterating-a-cursor-4">(2)</a>
    <li><a href="#ref-for-request-steps-for-iterating-a-cursor-5">4.8. The IDBCursor interface</a> <a href="#ref-for-request-steps-for-iterating-a-cursor-6">(2)</a> <a href="#ref-for-request-steps-for-iterating-a-cursor-7">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-extract-a-key-from-a-value-using-a-key-path">
   <b><a href="#request-extract-a-key-from-a-value-using-a-key-path">#request-extract-a-key-from-a-value-using-a-key-path</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-extract-a-key-from-a-value-using-a-key-path-1">2.6. Index</a>
    <li><a href="#ref-for-request-extract-a-key-from-a-value-using-a-key-path-2">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-extract-a-key-from-a-value-using-a-key-path-3">(2)</a>
    <li><a href="#ref-for-request-extract-a-key-from-a-value-using-a-key-path-4">4.8. The IDBCursor interface</a>
    <li><a href="#ref-for-request-extract-a-key-from-a-value-using-a-key-path-5">6.1. Object Store Storage Operation</a> <a href="#ref-for-request-extract-a-key-from-a-value-using-a-key-path-6">(2)</a>
    <li><a href="#ref-for-request-extract-a-key-from-a-value-using-a-key-path-7">7.1. Extract a key from a value</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-evaluate-a-key-path-on-a-value">
   <b><a href="#request-evaluate-a-key-path-on-a-value">#request-evaluate-a-key-path-on-a-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-evaluate-a-key-path-on-a-value-1">7.1. Extract a key from a value</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-inject-a-key-into-a-value-using-a-key-path">
   <b><a href="#request-inject-a-key-into-a-value-using-a-key-path">#request-inject-a-key-into-a-value-using-a-key-path</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-inject-a-key-into-a-value-using-a-key-path-1">6.1. Object Store Storage Operation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-convert-a-key-to-a-value">
   <b><a href="#request-convert-a-key-to-a-value">#request-convert-a-key-to-a-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-convert-a-key-to-a-value-1">4.7. The IDBKeyRange interface</a> <a href="#ref-for-request-convert-a-key-to-a-value-2">(2)</a>
    <li><a href="#ref-for-request-convert-a-key-to-a-value-3">4.8. The IDBCursor interface</a> <a href="#ref-for-request-convert-a-key-to-a-value-4">(2)</a>
    <li><a href="#ref-for-request-convert-a-key-to-a-value-5">6.2. Object Store Retrieval Operations</a>
    <li><a href="#ref-for-request-convert-a-key-to-a-value-6">6.3. Index Retrieval Operations</a>
    <li><a href="#ref-for-request-convert-a-key-to-a-value-7">7.2. Inject a key into a value</a>
    <li><a href="#ref-for-request-convert-a-key-to-a-value-8">7.3. Convert a key to a value</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-convert-a-value-to-a-key">
   <b><a href="#request-convert-a-value-to-a-key">#request-convert-a-value-to-a-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-1">2.4. Keys</a>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-2">2.9. Key Range</a>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-3">4.3. The IDBFactory interface</a> <a href="#ref-for-request-convert-a-value-to-a-key-4">(2)</a>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-5">4.5. The IDBObjectStore interface</a> <a href="#ref-for-request-convert-a-value-to-a-key-6">(2)</a>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-7">4.7. The IDBKeyRange interface</a> <a href="#ref-for-request-convert-a-value-to-a-key-8">(2)</a> <a href="#ref-for-request-convert-a-value-to-a-key-9">(3)</a> <a href="#ref-for-request-convert-a-value-to-a-key-10">(4)</a> <a href="#ref-for-request-convert-a-value-to-a-key-11">(5)</a> <a href="#ref-for-request-convert-a-value-to-a-key-12">(6)</a>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-13">4.8. The IDBCursor interface</a> <a href="#ref-for-request-convert-a-value-to-a-key-14">(2)</a> <a href="#ref-for-request-convert-a-value-to-a-key-15">(3)</a>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-16">7.1. Extract a key from a value</a>
    <li><a href="#ref-for-request-convert-a-value-to-a-key-17">7.4. Convert a value to a key</a> <a href="#ref-for-request-convert-a-value-to-a-key-18">(2)</a> <a href="#ref-for-request-convert-a-value-to-a-key-19">(3)</a> <a href="#ref-for-request-convert-a-value-to-a-key-20">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-convert-a-value-to-a-multientry-key">
   <b><a href="#request-convert-a-value-to-a-multientry-key">#request-convert-a-value-to-a-multientry-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-convert-a-value-to-a-multientry-key-1">7.1. Extract a key from a value</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while(el.parentElement) {
                if(el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if(el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if(dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
        </script>